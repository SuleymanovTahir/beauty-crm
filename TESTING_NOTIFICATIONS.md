# üîî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Beauty CRM:
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ SMTP)
- ‚úÖ Instagram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ Facebook Graph API)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

```bash
cd backend
python main.py
```

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ `http://localhost:8000`

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```bash
cd backend
python test_notifications_full.py
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP –≤ —Ñ–∞–π–ª–µ `backend/.env.local`:

```env
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=ii3391609@gmail.com
SMTP_PASSWORD=hkfw qruh hxur ghta
FROM_EMAIL=ii3391609@gmail.com
```

**–î–ª—è Gmail:**
1. –í–∫–ª—é—á–∏—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Google Account
2. –°–æ–∑–¥–∞–π—Ç–µ App Password: https://myaccount.google.com/apppasswords
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password –≤ –ø–æ–ª–µ `SMTP_PASSWORD`

### Instagram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Instagram –≤ —Ñ–∞–π–ª–µ `backend/.env.local`:

```env
PAGE_ACCESS_TOKEN=EAATV1XF6v3ABP...
INSTAGRAM_BUSINESS_ID=17841448618072548
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Instagram ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è:**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –≤ Instagram Direct
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - —Ç–∞–º –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω `sender_id`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç ID –≤ —Ç–µ—Å—Ç–µ

**–û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç:**
–û—Ç–∫—Ä–æ–π—Ç–µ `backend/test_notifications_full.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:
```python
TEST_INSTAGRAM_ID = "123456789"  # ‚Üê –ù–∞ —Ä–µ–∞–ª—å–Ω—ã–π Instagram ID
```

## üìù –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç

```
======================================================================
üöÄ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´ –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
======================================================================

üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: 2025-11-16 08:30:00

======================================================================
–¢–ï–°–¢ #1: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
======================================================================

üìß –ü–æ–ª—É—á–∞—Ç–µ–ª—å: ii3391609@gmail.com
üìå –¢–µ–º–∞: üîî –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç Beauty CRM

üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ email...

‚úÖ EMAIL –£–°–ü–ï–®–ù–û –û–¢–ü–†–ê–í–õ–ï–ù!

üì¨ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É ii3391609@gmail.com
üí° –ï—Å–ª–∏ –ø–∏—Å—å–º–æ –Ω–µ –ø—Ä–∏—à–ª–æ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É '–°–ø–∞–º'

======================================================================
–¢–ï–°–¢ #2: Instagram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
======================================================================

üì± –ü–æ–ª—É—á–∞—Ç–µ–ª—å ID: 987654321
üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: üîî –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ...

üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Instagram...

‚úÖ INSTAGRAM –°–û–û–ë–©–ï–ù–ò–ï –£–°–ü–ï–®–ù–û –û–¢–ü–†–ê–í–õ–ï–ù–û!

üì± –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Instagram direct messages

======================================================================
üìä –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
‚úÖ PASS - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
‚úÖ PASS - Instagram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

–ü—Ä–æ–π–¥–µ–Ω–æ: 2/2
======================================================================
```

### ‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

#### Email: "SMTP credentials not configured"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª .env.local
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `backend/.env.local` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

#### Email: "Authentication failed"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π App Password
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π App Password –≤ Google Account

#### Instagram: "Invalid OAuth access token"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π PAGE_ACCESS_TOKEN
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ Facebook Developers Console

#### Instagram: "Message not sent"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π recipient ID
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π Instagram ID –∏–∑ –ª–æ–≥–æ–≤

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ email

–õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `backend/logs/app.log`:

```bash
tail -f backend/logs/app.log | grep email
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Instagram

```bash
tail -f backend/logs/app.log | grep instagram
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
cd backend
python -c "import core.config; import os; print('SMTP_USER:', os.getenv('SMTP_USERNAME')); print('PAGE_TOKEN:', os.getenv('PAGE_ACCESS_TOKEN')[:20] + '...')"
```

## üí° –°–æ–≤–µ—Ç—ã

1. **Email –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç?**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É "–°–ø–∞–º"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ App Password —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å email –∏–∑ Gmail Web, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **Instagram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç?**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫ (—Ç–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç ~60 –¥–Ω–µ–π)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Instagram Business Account –ø–æ–¥–∫–ª—é—á–µ–Ω

3. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Python –≤–µ—Ä—Å–∏–∏ 3.8+
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8000 –Ω–µ –∑–∞–Ω—è—Ç

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `backend/logs/app.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env.local` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç —Ç–æ–ª—å–∫–æ Email

```bash
python test_simple_email.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```bash
python tests/api/test_notifications_api.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

```bash
python tests/api/test_reminders_api.py
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-16
