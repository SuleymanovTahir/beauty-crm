
================================================================================
  –ó–ê–ü–£–°–ö –í–°–ï–• –¢–ï–°–¢–û–í BEAUTY CRM
================================================================================
–î–∞—Ç–∞: 2025-11-22 12:40:54

üìÑ –ó–∞–ø—É—Å–∫: tests/test_all.py
   –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ + SmartAssistant + API –º–æ–¥—É–ª–∏
--------------------------------------------------------------------------------

================================================================================
  –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï CRM –°–ò–°–¢–ï–ú–´
================================================================================
–î–∞—Ç–∞: 2025-11-22 12:40:54
Python: 3.14.0 (main, Oct  7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.3.19.1)]

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
--------------------------------------------------------------------------------
======================================================================
üîç –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
======================================================================
–°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ENVIRONMENT: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
üîç Hostname: MacBook-Air-Tahir.local
üîç IP: 127.0.0.1
üîç Is localhost: True
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: LOCALHOST ‚Üí development
======================================================================
‚ö†Ô∏è –§–∞–π–ª .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚ö†Ô∏è –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: PAGE_ACCESS_TOKEN, GEMINI_API_KEY
‚úÖ Config –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!
   Database: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –î–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from database import get_salon_settings
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω–∞: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db

   –í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü –≤ –ë–î: 60
   –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:
   ‚úÖ clients
   ‚úÖ bookings
   ‚úÖ employees
   ‚úÖ positions
   ‚úÖ services
   ‚úÖ conversations
   ‚úÖ master_schedule
   ‚úÖ master_time_off
   ‚úÖ loyalty_levels
   ‚úÖ client_loyalty_points

   ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 2: –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ CRM
--------------------------------------------------------------------------------

   [2.1] Dashboard —Å KPI...
   ‚úÖ Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç
       - –î–æ—Ö–æ–¥: 0.0 AED
       - –ó–∞–ø–∏—Å–∏: 1

   [2.2] –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤...
2025-11-22 12:40:54 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä
   ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã

   [2.3] –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏...
   ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
       - –£—Ä–æ–≤–Ω–µ–π: 4

   [2.4] –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–∫–æ–Ω...
   ‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: 3/4 —É—Å–ø–µ—à–Ω–æ

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 3: SmartAssistant (AI)
--------------------------------------------------------------------------------
   ‚úÖ SmartAssistant –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (client_id=test_user_123)
   ‚ö†Ô∏è  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—É—Å—Ç—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞)

   üßπ –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
   ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã (–∫–ª–∏–µ–Ω—Ç: test_user_123)

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ API –º–æ–¥—É–ª–µ–π
--------------------------------------------------------------------------------
2025-11-22 12:40:54 - crm - WARNING - [export] ReportLab –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
   ‚úÖ Dashboard API
   ‚úÖ Schedule API
   ‚úÖ Loyalty API
   ‚úÖ AutoBooking API
   ‚úÖ Bookings API
   ‚úÖ Clients API

   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: 6/6 –º–æ–¥—É–ª–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã

================================================================================
  –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
================================================================================
  1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ‚úÖ –ü–†–û–ô–î–ï–ù
  2. –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: ‚ùå –ü–†–û–í–ê–õ–ï–ù
  3. SmartAssistant: ‚úÖ –ü–†–û–ô–î–ï–ù
  4. API –º–æ–¥—É–ª–∏: ‚úÖ –ü–†–û–ô–î–ï–ù

  –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 4
  –ü—Ä–æ–π–¥–µ–Ω–æ: 3
  –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 1

  ‚ö†Ô∏è  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–µ–Ω—ã
  ‚ÑπÔ∏è  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π
================================================================================


üìÑ –ó–∞–ø—É—Å–∫: tests/test_detailed.py
   –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î, –∫–ª–∏–µ–Ω—Ç–æ–≤, –∑–∞–ø–∏—Å–µ–π, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
--------------------------------------------------------------------------------

====================================================================================================
  üîç –î–ï–¢–ê–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï CRM –°–ò–°–¢–ï–ú–´
====================================================================================================
–î–∞—Ç–∞: 2025-11-22 12:40:55
Python: 3.14.0 (main, Oct  7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.3.19.1)]

====================================================================================================
  –¢–ï–°–¢ 1: –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•
====================================================================================================

[–®–∞–≥ 1/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –ë–î
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω–∞: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 568.00 KB

[–®–∞–≥ 2/10] –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
   ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

[–®–∞–≥ 3/10] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
   ‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü: 60
   üìä –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü:
      [
      "activity_log",
      "available_slots",
      "birthday_notifications",
      "booking_reminder_settings",
      "booking_reminders_sent",
      "booking_statuses",
      "booking_temp",
      "booking_waitlist",
      "bookings",
      "bot_settings",
      "broadcast_history",
      "chat_history",
      "client_interaction_patterns",
      "client_interactions",
      "client_interests",
      "client_loyalty_points",
      "client_notes",
      "client_notifications",
      "client_preferences",
      "client_statuses",
      "clients",
      "conversation_context",
      "conversations",
      "custom_roles",
      "custom_statuses",
      "director_approval_votes",
      "director_approvals",
      "employee_salary_settings",
      "employee_schedule",
      "employee_services",
      "employee_time_off",
      "employee_unavailability",
      "employees",
      "internal_chat",
      "loyalty_levels",
      "loyalty_transactions",
      "master_schedule",
      "master_time_off",
      "message_reactions",
      "message_templates",
      "messenger_messages",
      "messenger_settings",
      "notification_settings",
      "password_reset_tokens",
      "positions",
      "role_permissions",
      "salary_adjustments",
      "salary_calculations",
      "salon_news",
      "salon_settings",
      "scheduled_messages",
      "service_courses",
      "service_positions",
      "services",
      "sessions",
      "special_packages",
      "sqlite_sequence",
      "user_permissions",
      "user_subscriptions",
      "users"
]

[–®–∞–≥ 4/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
   ‚úÖ clients (–ö–ª–∏–µ–Ω—Ç—ã)
   ‚úÖ bookings (–ó–∞–ø–∏—Å–∏)
   ‚úÖ employees (–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
   ‚úÖ positions (–î–æ–ª–∂–Ω–æ—Å—Ç–∏)
   ‚úÖ services (–£—Å–ª—É–≥–∏)
   ‚úÖ conversations (–î–∏–∞–ª–æ–≥–∏)
   ‚úÖ master_schedule (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤)
   ‚úÖ master_time_off (–í—ã—Ö–æ–¥–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–æ–≤)
   ‚úÖ loyalty_levels (–£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏)
   ‚úÖ client_loyalty_points (–ë–∞–ª–ª—ã –∫–ª–∏–µ–Ω—Ç–æ–≤)

[–®–∞–≥ 5/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
   ‚úÖ employees.position_id - INTEGER
   ‚úÖ services.position_id - INTEGER
   ‚úÖ master_schedule.start_time - nullable ‚úì

[–®–∞–≥ 6/10] –ü–æ–¥—Å—á–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
   ‚ÑπÔ∏è  clients: 9 –∑–∞–ø–∏—Å–µ–π
   ‚ÑπÔ∏è  bookings: 4 –∑–∞–ø–∏—Å–µ–π
   ‚ÑπÔ∏è  employees: 6 –∑–∞–ø–∏—Å–µ–π
   ‚ÑπÔ∏è  positions: 18 –∑–∞–ø–∏—Å–µ–π
   ‚ÑπÔ∏è  services: 77 –∑–∞–ø–∏—Å–µ–π
   ‚ö†Ô∏è  conversations: –ø—É—Å—Ç–æ (0 –∑–∞–ø–∏—Å–µ–π)
   ‚ö†Ô∏è  master_schedule: –ø—É—Å—Ç–æ (0 –∑–∞–ø–∏—Å–µ–π)
   ‚ö†Ô∏è  master_time_off: –ø—É—Å—Ç–æ (0 –∑–∞–ø–∏—Å–µ–π)
   ‚ÑπÔ∏è  loyalty_levels: 4 –∑–∞–ø–∏—Å–µ–π
   ‚ÑπÔ∏è  client_loyalty_points: 1 –∑–∞–ø–∏—Å–µ–π

[–®–∞–≥ 7/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
   ‚úÖ –ù–∞–π–¥–µ–Ω–æ –∏–Ω–¥–µ–∫—Å–æ–≤: 57
   ‚ÑπÔ∏è  sqlite_autoindex_clients_1 (—Ç–∞–±–ª–∏—Ü–∞: clients)
   ‚ÑπÔ∏è  sqlite_autoindex_booking_temp_1 (—Ç–∞–±–ª–∏—Ü–∞: booking_temp)
   ‚ÑπÔ∏è  sqlite_autoindex_users_1 (—Ç–∞–±–ª–∏—Ü–∞: users)
   ‚ÑπÔ∏è  sqlite_autoindex_sessions_1 (—Ç–∞–±–ª–∏—Ü–∞: sessions)
   ‚ÑπÔ∏è  sqlite_autoindex_custom_statuses_1 (—Ç–∞–±–ª–∏—Ü–∞: custom_statuses)
   ‚ÑπÔ∏è  sqlite_autoindex_services_1 (—Ç–∞–±–ª–∏—Ü–∞: services)
   ‚ÑπÔ∏è  sqlite_autoindex_special_packages_1 (—Ç–∞–±–ª–∏—Ü–∞: special_packages)
   ‚ÑπÔ∏è  sqlite_autoindex_custom_roles_1 (—Ç–∞–±–ª–∏—Ü–∞: custom_roles)
   ‚ÑπÔ∏è  sqlite_autoindex_role_permissions_1 (—Ç–∞–±–ª–∏—Ü–∞: role_permissions)
   ‚ÑπÔ∏è  sqlite_autoindex_positions_1 (—Ç–∞–±–ª–∏—Ü–∞: positions)

[–®–∞–≥ 8/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è foreign keys
   ‚ö†Ô∏è  Foreign keys: –í–´–ö–õ–Æ–ß–ï–ù–´

[–®–∞–≥ 9/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î
   ‚úÖ –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ë–î: OK

[–®–∞–≥ 10/10] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ SQLite
   ‚úÖ SQLite –≤–µ—Ä—Å–∏—è: 3.50.4

====================================================================================================
   ‚úÖ –¢–ï–°–¢ 1: –ü–†–û–ô–î–ï–ù

====================================================================================================
  –¢–ï–°–¢ 2: –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê ANALYTICS (DASHBOARD)
====================================================================================================

[–®–∞–≥ 1/7] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AnalyticsService
   ‚úÖ AnalyticsService —Å–æ–∑–¥–∞–Ω

[–®–∞–≥ 2/7] –ü–æ–ª—É—á–µ–Ω–∏–µ KPI –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
   ‚úÖ KPI –ø–æ–ª—É—á–µ–Ω—ã

[–®–∞–≥ 3/7] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞ KPI
   ‚úÖ –ö–ª—é—á 'period' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   ‚úÖ –ö–ª—é—á 'revenue' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   ‚úÖ –ö–ª—é—á 'bookings' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   ‚úÖ –ö–ª—é—á 'clients' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   ‚úÖ –ö–ª—é—á 'masters' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   ‚úÖ –ö–ª—é—á 'services' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

[–®–∞–≥ 4/7] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ Revenue
   ‚úÖ revenue.total = 0.0
   ‚úÖ revenue.daily = [{'date': '2025-10-23', 'revenue': 0.0}]
   ‚úÖ revenue.average_check = 0
   ‚úÖ revenue.forecast = 0.0

[–®–∞–≥ 5/7] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ Bookings
   ‚úÖ bookings.total = 1
   ‚úÖ bookings.completed = 1
   ‚úÖ bookings.cancelled = 0
   ‚ö†Ô∏è  bookings.pending - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚úÖ bookings.completion_rate = 100.0
   ‚úÖ bookings.cancellation_rate = 0.0

[–®–∞–≥ 6/7] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ Clients
   ‚úÖ clients.new = 0
   ‚úÖ clients.returning = 1
   ‚úÖ clients.retention = 100.0
   ‚úÖ clients.ltv = 0.0

[–®–∞–≥ 7/7] –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ KPI –¥–∞–Ω–Ω—ã—Ö
   üìä Period:
      {
      "type": "month",
      "start": "2025-10-23 00:00:00",
      "end": "2025-11-22 23:59:59"
}
   üìä Revenue:
      {
      "total": 0.0,
      "daily": [
            {
                  "date": "2025-10-23",
                  "revenue": 0.0
            }
      ],
      "average_check": 0,
      "forecast": 0.0
}
   üìä Bookings:
      {
      "total": 1,
      "completed": 1,
      "cancelled": 0,
      "no_show": 0,
      "cancellation_rate": 0.0,
      "no_show_rate": 0.0,
      "completion_rate": 100.0
}
   üìä Clients:
      {
      "new": 0,
      "returning": 1,
      "total_active": 1,
      "retention": 100.0,
      "ltv": 0.0
}
   üìä Top 5 Masters:
      [
      {
            "name": "Diana",
            "bookings": 1,
            "revenue": 0.0
      }
]
   üìä Top 5 Services:
      [
      {
            "name": "Manicure",
            "bookings": 1,
            "revenue": 0.0
      }
]

====================================================================================================
   ‚úÖ –¢–ï–°–¢ 2: –ü–†–û–ô–î–ï–ù

====================================================================================================
  –¢–ï–°–¢ 3: –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –†–ê–°–ü–ò–°–ê–ù–ò–Ø –ú–ê–°–¢–ï–†–û–í
====================================================================================================

[–®–∞–≥ 1/9] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MasterScheduleService
   ‚úÖ MasterScheduleService —Å–æ–∑–¥–∞–Ω

[–®–∞–≥ 2/9] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ (–ü–ù-–ü–¢: 09:00-18:00)
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –î–µ–Ω—å 0: –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –î–µ–Ω—å 1: –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –î–µ–Ω—å 2: –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –î–µ–Ω—å 3: –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –î–µ–Ω—å 4: –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

[–®–∞–≥ 3/9] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ –¥–Ω—è (–°–ë: 10:00-14:00)
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—É–±–±–æ—Ç—É

[–®–∞–≥ 4/9] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è (–í–°: NULL)
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π
   ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π
   ‚ÑπÔ∏è  –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è: migration_fix_master_schedule_nullable.py

[–®–∞–≥ 5/9] –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è '–¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π':

[–®–∞–≥ 6/9] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–∞
   ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—É—Å–∫

[–®–∞–≥ 7/9] –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
   ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ —Å–ª–æ—Ç–æ–≤: 0
   ‚ö†Ô∏è  –°–ª–æ—Ç–æ–≤ –Ω–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ —Å–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω–æ–π –∏–ª–∏ –≤—Å–µ –∑–∞–Ω—è—Ç—ã)

[–®–∞–≥ 8/9] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è
   ‚ö†Ô∏è  –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω —Å–µ–≥–æ–¥–Ω—è –≤ 14:00

[–®–∞–≥ 9/9] –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
   ‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è 6 –º–∞—Å—Ç–µ—Ä–æ–≤
   ‚ÑπÔ∏è  Simo: 11 —Å–ª–æ—Ç–æ–≤
   ‚ÑπÔ∏è  Mestan: 11 —Å–ª–æ—Ç–æ–≤
   ‚ÑπÔ∏è  Lyazzat: 11 —Å–ª–æ—Ç–æ–≤

====================================================================================================
   ‚úÖ –¢–ï–°–¢ 3: –ü–†–û–ô–î–ï–ù (—Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏)

   üßπ –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–∞ '–¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä –î–µ—Ç–∞–ª—å–Ω—ã–π'...
   ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã (—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ: 0, –æ—Ç–ø—É—Å–∫–∞: 0)

====================================================================================================
  –ò–¢–û–ì–ò –î–ï–¢–ê–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
====================================================================================================
  1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ‚úÖ –ü–†–û–ô–î–ï–ù
  2. Analytics (Dashboard): ‚úÖ –ü–†–û–ô–î–ï–ù
  3. Master Schedule: ‚úÖ –ü–†–û–ô–î–ï–ù

  –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 3
  –ü—Ä–æ–π–¥–µ–Ω–æ: 3
  –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0

  üéâ –í–°–ï –î–ï–¢–ê–õ–¨–ù–´–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!
====================================================================================================


üìÑ –ó–∞–ø—É—Å–∫: tests/test_new_features.py
   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á —Å–∏—Å—Ç–µ–º—ã
--------------------------------------------------------------------------------

================================================================================
  –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–û–í–´–• –§–£–ù–ö–¶–ò–ô CRM
================================================================================
  –î–∞—Ç–∞: 2025-11-22 12:40:55
================================================================================

================================================================================
  –¢–ï–°–¢ 1: Dashboard —Å KPI –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
================================================================================

--- KPI –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü ---
‚úÖ –î–æ—Ö–æ–¥:
   - –û–±—â–∏–π: 0.0 AED
   - –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: 0 AED
   - –ü—Ä–æ–≥–Ω–æ–∑: 0.0 AED

‚úÖ –ó–∞–ø–∏—Å–∏:
   - –í—Å–µ–≥–æ: 1
   - –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 1
   - –û—Ç–º–µ–Ω–µ–Ω–æ: 0
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 100.0%

‚úÖ –ö–ª–∏–µ–Ω—Ç—ã:
   - –ù–æ–≤—ã–µ: 0
   - –í–µ—Ä–Ω—É–≤—à–∏–µ—Å—è: 1
   - –£–¥–µ—Ä–∂–∞–Ω–∏–µ: 100.0%
   - LTV: 0.0 AED

‚úÖ –¢–æ–ø-5 –º–∞—Å—Ç–µ—Ä–æ–≤:
   1. Diana - 0.0 AED (1 –∑–∞–ø–∏—Å–µ–π)

‚úÖ –¢–æ–ø-5 —É—Å–ª—É–≥:
   1. Manicure - 0.0 AED (1x)

--- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–µ—Ä–∏–æ–¥–æ–º ---
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞: +0.0%
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π: -50.0%

================================================================================
  –¢–ï–°–¢ 2: –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤
================================================================================

--- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ ---
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞
2025-11-22 12:40:55 - crm - ERROR - [schedule] Employee not found: –ê–Ω–Ω–∞

--- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ ---
   –†–∞–±–æ—á–∏–µ —á–∞—Å—ã –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞ '–ê–Ω–Ω–∞':

--- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è ---

--- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ---
   –î–æ—Å—Ç—É–ø–Ω–æ —Å–ª–æ—Ç–æ–≤ –¥–ª—è '–ê–Ω–Ω–∞': 0

--- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ---
   –î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –º–∞—Å—Ç–µ—Ä —Å–µ–≥–æ–¥–Ω—è –≤ 14:00: ‚ùå –ù–µ—Ç

--- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ ---
   Simo: 11 —Å–ª–æ—Ç–æ–≤
   Mestan: 11 —Å–ª–æ—Ç–æ–≤
   Lyazzat: 11 —Å–ª–æ—Ç–æ–≤
   Gulya: 11 —Å–ª–æ—Ç–æ–≤
   Jennifer: 11 —Å–ª–æ—Ç–æ–≤
   Tursunay: 11 —Å–ª–æ—Ç–æ–≤

================================================================================
  –¢–ï–°–¢ 3: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
================================================================================

--- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ ---
   –£—Ä–æ–≤–µ–Ω—å: bronze
   –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤: 100
   –î–æ—Å—Ç—É–ø–Ω–æ: 100
   –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 0

--- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ ---
2025-11-22 12:40:55 - crm - INFO - [loyalty] Earned 100 points for test_client_123: –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä
Traceback (most recent call last):
  File "/Users/tahir/Desktop/beauty-crm/backend/tests/run_all_tests.py", line 164, in run_all_tests
    result = subprocess.run(
        [sys.executable, os.path.join(os.path.dirname(__file__), "check_bot.py")],
    ...<2 lines>...
        timeout=30
    )
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/subprocess.py", line 556, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
                     ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/subprocess.py", line 1220, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
                     ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/subprocess.py", line 2127, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/subprocess.py", line 1267, in _check_timeout
    raise TimeoutExpired(
    ...<2 lines>...
            stderr=b''.join(stderr_seq) if stderr_seq else None)
subprocess.TimeoutExpired: Command '['/opt/homebrew/opt/python@3.14/bin/python3.14', '/Users/tahir/Desktop/beauty-crm/backend/tests/check_bot.py']' timed out after 30 seconds
   ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–æ 100 –±–∞–ª–ª–æ–≤
   –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: 200 –±–∞–ª–ª–æ–≤

--- –£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ ---
   BRONZE: –æ—Ç 0 –±–∞–ª–ª–æ–≤
      - –°–∫–∏–¥–∫–∞: 0.0%
      - –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x1.0
   SILVER: –æ—Ç 500 –±–∞–ª–ª–æ–≤
      - –°–∫–∏–¥–∫–∞: 5.0%
      - –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x1.2
   GOLD: –æ—Ç 1500 –±–∞–ª–ª–æ–≤
      - –°–∫–∏–¥–∫–∞: 10.0%
      - –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x1.5
   PLATINUM: –æ—Ç 3000 –±–∞–ª–ª–æ–≤
      - –°–∫–∏–¥–∫–∞: 15.0%
      - –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x2.0

--- –†–∞—Å—á–µ—Ç —Å–∫–∏–¥–∫–∏ ---
   –¶–µ–Ω–∞: 500.0 AED
   –°–∫–∏–¥–∫–∞: 0.0% (0.0 AED)
   –ò—Ç–æ–≥–æ: 500.0 AED
   –£—Ä–æ–≤–µ–Ω—å: bronze

--- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ---
   –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 2
   1. earn: +100 –±–∞–ª–ª–æ–≤ - –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä
   2. earn: +100 –±–∞–ª–ª–æ–≤ - –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä

--- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –∑–∞ –∑–∞–ø–∏—Å—å ---
   –ó–∞ –∑–∞–ø–∏—Å—å 500 AED: 50 –±–∞–ª–ª–æ–≤
   –ó–∞ –∑–∞–ø–∏—Å—å 1000 AED: 100 –±–∞–ª–ª–æ–≤

================================================================================
  –¢–ï–°–¢ 4: –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–∫–æ–Ω –∑–∞–ø–∏—Å–∏
================================================================================

--- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ ---
   –ù–∞–π–¥–µ–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π: 6

   –¢–æ–ø-5 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
   1. None (test_scenario_upsell)
      - –ú–∞—Å—Ç–µ—Ä: Simo
      - –í—Ä–µ–º—è: 2025-11-22 12:30
      - –£—Å–ª—É–≥–∞: Pedicure
      - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
      - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç 45 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
   2. None (test_scenario_upsell)
      - –ú–∞—Å—Ç–µ—Ä: Mestan
      - –í—Ä–µ–º—è: 2025-11-22 12:30
      - –£—Å–ª—É–≥–∞: Pedicure
      - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
      - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç 45 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
   3. None (test_scenario_upsell)
      - –ú–∞—Å—Ç–µ—Ä: Lyazzat
      - –í—Ä–µ–º—è: 2025-11-22 12:30
      - –£—Å–ª—É–≥–∞: Pedicure
      - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
      - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç 45 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
   4. None (test_scenario_upsell)
      - –ú–∞—Å—Ç–µ—Ä: Gulya
      - –í—Ä–µ–º—è: 2025-11-22 12:30
      - –£—Å–ª—É–≥–∞: Pedicure
      - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
      - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç 45 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
   5. None (test_scenario_upsell)
      - –ú–∞—Å—Ç–µ—Ä: Jennifer
      - –í—Ä–µ–º—è: 2025-11-22 12:30
      - –£—Å–ª—É–≥–∞: Pedicure
      - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
      - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç 45 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

--- –ê–Ω–∞–ª–∏–∑ –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –Ω–µ–¥–µ–ª—é ---
   –ù–∞–π–¥–µ–Ω–æ –º–∞—Å—Ç–µ—Ä–æ–≤ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏: 6

   Simo:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

   Mestan:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

   Lyazzat:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

   Gulya:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

   Jennifer:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

   Tursunay:
      - –í—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤: 88
      - –î–Ω–µ–π —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é: 8
      - –ü—Ä–∏–º–µ—Ä (2025-11-22): 11 —Å–ª–æ—Ç–æ–≤

--- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ---
   –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: 5
   1. None -> Simo –≤ 12:30
      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
   2. None -> Mestan –≤ 12:30
      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
   3. None -> Lyazzat –≤ 12:30
      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
   4. None -> Gulya –≤ 12:30
      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%
   5. None -> Jennifer –≤ 12:30
      –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 50%

================================================================================
  –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
================================================================================
  Dashboard —Å KPI: ‚úÖ –£–°–ü–ï–®–ù–û
  –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤: ‚úÖ –£–°–ü–ï–®–ù–û
  –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏: ‚úÖ –£–°–ü–ï–®–ù–û
  –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–∫–æ–Ω: ‚úÖ –£–°–ü–ï–®–ù–û

  –ü—Ä–æ–π–¥–µ–Ω–æ: 4/4

  üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
================================================================================


üìÑ –ó–∞–ø—É—Å–∫: tests/check_bot.py
   –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Ä–∞–±–æ—Ç—ã AI –±–æ—Ç–∞
--------------------------------------------------------------------------------
‚ùå –û—à–∏–±–∫–∞: Command '['/opt/homebrew/opt/python@3.14/bin/python3.14', '/Users/tahir/Desktop/beauty-crm/backend/tests/check_bot.py']' timed out after 30 seconds

üìÑ –ó–∞–ø—É—Å–∫: tests/api/test_reminders_api.py
   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∑–∞–ø–∏—Å—è—Ö
--------------------------------------------------------------------------------
======================================================================
üîç –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
======================================================================
–°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ENVIRONMENT: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
üîç Hostname: MacBook-Air-Tahir.local
üîç IP: 127.0.0.1
üîç Is localhost: True
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: LOCALHOST ‚Üí development
======================================================================
‚ö†Ô∏è –§–∞–π–ª .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚ö†Ô∏è –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: PAGE_ACCESS_TOKEN, GEMINI_API_KEY
‚úÖ Config –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!
   Database: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –î–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from database import get_salon_settings

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô –û –ó–ê–ü–ò–°–Ø–•
======================================================================
======================================================================
–ü–†–û–í–ï–†–ö–ê –¢–ê–ë–õ–ò–¶–´ booking_reminder_settings
======================================================================

‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–æ–ª–æ–Ω–æ–∫: 8

üìã –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã:
  - id (INTEGER)
  - name (TEXT)
  - days_before (INTEGER)
  - hours_before (INTEGER)
  - is_enabled (INTEGER)
  - notification_type (TEXT)
  - created_at (TEXT)
  - updated_at (TEXT)

üìä –ó–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ: 5

üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π:
   1. –ó–∞ 2 –¥–Ω—è –¥–æ –∑–∞–ø–∏—Å–∏             |  2 –¥–Ω.  0 —á. | email  | ‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ
   2. –ó–∞ 1 –¥–µ–Ω—å –¥–æ –∑–∞–ø–∏—Å–∏            |  1 –¥–Ω.  0 —á. | email  | ‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ
   3. –ó–∞ 6 —á–∞—Å–æ–≤ –¥–æ –∑–∞–ø–∏—Å–∏           |  0 –¥–Ω.  6 —á. | email  | ‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ
   4. –ó–∞ 3 —á–∞—Å–∞ –¥–æ –∑–∞–ø–∏—Å–∏            |  0 –¥–Ω.  3 —á. | email  | ‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ
   5. –ó–∞ 1 —á–∞—Å –¥–æ –∑–∞–ø–∏—Å–∏             |  0 –¥–Ω.  1 —á. | email  | ‚ùå –í—ã–∫–ª—é—á–µ–Ω–æ

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –§–£–ù–ö–¶–ò–ô API (–ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤)
======================================================================
2025-11-22 12:41:25 - crm - WARNING - [export] ReportLab –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã booking_reminder_settings...
   ‚úÖ –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï HTTP API
======================================================================

1Ô∏è‚É£ GET /api/booking-reminder-settings (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
   –°—Ç–∞—Ç—É—Å: 401
   ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô
======================================================================

üìù –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: '–ó–∞ 2 –¥–Ω—è –¥–æ –∑–∞–ø–∏—Å–∏' (ID: 1)
   –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –í—ã–∫–ª—é—á–µ–Ω–æ
   ‚û°Ô∏è  –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞: –í–∫–ª—é—á–µ–Ω–æ
   ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ
   ‚Ü©Ô∏è  –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

======================================================================
–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
‚úÖ PASS - –¢–∞–±–ª–∏—Ü–∞ booking_reminder_settings
‚úÖ PASS - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (API)
‚úÖ PASS - HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚úÖ PASS - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–ü—Ä–æ–π–¥–µ–Ω–æ: 4/4


üìÑ –ó–∞–ø—É—Å–∫: tests/api/test_notifications_api.py
   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
--------------------------------------------------------------------------------
======================================================================
üîç –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
======================================================================
–°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ENVIRONMENT: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
üîç Hostname: MacBook-Air-Tahir.local
üîç IP: 127.0.0.1
üîç Is localhost: True
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: LOCALHOST ‚Üí development
======================================================================
‚ö†Ô∏è –§–∞–π–ª .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚ö†Ô∏è –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: PAGE_ACCESS_TOKEN, GEMINI_API_KEY
‚úÖ Config –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!
   Database: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –î–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from database import get_salon_settings

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
======================================================================
======================================================================
–ü–†–û–í–ï–†–ö–ê –¢–ê–ë–õ–ò–¶ –í –ë–ê–ó–ï –î–ê–ù–ù–´–•
======================================================================

üìã –í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü: 60
  ‚úì activity_log: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì available_slots: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì birthday_notifications: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì booking_reminder_settings: 5 –∑–∞–ø–∏—Å–µ–π
  ‚úì booking_reminders_sent: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì booking_statuses: 5 –∑–∞–ø–∏—Å–µ–π
  ‚úì booking_temp: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì booking_waitlist: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì bookings: 4 –∑–∞–ø–∏—Å–µ–π
  ‚úì bot_settings: 1 –∑–∞–ø–∏—Å–µ–π
  ‚úì broadcast_history: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì chat_history: 10 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_interaction_patterns: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_interactions: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_interests: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_loyalty_points: 1 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_notes: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_notifications: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_preferences: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì client_statuses: 8 –∑–∞–ø–∏—Å–µ–π
  ‚úì clients: 9 –∑–∞–ø–∏—Å–µ–π
  ‚úì conversation_context: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì conversations: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì custom_roles: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì custom_statuses: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì director_approval_votes: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì director_approvals: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì employee_salary_settings: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì employee_schedule: 42 –∑–∞–ø–∏—Å–µ–π
  ‚úì employee_services: 108 –∑–∞–ø–∏—Å–µ–π
  ‚úì employee_time_off: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì employee_unavailability: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì employees: 6 –∑–∞–ø–∏—Å–µ–π
  ‚úì internal_chat: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì loyalty_levels: 4 –∑–∞–ø–∏—Å–µ–π
  ‚úì loyalty_transactions: 2 –∑–∞–ø–∏—Å–µ–π
  ‚úì master_schedule: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì master_time_off: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì message_reactions: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì message_templates: 30 –∑–∞–ø–∏—Å–µ–π
  ‚úì messenger_messages: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì messenger_settings: 4 –∑–∞–ø–∏—Å–µ–π
  ‚úì notification_settings: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì password_reset_tokens: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì positions: 18 –∑–∞–ø–∏—Å–µ–π
  ‚úì role_permissions: 80 –∑–∞–ø–∏—Å–µ–π
  ‚úì salary_adjustments: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì salary_calculations: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì salon_news: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì salon_settings: 1 –∑–∞–ø–∏—Å–µ–π
  ‚úì scheduled_messages: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì service_courses: 3 –∑–∞–ø–∏—Å–µ–π
  ‚úì service_positions: 180 –∑–∞–ø–∏—Å–µ–π
  ‚úì services: 77 –∑–∞–ø–∏—Å–µ–π
  ‚úì sessions: 6 –∑–∞–ø–∏—Å–µ–π
  ‚úì special_packages: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì sqlite_sequence: 19 –∑–∞–ø–∏—Å–µ–π
  ‚úì user_permissions: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì user_subscriptions: 0 –∑–∞–ø–∏—Å–µ–π
  ‚úì users: 7 –∑–∞–ø–∏—Å–µ–π

======================================================================
–ü–†–û–í–ï–†–ö–ê –¢–ê–ë–õ–ò–¶–´ notification_settings
======================================================================

‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–æ–ª–æ–Ω–æ–∫: 7
  - id (INTEGER)
  - user_id (INTEGER)
  - email_notifications (BOOLEAN)
  - sms_notifications (BOOLEAN)
  - booking_notifications (BOOLEAN)
  - birthday_reminders (BOOLEAN)
  - birthday_days_advance (INTEGER)

–ó–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ: 0

======================================================================
–ü–†–û–í–ï–†–ö–ê –¢–ê–ë–õ–ò–¶–´ booking_reminder_settings
======================================================================

‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–æ–ª–æ–Ω–æ–∫: 8
  - id (INTEGER)
  - name (TEXT)
  - days_before (INTEGER)
  - hours_before (INTEGER)
  - is_enabled (INTEGER)
  - notification_type (TEXT)
  - created_at (TEXT)
  - updated_at (TEXT)

–ó–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ: 5
  (1, '–ó–∞ 2 –¥–Ω—è –¥–æ –∑–∞–ø–∏—Å–∏', 2, 0, 0, 'email', '2025-11-22 07:21:38', '2025-11-22 07:21:38')
  (2, '–ó–∞ 1 –¥–µ–Ω—å –¥–æ –∑–∞–ø–∏—Å–∏', 1, 0, 0, 'email', '2025-11-22 07:21:38', '2025-11-22 07:21:38')
  (3, '–ó–∞ 6 —á–∞—Å–æ–≤ –¥–æ –∑–∞–ø–∏—Å–∏', 0, 6, 0, 'email', '2025-11-22 07:21:38', '2025-11-22 07:21:38')
  (4, '–ó–∞ 3 —á–∞—Å–∞ –¥–æ –∑–∞–ø–∏—Å–∏', 0, 3, 0, 'email', '2025-11-22 07:21:38', '2025-11-22 07:21:38')
  (5, '–ó–∞ 1 —á–∞—Å –¥–æ –∑–∞–ø–∏—Å–∏', 0, 1, 0, 'email', '2025-11-22 07:21:38', '2025-11-22 07:21:38')

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï GET /api/notifications/settings
======================================================================
2025-11-22 12:41:26 - crm - WARNING - [export] ReportLab –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

üîÑ –í—ã–∑–æ–≤ get_notification_settings_api()...

‚úÖ –£–°–ü–ï–®–ù–û!
–†–µ–∑—É–ª—å—Ç–∞—Ç: {'emailNotifications': True, 'smsNotifications': False, 'bookingNotifications': True, 'chatNotifications': True, 'dailyReport': True, 'reportTime': '09:00'}

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï GET /api/booking-reminder-settings
======================================================================

üîÑ –í—ã–∑–æ–≤ get_booking_reminder_settings()...
‚úÖ –§—É–Ω–∫—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ
‚ö†Ô∏è  –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï HTTP GET http://localhost:8000/api/notifications/settings
======================================================================

üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ HTTP GET –∑–∞–ø—Ä–æ—Å–∞...

–°—Ç–∞—Ç—É—Å –∫–æ–¥: 200
Headers: {'date': 'Sat, 22 Nov 2025 08:41:25 GMT', 'server': 'uvicorn', 'content-length': '145', 'content-type': 'application/json', 'x-content-type-options': 'nosniff', 'x-frame-options': 'DENY', 'x-xss-protection': '1; mode=block'}

‚úÖ –£–°–ü–ï–®–ù–û!
–û—Ç–≤–µ—Ç: {'emailNotifications': True, 'smsNotifications': False, 'bookingNotifications': True, 'chatNotifications': True, 'dailyReport': True, 'reportTime': '09:00'}

======================================================================
–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
‚úÖ PASS - –ë–î —Ç–∞–±–ª–∏—Ü—ã
‚úÖ PASS - –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API —Ñ—É–Ω–∫—Ü–∏–∏
‚úÖ PASS - Booking reminders —ç–Ω–¥–ø–æ–∏–Ω—Ç
‚úÖ PASS - HTTP –∑–∞–ø—Ä–æ—Å

–ü—Ä–æ–π–¥–µ–Ω–æ: 4/4


üìÑ –ó–∞–ø—É—Å–∫: tests/test_schedule.py
   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
--------------------------------------------------------------------------------
======================================================================
üîç –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
======================================================================
–°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ENVIRONMENT: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
üîç Hostname: MacBook-Air-Tahir.local
üîç IP: 127.0.0.1
üîç Is localhost: True
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: LOCALHOST ‚Üí development
======================================================================
‚ö†Ô∏è –§–∞–π–ª .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚ö†Ô∏è –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: PAGE_ACCESS_TOKEN, GEMINI_API_KEY
‚úÖ Config –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!
   Database: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –î–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from database import get_salon_settings
2025-11-22 12:41:26 - crm - WARNING - [export] ReportLab –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
2025-11-22 12:41:26 - crm - ERROR - [telegram] Telegram bot token not found in .env or database
2025-11-22 12:41:26 - crm - INFO - [startup] ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: static/uploads/images, static/uploads/files, static/uploads/voice, logs
2025-11-22 12:41:26 - crm - INFO - [modules] üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π –∏–∑ /Users/tahir/Desktop/beauty-crm/backend/modules_config.json
2025-11-22 12:41:26 - crm - INFO - [startup] ‚úÖ –ú–æ–¥—É–ª—å 'public' –ø–æ–¥–∫–ª—é—á–µ–Ω: /public/* endpoints

Running Schedule API Tests...
   Testing GET schedule... 2025-11-22 12:41:26 - crm - INFO - [middleware] üî• GET /api/schedule/user/10
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ GET /api/schedule/user/10 ‚Üí 200 (0.00s)
PASSED
   Testing PUT schedule... 2025-11-22 12:41:26 - crm - INFO - [middleware] üî• PUT /api/schedule/user/10
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ PUT /api/schedule/user/10 ‚Üí 200 (0.00s)
2025-11-22 12:41:26 - crm - INFO - [middleware] üî• GET /api/schedule/user/10
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ GET /api/schedule/user/10 ‚Üí 200 (0.00s)
PASSED
   Testing Time Off CRUD... 2025-11-22 12:41:26 - crm - INFO - [middleware] üî• POST /api/schedule/user/10/time-off
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ POST /api/schedule/user/10/time-off ‚Üí 200 (0.00s)
2025-11-22 12:41:26 - crm - INFO - [middleware] üî• GET /api/schedule/user/10/time-off
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ GET /api/schedule/user/10/time-off ‚Üí 200 (0.00s)
2025-11-22 12:41:26 - crm - INFO - [middleware] üî• DELETE /api/schedule/time-off/3
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ DELETE /api/schedule/time-off/3 ‚Üí 200 (0.00s)
2025-11-22 12:41:26 - crm - INFO - [middleware] üî• GET /api/schedule/user/10/time-off
2025-11-22 12:41:26 - crm - INFO - [middleware] üì§ GET /api/schedule/user/10/time-off ‚Üí 200 (0.00s)
PASSED

‚úÖ All schedule tests passed!

