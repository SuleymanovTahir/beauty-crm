# ะะฝะฐะปะธะท ะฟัะฐะฒ ะดะพัััะฟะฐ ะดะปั ัะพะปะธ "ะัะพะดะฐะถะฝะธะบ" (Sales)

## ะขะตะบััะธะต ะฟัะฐะฒะฐ ัะพะปะธ Sales

ะกะพะณะปะฐัะฝะพ `frontend/src/utils/permissions.ts`, ัะพะปั **sales** ะธะผะตะตั ัะปะตะดัััะธะต ะฟัะฐะฒะฐ:

```typescript
sales: {
  name: 'ะัะพะดะฐะถะฝะธะบ',
  permissions: [
    'instagram_chat_view',           // ะัะพัะผะพัั Instagram ัะฐัะฐ
    'clients_view_limited',          // ะะณัะฐะฝะธัะตะฝะฝัะน ะฟัะพัะผะพัั ะบะปะธะตะฝัะพะฒ
    'analytics_view_stats_only',    // ะขะพะปัะบะพ ััะฐัะธััะธะบะฐ (ะฑะตะท ัะธะฝะฐะฝัะพะฒ)
    'staff_chat_own',                // ะะฝัััะตะฝะฝัั ัะฒัะทั
    'calendar_view_all_readonly',    // ะะฐะปะตะฝะดะฐัั ัะพะปัะบะพ ะดะปั ััะตะฝะธั
    'bot_settings_view',             // ะัะพัะผะพัั ะฝะฐัััะพะตะบ ะฑะพัะฐ
  ],
  can_manage_roles: [],              // ะะต ะผะพะถะตั ัะฟัะฐะฒะปััั ัะพะปัะผะธ
  hierarchy_level: 40,               // ะฃัะพะฒะตะฝั 40 (ะฝะธะถะต manager=60, admin=80, director=100)
}
```

## ะงัะพ ะะะกะขะฃะะะ ะฟัะพะดะฐะถะฝะธะบั

### โ ะะพัััะฟะฝัะต ัะฐะทะดะตะปั ะผะตะฝั:

1. **ะะพะธ ะบะปะธะตะฝัั** (Dashboard ะดะปั Sales) - `/sales/clients`
   - ะะธะดะธั ะพะณัะฐะฝะธัะตะฝะฝัะน ัะฟะธัะพะบ ะบะปะธะตะฝัะพะฒ
   - ะะพะถะตั ัะฐะฑะพัะฐัั ัะพะปัะบะพ ัะพ ัะฒะพะธะผะธ ะบะปะธะตะฝัะฐะผะธ

2. **ะะฐะดะฐัะธ** - `/sales/tasks`
   - ะะพะถะตั ะฟัะพัะผะฐััะธะฒะฐัั ะธ ัะพะทะดะฐะฒะฐัั ะทะฐะดะฐัะธ

3. **ะงะฐั** - `/sales/chat`
   - ะะพัััะฟ ะบ Instagram ัะฐัั
   - ะะพะถะตั ะพะฑัะฐัััั ั ะบะปะธะตะฝัะฐะผะธ ัะตัะตะท ะผะตััะตะฝะดะถะตัั

4. **ะัะพัะธะปั** - `/sales/profile`
   - ะกะฒะพะน ะฟัะพัะธะปั

5. **ะะพัะพะฝะบะฐ** - `/sales/funnel`
   - ะะพะถะตั ะฒะธะดะตัั ะฒะพัะพะฝะบั ะฟัะพะดะฐะถ

6. **ะะฐัััะปะบะธ** - `/sales/broadcasts`
   - ะะพะถะตั ะพัะฟัะฐะฒะปััั ัะฐัััะปะบะธ ะบะปะธะตะฝัะฐะผ

7. **ะะฝัััะตะฝะฝัั ัะฒัะทั** - `/sales/internal-chat`
   - ะะฑัะตะฝะธะต ั ะบะพะปะปะตะณะฐะผะธ

8. **ะะฐัััะพะนะบะธ** - `/sales/settings`
   - ะะณัะฐะฝะธัะตะฝะฝัะต ะฝะฐัััะพะนะบะธ (ัะฒะพะน ะฟัะพัะธะปั, ัะทัะบ ะธ ั.ะด.)

9. **ะะฐัััะพะนะบะธ ะฑะพัะฐ** - `/sales/bot-settings`
   - ะะพะถะตั ะฟัะพัะผะฐััะธะฒะฐัั ะฝะฐัััะพะนะบะธ ะฑะพัะฐ

## ะงัะพ ะะ ะะะกะขะฃะะะ ะฟัะพะดะฐะถะฝะธะบั (ะธ ะดะพะปะถะฝะพ ะฑััั ัะบัััะพ)

### โ ะะฐะทะดะตะปั, ะบะพัะพััะต ะะ ะดะพะปะถะฝั ะฑััั ะฒะธะดะฝั:

#### 1. **ะะฐะปะตะฝะดะฐัั** (`/sales/calendar`)
**ะัะพะฑะปะตะผะฐ:** ะกะตะนัะฐั ะฒะธะดะฝะพ ะฒ ะผะตะฝั, ะฝะพ ะดะพัััะฟ ัะพะปัะบะพ ะดะปั ััะตะฝะธั
```typescript
requirePermission: () => permissions.canViewAllCalendars && user?.role !== 'employee'
```
**ะะตะบะพะผะตะฝะดะฐัะธั:**
- โ ะััะฐะฒะธัั ะบะฐะบ ะตััั (readonly ะดะพัััะฟ ะฟะพะปะตะทะตะฝ ะดะปั ะฟัะพะดะฐะถะฝะธะบะฐ)
- ะะปะธ ัะบัััั, ะตัะปะธ ะฝะต ะฝัะถะตะฝ

#### 2. **ะะปะธะตะฝัั** (`/sales/clients`)
**ะัะพะฑะปะตะผะฐ:** ะกะตะนัะฐั ัะบััั ะธะท ะพัะฝะพะฒะฝะพะณะพ ะผะตะฝั
```typescript
requirePermission: () => permissions.canViewAllClients && user?.role !== 'sales'
```
**ะกัะฐััั:** โ ะัะฐะฒะธะปัะฝะพ ะฝะฐัััะพะตะฝะพ (ัะบัััะพ)

#### 3. **ะฃัะปัะณะธ** (`/sales/services`)
**ะัะพะฑะปะตะผะฐ:** ะัะพะดะฐะถะฝะธะบ ะฝะต ะดะพะปะถะตะฝ ัะตะดะฐะบัะธัะพะฒะฐัั ััะปัะณะธ
```typescript
requirePermission: () => permissions.canViewServices
```
**ะกัะฐััั:** โ ะกะตะนัะฐั ะะะข ะฟัะฐะฒ ั sales (ะฝะตั 'services_view')
**ะะตะบะพะผะตะฝะดะฐัะธั:** โ ะัะฐะฒะธะปัะฝะพ

#### 4. **ะะพะปัะทะพะฒะฐัะตะปะธ** (`/sales/users`)
**ะัะพะฑะปะตะผะฐ:** ะัะพะดะฐะถะฝะธะบ ะฝะต ะดะพะปะถะตะฝ ัะฟัะฐะฒะปััั ัะพัััะดะฝะธะบะฐะผะธ
```typescript
requirePermission: () => permissions.canViewAllUsers
```
**ะกัะฐััั:** โ ะกะตะนัะฐั ะะะข ะฟัะฐะฒ (ัะพะปัะบะพ director, admin)
**ะะตะบะพะผะตะฝะดะฐัะธั:** โ ะัะฐะฒะธะปัะฝะพ

#### 5. **ะะฝะฐะปะธัะธะบะฐ** (`/sales/analytics`)
**ะัะพะฑะปะตะผะฐ:** ะะพะปะฝะฐั ัะธะฝะฐะฝัะพะฒะฐั ะฐะฝะฐะปะธัะธะบะฐ ะฝะต ะดะพะปะถะฝะฐ ะฑััั ะดะพัััะฟะฝะฐ
```typescript
requirePermission: () => permissions.canViewAnalytics && user?.role !== 'marketer' && user?.role !== 'sales'
```
**ะกัะฐััั:** โ ะัะฐะฒะธะปัะฝะพ ัะบัััะพ (ัะพะปัะบะพ admin, director, manager)
**ะะตะบะพะผะตะฝะดะฐัะธั:** ะัะพะดะฐะถะฝะธะบ ะดะพะปะถะตะฝ ะฒะธะดะตัั ัะพะปัะบะพ ัะฒะพั ััะฐัะธััะธะบั (ะฝะต ัะธะฝะฐะฝัั)

#### 6. **ะะพัะตัะธัะตะปะธ** (`/sales/visitor-analytics`)
**ะัะพะฑะปะตะผะฐ:** ะะฝะฐะปะธัะธะบะฐ ัะฐะนัะฐ ะฝะต ะฝัะถะฝะฐ ะฟัะพะดะฐะถะฝะธะบั
```typescript
requirePermission: () => permissions.canViewAnalytics
```
**ะกัะฐััั:** โ ะกะตะนัะฐั ะะะข ะดะพัััะฟะฐ
**ะะตะบะพะผะตะฝะดะฐัะธั:** โ ะัะฐะฒะธะปัะฝะพ

#### 7. **ะัะฑะปะธัะฝัะน ะบะพะฝัะตะฝั** (`/sales/public-content`)
**ะัะพะฑะปะตะผะฐ:** ะัะพะดะฐะถะฝะธะบ ะฝะต ะดะพะปะถะตะฝ ัะตะดะฐะบัะธัะพะฒะฐัั ะบะพะฝัะตะฝั ัะฐะนัะฐ
```typescript
requirePermission: () => permissions.canViewSettings && permissions.roleLevel >= 80
```
**ะกัะฐััั:** โ ะกะตะนัะฐั ะะะข ะดะพัััะฟะฐ (roleLevel sales = 40)
**ะะตะบะพะผะตะฝะดะฐัะธั:** โ ะัะฐะฒะธะปัะฝะพ

#### 8. **ะขะตะปะตัะพะฝะธั** (`/sales/telephony`)
**ะัะพะฑะปะตะผะฐ:** ะะพะถะตั ะฑััั ะฟะพะปะตะทะฝะฐ, ะฝะพ ัะตะนัะฐั ัะบัััะฐ
```typescript
requirePermission: () => permissions.roleLevel >= 80
```
**ะกัะฐััั:** โ ะกะตะนัะฐั ะะะข ะดะพัััะฟะฐ
**ะะตะบะพะผะตะฝะดะฐัะธั:**
- โ๏ธ ะะพะทะผะพะถะฝะพ ััะพะธั ะดะฐัั ะดะพัััะฟ ะดะปั ะทะฒะพะฝะบะพะฒ ะบะปะธะตะฝัะฐะผ
- ะะปะธ ะพััะฐะฒะธัั ะบะฐะบ ะตััั

#### 9. **ะะพะณะธ ะฐัะดะธัะฐ** (`/sales/audit-log`)
**ะัะพะฑะปะตะผะฐ:** ะขะพะปัะบะพ ะดะปั ะดะธัะตะบัะพัะฐ
```typescript
requirePermission: () => user?.role === 'director'
```
**ะกัะฐััั:** โ ะัะฐะฒะธะปัะฝะพ (ัะพะปัะบะพ director)

#### 10. **ะะพัะทะธะฝะฐ** (`/sales/trash`)
**ะัะพะฑะปะตะผะฐ:** ะะพัััะฐะฝะพะฒะปะตะฝะธะต ัะดะฐะปะตะฝะฝัั ะดะฐะฝะฝัั - ัะพะปัะบะพ ะดะปั ะฒััะพะบะธั ัะพะปะตะน
```typescript
requirePermission: () => permissions.roleLevel >= 80
```
**ะกัะฐััั:** โ ะัะฐะฒะธะปัะฝะพ (ัะพะปัะบะพ director, admin)

## ะะฐะฟะธัะธ (Bookings)

**ะขะตะบััะฐั ะบะพะฝัะธะณััะฐัะธั:**
```typescript
requirePermission: () => permissions.canViewAllBookings || permissions.canCreateBookings || user?.role === 'employee'
```

**ะัะพะฑะปะตะผะฐ:** Sales ะะ ะธะผะตะตั ะฟัะฐะฒ `bookings_view` ะธะปะธ `bookings_create`

**ะกัะฐััั:** โ ะกะตะนัะฐั ะฟัะพะดะฐะถะฝะธะบ ะะ ะฒะธะดะธั ัะฐะทะดะตะป "ะะฐะฟะธัะธ"

**ะะตะบะพะผะตะฝะดะฐัะธั:**
- ะัะปะธ ะฟัะพะดะฐะถะฝะธะบ ะดะพะปะถะตะฝ ะทะฐะฟะธััะฒะฐัั ะบะปะธะตะฝัะพะฒ โ ะดะพะฑะฐะฒะธัั ะฟัะฐะฒะพ `'bookings_create'`
- ะัะปะธ ะฝะต ะดะพะปะถะตะฝ โ ะพััะฐะฒะธัั ะบะฐะบ ะตััั

## ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะปัััะตะฝะธั

### 1. ะะพะฑะฐะฒะธัั ะฟัะฐะฒะฐ ะฝะฐ ะทะฐะฟะธัะธ (ะตัะปะธ ะฝัะถะฝะพ)

ะัะปะธ ะฟัะพะดะฐะถะฝะธะบ ะดะพะปะถะตะฝ ะทะฐะฟะธััะฒะฐัั ะบะปะธะตะฝัะพะฒ, ะพะฑะฝะพะฒะธัะต `permissions.ts`:

```typescript
sales: {
  name: 'ะัะพะดะฐะถะฝะธะบ',
  permissions: [
    'instagram_chat_view',
    'clients_view_limited',
    'analytics_view_stats_only',
    'staff_chat_own',
    'calendar_view_all_readonly',
    'bot_settings_view',
    'bookings_create',        // โ ะะะะะะะขะฌ
    'bookings_view_own',      // โ ะะะะะะะขะฌ (ัะพะปัะบะพ ัะฒะพะธ ะทะฐะฟะธัะธ)
  ],
  ...
}
```

### 2. ะะณัะฐะฝะธัะธัั ะฟัะพัะผะพัั ะบะฐะปะตะฝะดะฐัั

ะัะปะธ ะบะฐะปะตะฝะดะฐัั ะฝะต ะฝัะถะตะฝ ะฟัะพะดะฐะถะฝะธะบั, ะธะทะผะตะฝะธัะต ััะปะพะฒะธะต:

```typescript
{
  icon: Calendar,
  label: t('menu.calendar'),
  path: `${rolePrefix}/calendar`,
  requirePermission: () => permissions.canViewAllCalendars &&
                           user?.role !== 'employee' &&
                           user?.role !== 'sales'  // โ ะะะะะะะขะฌ
}
```

### 3. ะะฐัั ะดะพัััะฟ ะบ ัะตะปะตัะพะฝะธะธ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

ะัะปะธ ะฟัะพะดะฐะถะฝะธะบะฐะผ ะฝัะถะฝะพ ะทะฒะพะฝะธัั ะบะปะธะตะฝัะฐะผ:

```typescript
{
  icon: Phone,
  label: t('menu.telephony'),
  path: `${rolePrefix}/telephony`,
  requirePermission: () => permissions.roleLevel >= 40  // โ ะะทะผะตะฝะธัั ั 80 ะฝะฐ 40
}
```

### 4. ะกะบัััั ะฝะฐัััะพะนะบะธ ะฑะพัะฐ ะพั sales

ะัะปะธ ะฝะฐัััะพะนะบะธ ะฑะพัะฐ ะฝะต ะฝัะถะฝั:

```typescript
sales: {
  permissions: [
    // ะฃะฑัะฐัั 'bot_settings_view'
  ]
}
```

## ะัะพะณะพะฒะฐั ัะฐะฑะปะธัะฐ ะดะพัััะฟะฐ

| ะะฐะทะดะตะป ะผะตะฝั | Director | Admin | Manager | Sales | Employee |
|-------------|----------|-------|---------|-------|----------|
| Dashboard | โ | โ | โ | โ (ะะพะธ ะบะปะธะตะฝัั) | โ (ะะฐะปะตะฝะดะฐัั) |
| ะะฐะปะตะฝะดะฐัั | โ | โ | โ | โ๏ธ (readonly) | โ (ัะฒะพะน) |
| ะะฐะฟะธัะธ | โ | โ | โ | โ (ะฝัะถะฝะพ ะดะพะฑะฐะฒะธัั?) | โ (ัะฒะพะธ) |
| ะะฐะดะฐัะธ | โ | โ | โ | โ | โ |
| ะงะฐั | โ | โ | โ | โ | โ |
| ะัะพัะธะปั | โ | โ | โ | โ | โ |
| ะะปะธะตะฝัั | โ | โ | โ | โ | โ |
| ะฃัะปัะณะธ | โ | โ | โ | โ | โ |
| ะะพะปัะทะพะฒะฐัะตะปะธ | โ | โ | โ | โ | โ |
| ะะฝะฐะปะธัะธะบะฐ | โ | โ | โ | โ | โ |
| ะะพัะพะฝะบะฐ | โ | โ | โ | โ | โ |
| ะะพัะตัะธัะตะปะธ | โ | โ | โ | โ | โ |
| ะะฐัััะปะบะธ | โ | โ | โ | โ | โ |
| ะัะฑะปะธัะฝัะน ะบะพะฝัะตะฝั | โ | โ | โ | โ | โ |
| ะขะตะปะตัะพะฝะธั | โ | โ | โ | โ (ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั) | โ |
| ะะฝัััะตะฝะฝัั ัะฒัะทั | โ | โ | โ | โ | โ |
| ะะฐัััะพะนะบะธ | โ | โ | โ | โ๏ธ (ะพะณัะฐะฝะธัะตะฝะฝัะต) | โ๏ธ (ัะฒะพะน ะฟัะพัะธะปั) |
| ะะฐัััะพะนะบะธ ะฑะพัะฐ | โ | โ | โ | โ | โ |
| ะะพะณะธ ะฐัะดะธัะฐ | โ | โ | โ | โ | โ |
| ะะพัะทะธะฝะฐ | โ | โ | โ | โ | โ |

## ะงัะพ ะฝัะถะฝะพ ัะดะตะปะฐัั

### ะััะพะบะธะน ะฟัะธะพัะธัะตั:
1. โ ะัะพะฒะตัะธัั, ะฝัะถะฝั ะปะธ ะฟัะพะดะฐะถะฝะธะบั ะฟัะฐะฒะฐ ะฝะฐ ัะพะทะดะฐะฝะธะต ะทะฐะฟะธัะตะน
2. โ ะฃะฑะตะดะธัััั, ััะพ ะบะปะธะตะฝัั ัะบัััั ะพั sales (ัะตะนัะฐั ะฟัะฐะฒะธะปัะฝะพ)
3. โ ะฃะฑะตะดะธัััั, ััะพ ัะธะฝะฐะฝัะพะฒะฐั ะฐะฝะฐะปะธัะธะบะฐ ัะบัััะฐ (ัะตะนัะฐั ะฟัะฐะฒะธะปัะฝะพ)

### ะกัะตะดะฝะธะน ะฟัะธะพัะธัะตั:
4. โ๏ธ ะะตัะธัั, ะฝัะถะตะฝ ะปะธ ะดะพัััะฟ ะบ ะบะฐะปะตะฝะดะฐัั (readonly)
5. โ๏ธ ะะตัะธัั, ะฝัะถะฝะฐ ะปะธ ัะตะปะตัะพะฝะธั

### ะะธะทะบะธะน ะฟัะธะพัะธัะตั:
6. ๐ ะะพะฑะฐะฒะธัั ะฟะตัะตะฒะพะดั ะดะปั ะฒัะตั ะฟัะฝะบัะพะฒ ะผะตะฝั (ัะถะต ะตััั ะฒ ru/layouts/mainlayout.json)
7. ๐ ะะพะบัะผะตะฝัะธัะพะฒะฐัั ะฟัะฐะฒะฐ ะดะปั ะดััะณะธั ัะพะปะตะน
