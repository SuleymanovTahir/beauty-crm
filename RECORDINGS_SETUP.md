# üìº –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

### Backend
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- ‚úÖ API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∞–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Director/Admin –≤–∏–¥—è—Ç –≤—Å—ë, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∏–µ–π –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —á–∞—Ç–æ–º

### Frontend
- ‚úÖ 9 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ó–∞–ø–∏—Å–∏" –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏
- ‚úÖ –ú–µ–Ω—é —Ç—Ä–æ–µ—Ç–æ—á–∏—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —á–∞—Ç–µ
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (39 –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–∞)

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ backend —Å–µ—Ä–≤–µ—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (—É–∂–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `main.py:598`).

```bash
cd backend
python3 main.py
# –∏–ª–∏ —á–µ—Ä–µ–∑ gunicorn
gunicorn main:app
```

–ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—Å—Ç:
- –¢–∞–±–ª–∏—Ü—É `recording_folders` (–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –ø–∞–ø–∫–∏)
- –¢–∞–±–ª–∏—Ü—É `chat_recordings` (–∑–∞–ø–∏—Å–∏ –∏–∑ —á–∞—Ç–∞)
- –û–±–Ω–æ–≤–∏—Ç `call_logs` (–¥–æ–±–∞–≤–∏—Ç folder_id, custom_name, tags, file_size, file_format)
- 3 –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞–ø–∫–∏: "–¢–µ–ª–µ—Ñ–æ–Ω–∏—è", "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç", "–ê—Ä—Ö–∏–≤"

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å frontend

```bash
cd frontend
npm run dev
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. **–¢–µ–ª–µ—Ñ–æ–Ω–∏—è - –≤–∫–ª–∞–¥–∫–∞ "–ó–∞–ø–∏—Å–∏":**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –¢–µ–ª–µ—Ñ–æ–Ω–∏—è ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–ó–∞–ø–∏—Å–∏"
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∞–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏

2. **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç - –º–µ–Ω—é —Ç—Ä–æ–µ—Ç–æ—á–∏—è:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π —á–∞—Ç
   - –í –∑–∞–≥–æ–ª–æ–≤–∫–µ —Å–ø—Ä–∞–≤–∞ –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —Å —Ç—Ä–æ–µ—Ç–æ—á–∏–µ–º
   - –ú–µ–Ω—é —Å–æ–¥–µ—Ä–∂–∏—Ç:
     - üéôÔ∏è –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–∞ (–∞–∫—Ç–∏–≤–Ω–æ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞)
     - üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª
     - üìÅ –ú–æ–∏ –∑–∞–ø–∏—Å–∏

## üìã API Endpoints

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∞–º–∏
- `GET /api/recordings/folders` - –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ –ø–∞–ø–æ–∫
- `POST /api/recordings/folders` - —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
- `PUT /api/recordings/folders/{id}` - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–∞–ø–∫—É
- `DELETE /api/recordings/folders/{id}` - —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏
- `GET /api/recordings` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `PUT /api/recordings/{id}` - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
- `DELETE /api/recordings/{id}` - —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
- `POST /api/recordings/{id}/move` - –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –¥—Ä—É–≥—É—é –ø–∞–ø–∫—É
- `POST /api/recordings/{id}/archive` - –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å

### –ó–∞–ø–∏—Å–∏ –∏–∑ —á–∞—Ç–∞
- `POST /api/internal-chat/start-recording` - –Ω–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–∞
- `POST /api/internal-chat/stop-recording` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
- `POST /api/internal-chat/upload-recording` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª
- `GET /api/internal-chat/recordings` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π —á–∞—Ç–∞

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### Director –∏ Admin
- –í–∏–¥—è—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ª—é–±—ã–º–∏ –ø–∞–ø–∫–∞–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏

### –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏ (employee, master –∏ —Ç.–¥.)
- –í–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Å–≤–æ–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤:
  - **–¢–µ–ª–µ—Ñ–æ–Ω–∏—è**: –≥–¥–µ –æ–Ω–∏ –±—ã–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
  - **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç**: –≥–¥–µ –æ–Ω–∏ sender –ò–õ–ò receiver
- –ú–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –ø–∞–ø–∫–∏
- –ú–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏

## üìù –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ:

### –¢–µ–ª–µ—Ñ–æ–Ω–∏—è
–§–æ—Ä–º–∞—Ç: `{client_name} - {manager_name} - DD.MM.YYYY HH:MM`

–ü—Ä–∏–º–µ—Ä: `–ê–Ω–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞ - –ú–µ–Ω–µ–¥–∂–µ—Ä –ü–µ—Ç—Ä - 11.01.2026 14:30`

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç
–§–æ—Ä–º–∞—Ç: `{sender_name} - {receiver_name} - DD.MM.YYYY HH:MM`

–ü—Ä–∏–º–µ—Ä: `–î–∏—Ä–µ–∫—Ç–æ—Ä –û–ª—å–≥–∞ - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ú–∞—Ä–∏—è - 11.01.2026 15:45`

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ—Å—Ç—É–ø–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –ø–∞–ø–æ–∫ (–ø–∞–ø–∫–∏ –∏ –ø–æ–¥–ø–∞–ø–∫–∏)
- ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫ –∏ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –º–µ–∂–¥—É –ø–∞–ø–∫–∞–º–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–ø–æ–∫ –∏ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ç–µ–≥–∞–º
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –∏–º–µ–Ω–∏, –¥–∞—Ç–µ, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

## üîß TODO (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ WebRTC –∑–≤–æ–Ω–∫–æ–≤
–í [InternalChatWithWebRTC.tsx](frontend/src/components/shared/InternalChatWithWebRTC.tsx:748-759) –µ—Å—Ç—å TODO –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å MediaRecorder –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å audio blob –Ω–∞ backend
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–ú–æ–∏ –∑–∞–ø–∏—Å–∏"
–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MyRecordingsModal.tsx` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø–∏—Å–µ–π –∏–∑ —á–∞—Ç–∞.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend
```
backend/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ recordings.py          # –ù–æ–≤—ã–π API –¥–ª—è –∑–∞–ø–∏—Å–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ telephony.py            # –û–±–Ω–æ–≤–ª–µ–Ω–æ: –∞–≤—Ç–æ-–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ internal_chat.py        # –û–±–Ω–æ–≤–ª–µ–Ω–æ: endpoints –¥–ª—è –∑–∞–ø–∏—Å–∏
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ       ‚îî‚îÄ‚îÄ consolidated/
‚îÇ           ‚îî‚îÄ‚îÄ schema_recording_folders.py  # –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ main.py                     # –û–±–Ω–æ–≤–ª–µ–Ω–æ: —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω run_all_migrations()
```

### Frontend
```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recordings/         # 9 –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecordingsManager.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FolderTree.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecordingsList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateFolderDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RenameFolderDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MoveRecordingDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RenameRecordingDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UploadRecordingDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RecordingFilters.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ InternalChatWithWebRTC.tsx  # –û–±–Ω–æ–≤–ª–µ–Ω–æ: –º–µ–Ω—é —Ç—Ä–æ–µ—Ç–æ—á–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Telephony.tsx   # –û–±–Ω–æ–≤–ª–µ–Ω–æ: –≤–∫–ª–∞–¥–∫–∞ "–ó–∞–ø–∏—Å–∏"
‚îÇ   ‚îî‚îÄ‚îÄ locales/
‚îÇ       ‚îî‚îÄ‚îÄ ru/
‚îÇ           ‚îî‚îÄ‚îÄ admin/
‚îÇ               ‚îî‚îÄ‚îÄ telephony.json  # –î–æ–±–∞–≤–ª–µ–Ω–æ 39 –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–∞
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞**: Duplicate key violation –¥–ª—è username –≤ `test_detailed.py`
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω UUID –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ + –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–§–∞–π–ª**: [tests/test_detailed.py](backend/tests/test_detailed.py:326-329)

## ‚ú® –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend –∏ frontend —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –í—Å–µ –∑–∞–ø–∏—Å–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –ø–∞–ø–∫—É "–¢–µ–ª–µ—Ñ–æ–Ω–∏—è" —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏.
