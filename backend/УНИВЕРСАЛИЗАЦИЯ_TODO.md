# üåç –£–ù–ò–í–ï–†–°–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ - –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

## ‚úÖ –ß–¢–û –£–ñ–ï –°–î–ï–õ–ê–ù–û

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ `salon_settings`
–ú–∏–≥—Ä–∞—Ü–∏—è: `db/migrations/add_universal_settings.py`

**–ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
- `currency_name_ru` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä "–¥–∏—Ä—Ö–∞–º", "—Ä—É–±–ª—å", "–¥–æ–ª–ª–∞—Ä")
- `currency_name_en` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä "dirham", "ruble", "dollar")
- `currency_name_ar` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã –Ω–∞ –∞—Ä–∞–±—Å–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä "ÿØÿ±ŸáŸÖ")
- `location` - —Ä–∞–π–æ–Ω/–ª–æ–∫–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä "JBR", "Downtown", "Marina", "–¶–µ–Ω—Ç—Ä")
- `currency_symbol` - —Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä "AED", "USD", "RUB", "EUR")

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –≥–æ—Ç–æ–≤–∞
–¢–µ–ø–µ—Ä—å –≤—Å–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î.

---

## ‚ùå –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨

### –ö–†–ò–¢–ò–ß–ù–û: bot/prompts.py

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –∏–º–µ–Ω–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 308)

**–°–µ–π—á–∞—Å:**
```python
1. **–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è** - –í–°–ï–ì–î–ê –ø—Ä–µ–¥–ª–∞–≥–∞–π –º–∞—Å—Ç–µ—Ä–æ–≤:
   ‚úÖ "–£ –Ω–∞—Å —Ä–∞–±–æ—Ç–∞—é—Ç: –õ—è–∑–∑–∞—Ç, –ì—É–ª—è, –î–∂–µ–Ω–Ω–∏—Ñ–µ—Ä. –ö –∫–æ–º—É —Ö–æ—Ç–∏—Ç–µ?"
   ‚úÖ "–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞: –°–∏–º–æ, –¢—É—Ä—Å—É–Ω–∞–π. –ö–æ–≥–æ –≤—ã–±–µ—Ä–µ—Ç–µ?"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç:
from db.employees import get_all_employees

# –í –∫–ª–∞—Å—Å–µ PromptBuilder –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:
def _get_employees_list(self) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"""
    employees = get_all_employees(active_only=True)
    if not employees:
        return "–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞"

    # employees[i][2] = full_name (–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã)
    names = [emp[2] for emp in employees]

    if len(names) == 0:
        return "–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞"
    elif len(names) == 1:
        return f"–ù–∞—à –º–∞—Å—Ç–µ—Ä: {names[0]}"
    elif len(names) == 2:
        return f"–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞: {names[0]} –∏ {names[1]}"
    else:
        all_but_last = ", ".join(names[:-1])
        return f"–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞: {all_but_last} –∏ {names[-1]}"

# –í –º–µ—Ç–æ–¥–µ _build_booking_rules() –∑–∞–º–µ–Ω–∏—Ç—å:
employees_list = self._get_employees_list()

return f"""=== üìã BOOKING RULES - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! ===
{booking_msg.replace('{BOOKING_URL}', booking_url)}

üéØ –í–ê–ñ–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:

1. **–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è** - –í–°–ï–ì–î–ê –ø—Ä–µ–¥–ª–∞–≥–∞–π –º–∞—Å—Ç–µ—Ä–æ–≤:
   ‚úÖ "{employees_list}. –ö –∫–æ–º—É —Ö–æ—Ç–∏—Ç–µ?"
   ‚úÖ "–ö–æ–≥–æ –≤—ã–±–µ—Ä–µ—Ç–µ –∏–∑ –Ω–∞—à–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤?"
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã —Ü–µ–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 561, 722)

**–°–µ–π—á–∞—Å:**
```python
# –°—Ç—Ä–æ–∫–∞ 561
–¢—ã: "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ö–æ–Ω–µ—á–Ω–æ –ø–æ–º–æ–≥—É —Å –≤—ã–±–æ—Ä–æ–º. –£ –Ω–∞—Å –µ—Å—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞–Ω–∏–∫—é—Ä (100 AED)..."

# –°—Ç—Ä–æ–∫–∞ 722
–£ –Ω–∞—Å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω—ã–π –º–∞–∫–∏—è–∂ üòä
–ë—Ä–æ–≤–∏ 1100 AED –∏–ª–∏ –≥—É–±—ã 1200 AED?
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
# –£–î–ê–õ–ò–¢–¨ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å —Ü–µ–Ω–∞–º–∏!
# –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞—Ç—å –æ–±—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã:

# –°—Ç—Ä–æ–∫–∞ 561
–¢—ã: "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ö–æ–Ω–µ—á–Ω–æ –ø–æ–º–æ–≥—É —Å –≤—ã–±–æ—Ä–æ–º. –£ –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–∞–Ω–∏–∫—é—Ä–∞..."

# –°—Ç—Ä–æ–∫–∞ 722
–£ –Ω–∞—Å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω—ã–π –º–∞–∫–∏—è–∂ üòä
–ò–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –±—Ä–æ–≤–∏ –∏–ª–∏ –≥—É–±—ã?

# –í–ê–ñ–ù–û: –¶–µ–Ω—ã –±–µ—Ä—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã services!
# –ë–æ—Ç —É–∂–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–∏–º —á–µ—Ä–µ–∑ _build_services_list()
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ –≤–∞–ª—é—Ç–∞ "AED"

**–ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è:**
```python
# –í –º–µ—Ç–æ–¥–∞—Ö –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∞–ª—é—Ç–∞, –ø–æ–ª—É—á–∞—Ç—å –∏–∑ salon_settings:
currency = self.salon.get('currency_symbol', 'AED')
currency_name = self.salon.get('currency_name_ru', '–¥–∏—Ä—Ö–∞–º')

# –ü—Ä–∏–º–µ—Ä:
f"–¶–µ–Ω–∞: {price} {currency}"  # –≤–º–µ—Å—Ç–æ f"–¶–µ–Ω–∞: {price} AED"
```

---

### –í–ê–ñ–ù–û: migrate_bot_settings.py

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∞–ª–æ–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 50)

**–°–µ–π—á–∞—Å:**
```python
"greeting_message": "–ü—Ä–∏–≤–µ—Ç! üòä –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ M.Le Diamant!",
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
"greeting_message": "–ü—Ä–∏–≤–µ—Ç! üòä –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ {SALON_NAME}!",
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ –≤–∞–ª—é—Ç–∞ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö (–º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç)

**–ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:**
```python
# –°—Ç—Ä–æ–∫–∞ 125, 157, 174, 205 –∏ –¥—Ä—É–≥–∏–µ
"130 AED" ‚Üí "{EXAMPLE_PRICE} {CURRENCY}"
"100 AED" ‚Üí "{EXAMPLE_PRICE} {CURRENCY}"

# –í migrate_bot_settings.py –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤:
DEFAULT_SETTINGS = {
    ...
    # –ò—Å–ø–æ–ª—å–∑—É–π placeholder-—ã –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤
    "example_price_low": "100",
    "example_price_medium": "130",
    "example_price_high": "1100",
    ...
}
```

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏—è "JBR" (—Å—Ç—Ä–æ–∫–∏ 181, 208)

**–°–µ–π—á–∞—Å:**
```python
"–¢–æ–ø-1 –ø–æ –æ—Ç–∑—ã–≤–∞–º –≤ JBR"
"JBR –¥–∞–ª–µ–∫–æ"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
"–¢–æ–ø-1 –ø–æ –æ—Ç–∑—ã–≤–∞–º –≤ {LOCATION}"
"{LOCATION} –¥–∞–ª–µ–∫–æ"
```

---

## üìù –ö–ê–ö –≠–¢–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –í –∫–æ–¥–µ –±–æ—Ç–∞ (bot/prompts.py):

```python
# –ü—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ë–î:
def build_prompt(self):
    salon_name = self.salon.get('name', '–ù–∞—à —Å–∞–ª–æ–Ω')
    currency = self.salon.get('currency_symbol', 'AED')
    location = self.salon.get('location', '')

    # –ó–∞–º–µ–Ω—è—Ç—å placeholder-—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
    prompt = self.bot_settings.get('greeting_message', '')
    prompt = prompt.replace('{SALON_NAME}', salon_name)
    prompt = prompt.replace('{CURRENCY}', currency)
    prompt = prompt.replace('{LOCATION}', location)

    return prompt
```

---

## ‚úÖ CHECKLIST –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–°–¢–ò

### –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- [x] `bot/prompts.py` - —É–¥–∞–ª–∏—Ç—å –≤—Å–µ hardcoded: –∏–º–µ–Ω–∞ –º–∞—Å—Ç–µ—Ä–æ–≤, —Ü–µ–Ω—ã, –≤–∞–ª—é—Ç—ã ‚úÖ –ì–û–¢–û–í–û
- [x] `db/migrations/migrate_bot_settings.py` - –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ placeholders ‚úÖ –ì–û–¢–û–í–û
- [ ] `db/migrations/migrate_salon_settings.py` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- [ ] `api/salary.py` - –≤–∞–ª—é—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—Ä–∞—Ç—å—Å—è –∏–∑ –ë–î (—Å—Ç—Ä–æ–∫–∞ "AED")
- [ ] `utils/utils.py` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "M Le Diamant", "AED"

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
2. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∞–ª–æ–Ω–∞ –≤ –ë–î
3. –ò–∑–º–µ–Ω–∏—Ç—å –≤–∞–ª—é—Ç—É –≤ –ë–î
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–∞–ª—é—Ç—É

---

## üéØ –ò–¢–û–ì

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–µ—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π**:
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ª—é–±–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ (—Å–∞–ª–æ–Ω, —Ä–µ—Å—Ç–æ—Ä–∞–Ω, —Å–ø–æ—Ä—Ç–∫–ª—É–±, —Å—Ç—É–¥–∏—è)
- –í—Å–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ë–î (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–∞–ª—é—Ç–∞, –ª–æ–∫–∞—Ü–∏—è, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)
- –ù–∏–∫–∞–∫–∏—Ö hardcoded –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–¥–µ
- –õ–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω–æ–≤—ã–π –±–∏–∑–Ω–µ—Å - –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
