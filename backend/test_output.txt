
================================================================================
  –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï CRM –°–ò–°–¢–ï–ú–´
================================================================================
–î–∞—Ç–∞: 2025-11-28 13:18:48
Python: 3.14.0 (main, Oct  7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.3.19.1)]

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
--------------------------------------------------------------------------------
======================================================================
üîç –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–ö–†–£–ñ–ï–ù–ò–Ø
======================================================================
–°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ENVIRONMENT: –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
üîç Hostname: MacBook-Air-Tahir.local
üîç IP: 127.0.0.1
üîç Is localhost: True
‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: LOCALHOST ‚Üí development
======================================================================
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω: .env.local
‚úÖ Config –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!
   Database: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db
   ‚ÑπÔ∏è  –î–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: from database import get_salon_settings
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–π–¥–µ–Ω–∞: /Users/tahir/Desktop/beauty-crm/backend/salon_bot.db

   –í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü –≤ –ë–î: 32
   –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:
   ‚úÖ clients
   ‚úÖ bookings
   ‚úÖ users
   ‚úÖ positions
   ‚úÖ services
   ‚úÖ conversations
   ‚úÖ user_schedule
   ‚úÖ user_time_off
   ‚úÖ loyalty_levels
   ‚úÖ client_loyalty_points

   ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 2: –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ CRM
--------------------------------------------------------------------------------

   [2.1] Dashboard —Å KPI...
   ‚úÖ Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç
       - –î–æ—Ö–æ–¥: 0 AED
       - –ó–∞–ø–∏—Å–∏: 0

   [2.2] –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤...
2025-11-28 13:18:48 - crm - INFO - [schedule] Working hours set for –¢–µ—Å—Ç –ú–∞—Å—Ç–µ—Ä on day 0: 09:00-18:00
Traceback (most recent call last):
  File "/Users/tahir/Desktop/beauty-crm/backend/tests/test_all.py", line 262, in test_smart_assistant
    assistant = SmartAssistant(client_id=test_client)
  File "/Users/tahir/Desktop/beauty-crm/backend/services/smart_assistant.py", line 19, in __init__
    self.preferences = self._load_preferences()
                       ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/tahir/Desktop/beauty-crm/backend/services/smart_assistant.py", line 27, in _load_preferences
    c.execute("""
    ~~~~~~~~~^^^^
        SELECT preferred_master, preferred_service, preferred_day_of_week,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        WHERE client_id = ?
        ^^^^^^^^^^^^^^^^^^^
    """, (self.client_id,))
    ^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: allergies
   ‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

   [2.3] –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏...
   ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Ä–æ–≤–Ω–µ–π –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏: 0

   [2.4] –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–∫–æ–Ω...
   ‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: 3/4 —É—Å–ø–µ—à–Ω–æ

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 3: SmartAssistant (AI)
--------------------------------------------------------------------------------
   ‚ùå –û–®–ò–ë–ö–ê: no such column: allergies

   üßπ –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...
   ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã (–∫–ª–∏–µ–Ω—Ç: test_user_123)

--------------------------------------------------------------------------------
  –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ API –º–æ–¥—É–ª–µ–π
--------------------------------------------------------------------------------
2025-11-28 13:18:48 - crm - WARNING - [export] ReportLab –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
   ‚úÖ Dashboard API
   ‚úÖ Schedule API
   ‚úÖ Loyalty API
   ‚úÖ AutoBooking API
   ‚úÖ Bookings API
   ‚úÖ Clients API

   –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: 6/6 –º–æ–¥—É–ª–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã

================================================================================
  –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
================================================================================
  1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ‚úÖ –ü–†–û–ô–î–ï–ù
  2. –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: ‚ùå –ü–†–û–í–ê–õ–ï–ù
  3. SmartAssistant: ‚ùå –ü–†–û–í–ê–õ–ï–ù
  4. API –º–æ–¥—É–ª–∏: ‚úÖ –ü–†–û–ô–î–ï–ù

  –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 4
  –ü—Ä–æ–π–¥–µ–Ω–æ: 2
  –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 2

  ‚ö†Ô∏è  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–µ–Ω—ã
  ‚ÑπÔ∏è  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π
================================================================================

