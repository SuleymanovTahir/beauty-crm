# Отчет о проблемах миграции SQLite → PostgreSQL

Всего найдено проблем: 25

## [HIGH] scheduler/birthday_checker.py:291
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `AND DATE(created_at) = %s`

## [HIGH] db/employees.py:397
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(%s) BETWEEN DATE(date_from) AND DATE(date_to)`

## [HIGH] db/employees.py:428
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `AND DATE(b.datetime) = DATE(%s)`

## [HIGH] api/payroll.py:53
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `AND DATE(datetime) BETWEEN DATE(%s) AND DATE(%s)`

## [HIGH] api/reports.py:54
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `query += " AND DATE(b.datetime) >=%s"`

## [HIGH] api/reports.py:58
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `query += " AND DATE(b.datetime) <=%s"`

## [HIGH] api/reports.py:186
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `query += " AND DATE(c.created_at) >=%s"`

## [HIGH] api/reports.py:190
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `query += " AND DATE(c.created_at) <=%s"`

## [HIGH] api/reports.py:298
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(created_at) >=%s AND DATE(created_at) <=%s`

## [HIGH] api/reports.py:306
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(datetime) >=%s AND DATE(datetime) <=%s`

## [HIGH] api/reports.py:316
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(timestamp) >=%s AND DATE(timestamp) <=%s`

## [HIGH] api/reports.py:324
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(created_at) >=%s AND DATE(created_at) <=%s`

## [HIGH] api/reports.py:334
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `WHERE DATE(datetime) >=%s AND DATE(datetime) <=%s`

## [HIGH] bot/prompts.py:1990
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `AND DATE(datetime) = %s`

## [HIGH] services/master_schedule.py:374
- **Проблема**: date() в SQL запросе - может быть SQLite функция
- **Решение**: Использовать DATE() (заглавными) или ::date
- **Код**: `AND DATE(datetime) = %s`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:34
- **Проблема**: INSERT OR REPLACE не поддерживается в PostgreSQL
- **Решение**: Использовать ON CONFLICT DO UPDATE
- **Код**: `'description': 'INSERT OR REPLACE не поддерживается в PostgreSQL',`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:40
- **Проблема**: INSERT OR IGNORE не поддерживается в PostgreSQL
- **Решение**: Использовать ON CONFLICT DO NOTHING
- **Код**: `'description': 'INSERT OR IGNORE не поддерживается в PostgreSQL',`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:46
- **Проблема**: datetime('now') - SQLite функция
- **Решение**: Использовать NOW() или CURRENT_TIMESTAMP
- **Код**: `'description': "datetime('now') - SQLite функция",`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:46
- **Проблема**: datetime('now', '-N seconds/days') - SQLite синтаксис
- **Решение**: Использовать NOW() - INTERVAL 'N seconds'
- **Код**: `'description': "datetime('now') - SQLite функция",`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:52
- **Проблема**: datetime('now') - SQLite функция
- **Решение**: Использовать NOW() или CURRENT_TIMESTAMP
- **Код**: `'description': "datetime('now', '-N seconds/days') - SQLite синтаксис",`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:52
- **Проблема**: datetime('now', '-N seconds/days') - SQLite синтаксис
- **Решение**: Использовать NOW() - INTERVAL 'N seconds'
- **Код**: `'description': "datetime('now', '-N seconds/days') - SQLite синтаксис",`

## [CRITICAL] scripts/maintenance/check_postgres_migration.py:58
- **Проблема**: julianday() - SQLite функция для работы с датами
- **Решение**: Использовать EXTRACT(EPOCH FROM ...) или DATE()
- **Код**: `'description': 'julianday() - SQLite функция для работы с датами',`

## [HIGH] scripts/maintenance/check_postgres_migration.py:67
- **Проблема**: AUTOINCREMENT - SQLite синтаксис
- **Решение**: Использовать SERIAL или BIGSERIAL
- **Код**: `'autoincrement': {`

## [HIGH] scripts/maintenance/check_postgres_migration.py:68
- **Проблема**: AUTOINCREMENT - SQLite синтаксис
- **Решение**: Использовать SERIAL или BIGSERIAL
- **Код**: `'regex': re.compile(r'AUTOINCREMENT', re.IGNORECASE),`

## [HIGH] scripts/maintenance/check_postgres_migration.py:70
- **Проблема**: AUTOINCREMENT - SQLite синтаксис
- **Решение**: Использовать SERIAL или BIGSERIAL
- **Код**: `'description': 'AUTOINCREMENT - SQLite синтаксис',`

