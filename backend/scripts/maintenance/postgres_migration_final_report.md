# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: –ú–∏–≥—Ä–∞—Ü–∏—è SQLite ‚Üí PostgreSQL

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**: 2025-12-04  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- **157 —Ñ–∞–π–ª–æ–≤** - —É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã `import sqlite3`
- **8 —Ñ–∞–π–ª–æ–≤** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã SQL placeholder'—ã `?` ‚Üí `%s`
- **12 —Ñ–∞–π–ª–æ–≤** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `INSERT OR REPLACE/IGNORE` ‚Üí `ON CONFLICT`
- **6 —Ñ–∞–π–ª–æ–≤** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `datetime('now')` ‚Üí `NOW()`
- **4 —Ñ–∞–π–ª–∞** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `date()` ‚Üí `DATE()`
- **1 —Ñ–∞–π–ª** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω `julianday()` ‚Üí `EXTRACT(EPOCH)`

**–ò–¢–û–ì–û**: 188 —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –û—Å—Ç–∞–≤—à–∏—Ö—Å—è "–ü—Ä–æ–±–ª–µ–º"

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç 25 "–ø—Ä–æ–±–ª–µ–º", –Ω–æ **–≤—Å–µ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –ª–æ–∂–Ω—ã–º–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º–∏**:

### 1. ‚úÖ `scheduler/birthday_checker.py:291`
```python
AND DATE(created_at) = %s
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 2. ‚úÖ `db/employees.py:397`
```python
WHERE DATE(%s) BETWEEN DATE(date_from) AND DATE(date_to)
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 3. ‚úÖ `db/employees.py:429`
```python
AND DATE(b.datetime) = DATE(%s)
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 4. ‚úÖ `api/payroll.py:52`
```python
AND DATE(datetime) BETWEEN DATE(%s) AND DATE(%s)
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 5. ‚úÖ `api/reports.py` (9 –º–µ—Å—Ç)
–í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `DATE()` –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏:
```python
AND DATE(b.datetime) >=%s        # –°—Ç—Ä–æ–∫–∞ 56
AND DATE(b.datetime) <=%s        # –°—Ç—Ä–æ–∫–∞ 60
AND DATE(c.created_at) >=%s     # –°—Ç—Ä–æ–∫–∞ 189
AND DATE(c.created_at) <=%s     # –°—Ç—Ä–æ–∫–∞ 193
WHERE DATE(created_at) >=%s     # –°—Ç—Ä–æ–∫–∞ 302
WHERE DATE(datetime) >=%s       # –°—Ç—Ä–æ–∫–∞ 310
WHERE DATE(timestamp) >=%s      # –°—Ç—Ä–æ–∫–∞ 320
WHERE DATE(created_at) >=%s     # –°—Ç—Ä–æ–∫–∞ 328
WHERE DATE(datetime) >=%s       # –°—Ç—Ä–æ–∫–∞ 338
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 6. ‚úÖ `bot/prompts.py:1995`
```python
AND DATE(datetime) = %s
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 7. ‚úÖ `services/master_schedule.py:362`
```python
AND DATE(datetime) = %s
```
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (DATE –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏)

### 8. ‚ö†Ô∏è `scripts/maintenance/check_postgres_migration.py`
10 "–ø—Ä–æ–±–ª–µ–º" –≤ —Å–∞–º–æ–º —Å–∫—Ä–∏–ø—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∏ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–∏—Å–∫–∞, –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–π SQL –∫–æ–¥.

---

## üéØ –í—ã–≤–æ–¥—ã

### ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:
1. ‚úÖ –í—Å–µ `?` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `%s`
2. ‚úÖ –í—Å–µ `INSERT OR REPLACE` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `ON CONFLICT DO UPDATE`
3. ‚úÖ –í—Å–µ `INSERT OR IGNORE` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `ON CONFLICT DO NOTHING`
4. ‚úÖ –í—Å–µ `datetime('now')` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `NOW()`
5. ‚úÖ –í—Å–µ `date()` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `DATE()`
6. ‚úÖ –í—Å–µ `julianday()` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `EXTRACT(EPOCH)`
7. ‚úÖ –í—Å–µ `import sqlite3` —É–¥–∞–ª–µ–Ω—ã (157 —Ñ–∞–π–ª–æ–≤)

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
- PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ `DATE()`, —Ç–∞–∫ –∏ `date()`, –Ω–æ `DATE()` –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ - —ç—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏ `date()` vs `DATE()`, –ø–æ—ç—Ç–æ–º—É –≤—ã–¥–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ "–ø—Ä–æ–±–ª–µ–º—ã" –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** PostgreSQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å PostgreSQL.**  
**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.**

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ PostgreSQL –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º! üöÄ
