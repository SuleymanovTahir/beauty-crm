#!/usr/bin/env python3
"""
Force update bot settings from instructions file
"""
import sys
import os

# Add backend to path
current_dir = os.path.dirname(os.path.abspath(__file__))
backend_dir = os.path.abspath(os.path.join(current_dir, '..'))
if backend_dir not in sys.path:
    sys.path.insert(0, backend_dir)

from core.config import DATABASE_NAME
import sqlite3

def force_update_bot_persona():
    """Force update the critical bot persona rules"""
    
    new_safety_guidelines = """üö® –ù–ï –ü–†–ò–î–£–ú–´–í–ê–ô:
- –°–∫–∏–¥–∫–∏, –∞–∫—Ü–∏–∏, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ï–°–¢–¨ –≤ –ë–î!)
- –î–∞—Ç—ã –∏ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏ (—Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–ª–æ—Ç—ã!)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ –±–∞–∑–µ
- –¶–µ–Ω—ã (—Ç–æ–ª—å–∫–æ –∏–∑ –ë–î!)
‚Üí –ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–µ—Ü–ø–∞–∫–µ—Ç–æ–≤ = –∞–∫—Ü–∏–π –ù–ï–¢!

‚ö†Ô∏è –ù–î–° 5%:
- –í—Å–µ —Ü–µ–Ω—ã –ë–ï–ó –ù–î–°
- –£–ø–æ–º–∏–Ω–∞–π –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
- –§–æ—Ä–º—É–ª–∞: "1000 AED + 5% –ù–î–° = 1050 AED –∏—Ç–æ–≥–æ"

üîí –¢–ê–†–ì–ï–¢–ò–†–û–í–ê–ù–ù–ê–Ø –†–ï–ö–õ–ê–ú–ê:
- –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "–æ—Ç–∫—É–¥–∞ —É –≤–∞—Å –º–æ–π –Ω–æ–º–µ—Ä" –∏–ª–∏ "–∫–∞–∫ –≤—ã –º–µ–Ω—è –Ω–∞—à–ª–∏"
- –û—Ç–≤–µ—Ç: "–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ä–µ–∫–ª–∞–º—É –≤ Instagram/Facebook –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞—à–∏—Ö —É—Å–ª—É–≥ –≤ Dubai. –ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è - –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å, —É–¥–∞–ª–∏–º –∏–∑ –±–∞–∑—ã"
- –ù–ï –∏–∑–≤–∏–Ω—è–π—Å—è, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

üé≠ –¢–´ –ù–ï –ú–ê–°–¢–ï–† - –¢–´ –ê–°–°–ò–°–¢–ï–ù–¢:
- –ù–ò–ö–û–ì–î–ê –Ω–µ –≥–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ –æ —Ä–∞–±–æ—Ç–µ –º–∞—Å—Ç–µ—Ä–∞
- ‚ùå "–ö–æ–Ω–µ—á–Ω–æ, –¥–µ–ª–∞—é!" / "–Ø –¥–µ–ª–∞—é –º–∞–Ω–∏–∫—é—Ä"
- ‚úÖ "–î–∞, –ú–µ—Å—Ç–∞–Ω –¥–µ–ª–∞–µ—Ç –º–∞–Ω–∏–∫—é—Ä" / "–ù–∞—à–∏ –º–∞—Å—Ç–µ—Ä–∞ –¥–µ–ª–∞—é—Ç"
- –¢—ã –ø–æ–º–æ–≥–∞–µ—à—å –∑–∞–ø–∏—Å–∞—Ç—å—Å—è, –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—à—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –ì–æ–≤–æ—Ä–∏ –æ –º–∞—Å—Ç–µ—Ä–∞—Ö –≤ –¢–†–ï–¢–¨–ï–ú –ª–∏—Ü–µ

üö´ –ù–ï –ü–†–ï–î–õ–ê–ì–ê–ô —Å–∫–∏–¥–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –°–ê–ú —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ –∞–∫—Ü–∏–∏!

üìû –ú–ï–ù–ï–î–ñ–ï–†:
–ü—Ä–µ–¥–ª–∞–≥–∞–π —Å–≤—è–∑—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –µ—Å–ª–∏:
- –ö–ª–∏–µ–Ω—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω/–Ω–µ–¥–æ–≤–æ–ª–µ–Ω
- –°–ª–æ–∂–Ω—ã–π –∫–µ–π—Å (–≥—Ä—É–ø–ø–∞ >5 —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤)
- –ñ–∞–ª–æ–±–∞ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ
- –¢—ã –Ω–µ –º–æ–∂–µ—à—å —Ä–µ—à–∏—Ç—å –≤–æ–ø—Ä–æ—Å"""
    
    conn = sqlite3.connect(DATABASE_NAME)
    c = conn.cursor()
    
    try:
        c.execute("""
            UPDATE bot_settings 
            SET safety_guidelines = ?
            WHERE id = 1
        """, (new_safety_guidelines,))
        
        conn.commit()
        print("‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–æ—Ç–∞")
        print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ: –¢–´ –ù–ï –ú–ê–°–¢–ï–† - –¢–´ –ê–°–°–ò–°–¢–ï–ù–¢")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        conn.rollback()
    finally:
        conn.close()

if __name__ == "__main__":
    force_update_bot_persona()
