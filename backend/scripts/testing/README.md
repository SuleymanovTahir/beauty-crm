# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
scripts/testing/
‚îú‚îÄ‚îÄ startup_tests.py        # ‚≠ê –¢–µ—Å—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–ë–ï–ó HTTP)
‚îú‚îÄ‚îÄ api/                    # –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã API —Å HTTP –∑–∞–ø—Ä–æ—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_notifications_api.py     # –¢–µ—Å—Ç API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ test_save_notifications.py    # –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îî‚îÄ‚îÄ test_reminders_api.py         # –¢–µ—Å—Ç API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∑–∞–ø–∏—Å—è—Ö
‚îú‚îÄ‚îÄ database/               # –¢–µ—Å—Ç—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ fix_notification_settings_table.py  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –î–≤–∞ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤

### 1. Startup —Ç–µ—Å—Ç—ã (–ë–ï–ó HTTP)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `startup_tests.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ **–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞**.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –ë–î
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç API —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é
- ‚ùå –ù–ï –¥–µ–ª–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã (—Å–µ—Ä–≤–µ—Ä –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω)

### 2. Runtime —Ç–µ—Å—Ç—ã (–° HTTP)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç—ã –∏–∑ `api/` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ **—Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –ë–î
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç API —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –î–µ–ª–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. Startup —Ç–µ—Å—Ç—ã (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ main.py)

**–ú–µ—Ç–æ–¥ 1: –í—Å–µ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É**
```python
# –í main.py —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
from scripts.testing.startup_tests import run_all_startup_tests
log_info("üß™ –ó–∞–ø—É—Å–∫ startup —Ç–µ—Å—Ç–æ–≤...", "startup")
run_all_startup_tests()
```

**–ú–µ—Ç–æ–¥ 2: –í—ã–±–æ—Ä–æ—á–Ω–æ**
```python
# –í main.py —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
from scripts.testing.startup_tests import startup_test_notifications, startup_test_reminders_api
startup_test_notifications()
startup_test_reminders_api()
```

**–ú–µ—Ç–æ–¥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é**
```bash
cd /path/to/backend
python3 scripts/testing/startup_tests.py
```

### 2. Runtime —Ç–µ—Å—Ç—ã (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)

**–°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
python3 -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

**–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
```bash
cd /path/to/backend

# –¢–µ—Å—Ç API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
python3 scripts/testing/api/test_notifications_api.py

# –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
python3 scripts/testing/api/test_save_notifications.py

# –¢–µ—Å—Ç API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –∑–∞–ø–∏—Å—è—Ö
python3 scripts/testing/api/test_reminders_api.py
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

```bash
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü—ã notification_settings
python3 scripts/testing/database/fix_notification_settings_table.py
```

## –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### test_notifications_api.py
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç GET /api/notifications/settings
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4/4 —Ç–µ—Å—Ç–∞ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏

### test_save_notifications.py
- ‚úÖ GET –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ POST –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Å—Ç–∞—Ç—É—Å—ã 200 OK

### test_reminders_api.py
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É booking_reminder_settings
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API
- ‚úÖ –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4/4 —Ç–µ—Å—Ç–∞ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –û—à–∏–±–∫–∞: "no such table: notification_settings"
```bash
python3 scripts/testing/database/fix_notification_settings_table.py
```

### –û—à–∏–±–∫–∞: "Connection refused"
Backend —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python3 -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### –û—à–∏–±–∫–∞: "500 Internal Server Error"
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
```bash
python3 scripts/testing/api/test_notifications_api.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
python3 scripts/testing/api/test_notifications_api.py
python3 scripts/testing/api/test_reminders_api.py

# –ï—Å–ª–∏ –≤—Å–µ ‚úÖ PASS - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä
python3 -m uvicorn main:app --reload
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î
```bash
# –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã
python3 scripts/testing/api/test_notifications_api.py
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
python3 scripts/testing/api/test_save_notifications.py
```

## –í—ã–≤–æ–¥ —Ç–µ—Å—Ç–æ–≤

–í—Å–µ —Ç–µ—Å—Ç—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- ‚úÖ PASS - —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
- ‚ùå FAIL - —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω
- ‚ö†Ô∏è  WARNING - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:
```
======================================================================
–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
‚úÖ PASS - –ë–î —Ç–∞–±–ª–∏—Ü—ã
‚úÖ PASS - –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API —Ñ—É–Ω–∫—Ü–∏–∏
‚úÖ PASS - Booking reminders —ç–Ω–¥–ø–æ–∏–Ω—Ç
‚úÖ PASS - HTTP –∑–∞–ø—Ä–æ—Å

–ü—Ä–æ–π–¥–µ–Ω–æ: 4/4
```
