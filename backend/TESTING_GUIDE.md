# Beauty CRM - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Beauty CRM –≤–∫–ª—é—á–∞–µ—Ç unit-—Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ç–µ—Å—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—Å–µ —Ç–µ—Å—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ –ø–∞–ø–∫–µ `tests/` –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd backend/tests
python3 run_all_tests.py
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í `main.py` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏:

```python
from tests.startup.startup_tests import run_all_startup_tests
log_info("üß™ –ó–∞–ø—É—Å–∫ startup —Ç–µ—Å—Ç–æ–≤...", "startup")
run_all_startup_tests()
```

–¢–µ—Å—Ç—ã –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ run_all_tests.py            # –ú–∞—Å—Ç–µ—Ä-—Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ conftest.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ comprehensive_test.py       # –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
‚îÇ
‚îú‚îÄ‚îÄ api/                        # –¢–µ—Å—Ç—ã API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ test_reminders_api.py
‚îÇ   ‚îú‚îÄ‚îÄ test_notifications_api.py
‚îÇ   ‚îú‚îÄ‚îÄ test_booking_email_notification.py
‚îÇ   ‚îî‚îÄ‚îÄ test_save_notifications.py
‚îÇ
‚îú‚îÄ‚îÄ bot/                        # –¢–µ—Å—Ç—ã AI –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ (—Ç–µ—Å—Ç—ã –±–æ—Ç–∞)
‚îÇ
‚îú‚îÄ‚îÄ database/                   # –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ test_database.py
‚îÇ   ‚îî‚îÄ‚îÄ fix_notification_settings_table.py
‚îÇ
‚îú‚îÄ‚îÄ employees/                  # –¢–µ—Å—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_employees_positions.py
‚îÇ   ‚îî‚îÄ‚îÄ check_employees.py
‚îÇ
‚îú‚îÄ‚îÄ features/                   # –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_30_features.py
‚îÇ
‚îú‚îÄ‚îÄ services/                   # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ check_services.py
‚îÇ
‚îú‚îÄ‚îÄ startup/                    # –¢–µ—Å—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
‚îÇ   ‚îî‚îÄ‚îÄ startup_tests.py
‚îÇ
‚îî‚îÄ‚îÄ users/                      # –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îî‚îÄ‚îÄ check_users.py
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### üìÑ `run_all_tests.py` - –ú–∞—Å—Ç–µ—Ä-—Ñ–∞–π–ª

–ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
1. –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
2. –¢–µ—Å—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
3. –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
4. –¢–µ—Å—Ç—ã API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
5. –¢–µ—Å—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 run_all_tests.py
```

**–í—ã—Ö–æ–¥:**
- Exit code 0 - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
- Exit code 1 - –µ—Å—Ç—å –æ—à–∏–±–∫–∏

---

### üìÑ `test_database.py` - –¢–µ—Å—Ç—ã –ë–î

**–§—É–Ω–∫—Ü–∏–∏:**
- `test_database_connection()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `test_tables_exist()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- `test_table_schemas()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º —Ç–∞–±–ª–∏—Ü
- `test_data_integrity()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- `run_all_database_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –ë–î

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SQLite
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ö–µ–º —Ç–∞–±–ª–∏—Ü
- –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–≤—è–∑–µ–π (foreign keys)

**–ü—Ä–∏–º–µ—Ä:**
```python
from tests.test_database import run_all_database_tests
result = run_all_database_tests()
```

---

### üìÑ `test_employees_positions.py` - –¢–µ—Å—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–§—É–Ω–∫—Ü–∏–∏:**
- `test_employees_table()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã employees
- `test_positions_table()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã positions
- `test_employee_positions_link()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ employees ‚Üî positions
- `test_employee_services()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª—É–≥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `run_all_employee_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü employees –∏ positions
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã (–ø–æ–ª—è, —Ç–∏–ø—ã)
- –°–≤—è–∑—å position_id ‚Üí positions.id
- –°–≤—è–∑—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —É—Å–ª—É–≥–∞–º–∏
- –ü–µ—Ä–µ–≤–æ–¥—ã –∏–º–µ–Ω (name_en, name_ar)

**–ü—Ä–∏–º–µ—Ä:**
```python
from tests.test_employees_positions import run_all_employee_tests
result = run_all_employee_tests()
```

---

### üìÑ `test_30_features.py` - –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- `test_client_management()` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- `test_booking_system()` - –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–µ–π
- `test_messenger_integration()` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤
- `test_notifications()` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `test_templates()` - –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `test_automation()` - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- `test_analytics()` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `run_all_feature_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
30 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã:
1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
3. –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
6. ... (–≤—Å–µ–≥–æ 30 —Ñ—É–Ω–∫—Ü–∏–π)

**–ü—Ä–∏–º–µ—Ä:**
```python
from tests.test_30_features import run_all_feature_tests
result = run_all_feature_tests()
```

---

### üìÑ `api/test_reminders_api.py` - –¢–µ—Å—Ç—ã API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏:**
- `test_booking_reminder_settings_table()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
- `test_reminders_api_direct()` - –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API —Ñ—É–Ω–∫—Ü–∏–π
- `test_reminders_http()` - HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API
- `test_toggle_reminder()` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `run_all_reminder_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã booking_reminder_settings
- –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —á–µ—Ä–µ–∑ API
- HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (/api/booking-reminder-settings)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ is_enabled

**–ü—Ä–∏–º–µ—Ä:**
```bash
cd backend
python3 tests/api/test_reminders_api.py
```

**–í—ã–≤–æ–¥:**
```
======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô –û –ó–ê–ü–ò–°–Ø–•
======================================================================

‚úÖ PASS - –¢–∞–±–ª–∏—Ü–∞ booking_reminder_settings
‚úÖ PASS - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (API)
‚úÖ PASS - HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚úÖ PASS - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–ü—Ä–æ–π–¥–µ–Ω–æ: 4/4
```

---

### üìÑ `api/test_notifications_api.py` - –¢–µ—Å—Ç—ã API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏:**
- `test_notification_settings_table()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
- `test_get_notification_settings()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `test_update_notification_settings()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `test_notification_types()` - –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `run_all_notification_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –¢–∞–±–ª–∏—Ü–∞ notification_settings
- GET /api/notification-settings
- PUT /api/notification-settings
- –¢–∏–ø—ã: email, telegram, push, sms
- –¢—Ä–∏–≥–≥–µ—Ä—ã: new_booking, booking_reminder, birthday

**–ü—Ä–∏–º–µ—Ä:**
```bash
cd backend
python3 tests/api/test_notifications_api.py
```

---

### üìÑ `startup/startup_tests.py` - –¢–µ—Å—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

–ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `main.py`).

**–§—É–Ω–∫—Ü–∏–∏:**
- `startup_test_database()` - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
- `startup_test_tables()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
- `startup_test_bot_settings()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞
- `startup_test_notifications()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `startup_test_reminders_api()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `run_all_startup_tests()` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö startup —Ç–µ—Å—Ç–æ–≤

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –¥–æ—Å—Ç—É–ø–µ–Ω

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.py:**
```python
from tests.startup.startup_tests import run_all_startup_tests
run_all_startup_tests()
```

---

### üìÑ `comprehensive_test.py` - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞.

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
1. –ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, —Ç–∞–±–ª–∏—Ü—ã, —Å—Ö–µ–º—ã)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (bot_settings, salon_settings)
3. –ö–ª–∏–µ–Ω—Ç—ã (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
4. –ó–∞–ø–∏—Å–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
5. –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã (Instagram, Telegram, WhatsApp)
6. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
8. –ê–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –æ—Ç—á–µ—Ç—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from tests.comprehensive_test import run_comprehensive_test
run_comprehensive_test()
```

---

## –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### `check_bot.py` / `check_bot2.py`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è AI –±–æ—Ç–∞.

### `check_employees.py`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

### `check_migrations.py`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π.

### `check_services.py`
–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª—É–≥ —Å–∞–ª–æ–Ω–∞.

### `check_users.py`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π CRM —Å–∏—Å—Ç–µ–º—ã.

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É

```bash
cd backend/tests
python3 run_all_tests.py
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è

```bash
# –¢–æ–ª—å–∫–æ –ë–î
python3 test_database.py

# –¢–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
python3 test_employees_positions.py

# –¢–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏
python3 test_30_features.py

# –¢–æ–ª—å–∫–æ API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
python3 api/test_reminders_api.py

# –¢–æ–ª—å–∫–æ API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
python3 api/test_notifications_api.py
```

### Startup —Ç–µ—Å—Ç—ã

```bash
cd backend
python3 -c "from tests.startup.startup_tests import run_all_startup_tests; run_all_startup_tests()"
```

### –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd backend
python3 -c "from tests.comprehensive_test import run_comprehensive_test; run_comprehensive_test()"
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å main.py

### –¢–µ—Å—Ç—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (startup tests)

–í —Ñ–∞–π–ª–µ `main.py` —Å—Ç—Ä–æ–∫–∏ 367-369:

```python
from tests.startup.startup_tests import run_all_startup_tests
log_info("üß™ –ó–∞–ø—É—Å–∫ startup —Ç–µ—Å—Ç–æ–≤...", "startup")
run_all_startup_tests()
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –í development –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- –î–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

**–ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –í production (–∑–∞–º–µ–¥–ª—è–µ—Ç —Å—Ç–∞—Ä—Ç)
- –ï—Å–ª–∏ –ë–î –æ—á–µ–Ω—å –±–æ–ª—å—à–∞—è

### –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã

–í —Ñ–∞–π–ª–µ `main.py` —Å—Ç—Ä–æ–∫–∏ 361-363 (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã):

```python
# from tests.run_all_tests import run_all_tests
# log_info("üß™ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤...", "startup")
# run_all_tests()
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ production

---

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –®–∞–±–ª–æ–Ω —Ç–µ—Å—Ç–∞

```python
#!/usr/bin/env python3
"""
–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
"""
import sys
import os
import sqlite3

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ backend –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from core.config import DATABASE_NAME

def test_my_feature():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ—é —Ñ—É–Ω–∫—Ü–∏—é"""
    print("=" * 70)
    print("–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ú–û–Ø –§–£–ù–ö–¶–ò–Ø")
    print("=" * 70)

    try:
        conn = sqlite3.connect(DATABASE_NAME)
        c = conn.cursor()

        # –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–µ—Å—Ç
        c.execute("SELECT COUNT(*) FROM my_table")
        count = c.fetchone()[0]

        if count > 0:
            print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: –Ω–∞–π–¥–µ–Ω–æ {count} –∑–∞–ø–∏—Å–µ–π")
            conn.close()
            return True
        else:
            print("‚ùå –û—à–∏–±–∫–∞: —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞")
            conn.close()
            return False

    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    result = test_my_feature()
    sys.exit(0 if result else 1)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ run_all_tests.py

```python
# –í run_all_tests.py –¥–æ–±–∞–≤—å—Ç–µ:

# 6. –¢–µ—Å—Ç—ã –º–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
print("\nüîß 6. –¢–µ—Å—Ç—ã –º–æ–µ–π —Ñ—É–Ω–∫—Ü–∏–∏...")
try:
    from tests.test_my_feature import test_my_feature
    result = test_my_feature()
    results.append(("–ú–æ—è —Ñ—É–Ω–∫—Ü–∏—è", result))
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
    results.append(("–ú–æ—è —Ñ—É–Ω–∫—Ü–∏—è", False))
```

---

## Pytest –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### conftest.py

–§–∞–π–ª `conftest.py` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è pytest:

```python
import pytest
import sqlite3
from core.config import DATABASE_NAME

@pytest.fixture
def db_connection():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"""
    conn = sqlite3.connect(DATABASE_NAME)
    yield conn
    conn.close()

@pytest.fixture
def test_client():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞"""
    # –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    pass
```

### –ó–∞–ø—É—Å–∫ pytest

```bash
cd backend
pytest tests/ -v
```

---

## CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### GitHub Actions –ø—Ä–∏–º–µ—Ä

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: |
          cd backend
          pip install -r requirements.txt
      - name: Run tests
        run: |
          cd backend/tests
          python3 run_all_tests.py
```

---

## Troubleshooting

### "ModuleNotFoundError"
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:
```python
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
```

### "Database is locked"
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤.

### "Table does not exist"
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏:
```bash
cd backend/db/migrations
python3 run_all_migrations.py
```

### "Import error"
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ `__init__.py` —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ø–∞–ø–∫–∞—Ö.

---

## Best Practices

### 1. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```bash
python3 tests/run_all_tests.py && git commit
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ startup —Ç–µ—Å—Ç—ã –≤ development
–í `main.py` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ startup —Ç–µ—Å—Ç—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### 3. –ü–∏—à–∏—Ç–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

### 4. –ò–∑–æ–ª–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–µ—Å—Ç–æ–≤—É—é –ë–î:
```python
conn.execute("BEGIN TRANSACTION")
# ... —Ç–µ—Å—Ç—ã ...
conn.rollback()  # –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

### 5. –õ–æ–≥–∏—Ä—É–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏
```python
print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {details}")
print(f"‚ùå –û—à–∏–±–∫–∞: {error_message}")
print(f"‚ÑπÔ∏è  –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: {info}")
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `run_all_tests.py` –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
======================================================================
–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
‚úÖ PASS - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚úÖ PASS - –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
‚úÖ PASS - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚úÖ PASS - API –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚úÖ PASS - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–æ–π–¥–µ–Ω–æ: 5/5
======================================================================
```

---

## –°–º. —Ç–∞–∫–∂–µ

- **PROJECT_STRUCTURE.md** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **MIGRATIONS_GUIDE.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º
- `conftest.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
- `main.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-11-16*
