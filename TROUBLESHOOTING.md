# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º Beauty CRM

## üö® API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç–∞–π–º–∞—É—Ç—è—Ç—Å—è (>10s)

### –°–∏–º–ø—Ç–æ–º—ã:
```
–¢–ï–°–¢ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   ‚ùå –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç: TIMEOUT (>10s)
   ‚ùå Health check: TIMEOUT (>10s)
```

### –ü—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

#### 1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—Å–µ–≥–¥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–∑-–∑–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
python main.py

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥
sleep 10

# –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python diagnostic_full.py
```

#### 2. –°–µ—Ä–≤–µ—Ä –∑–∞–≤–∏—Å–∞–µ—Ç –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω, –Ω–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f backend/logs/app.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep python

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CPU
top
# –∏–ª–∏
htop
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
Ctrl+C

# 2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
ps aux | grep python
kill -9 <PID>  # –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
python main.py
```

#### 3. –ú–µ–¥–ª–µ–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```bash
tail -f backend/logs/app.log | grep "üì§"
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ EXPLAIN –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

#### 4. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ò—â–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ async —Ñ—É–Ω–∫—Ü–∏—è—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `asyncio.to_thread()` –¥–ª—è –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –∫–æ–¥–∞

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API:

```bash
cd backend
python quick_api_test.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞.

---

## ü§ñ SmartAssistant –æ—à–∏–±–∫–∞

### –°–∏–º–ø—Ç–æ–º—ã:
```
‚ùå SmartAssistant.__init__() missing 1 required positional argument: 'client_id'
```

### –†–µ—à–µ–Ω–∏–µ:

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
assistant = SmartAssistant()
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
assistant = SmartAssistant(client_id="test_client_123")
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:**
- `backend/tests/test_all.py:231`

---

## üö™ –†–µ–¥–∏—Ä–µ–∫—Ç /admin –Ω–∞ /

### –°–∏–º–ø—Ç–æ–º—ã:
- –ó–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ `http://localhost:5173/admin`
- –ü–µ—Ä–µ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞ `http://localhost:5173/`
- –î–∏—Ä–µ–∫—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É

### –ü—Ä–∏—á–∏–Ω–∞:
ProtectedRoute —Ç—Ä–µ–±–æ–≤–∞–ª —Ä–æ–ª—å "admin", –∞ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ —Ä–æ–ª—å "director"

### –†–µ—à–µ–Ω–∏–µ:
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤** `frontend/src/App.tsx:97-111`

–¢–µ–ø–µ—Ä—å –¥–∏—Ä–µ–∫—Ç–æ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ admin –ø–∞–Ω–µ–ª–∏.

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä (login: admin, password: admin123)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/admin`
3. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∞–¥–º–∏–Ω–∫–∞

---

## üìß Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –°–∏–º–ø—Ç–æ–º—ã:
```
‚ö†Ô∏è SMTP credentials not configured
```

### –†–µ—à–µ–Ω–∏–µ:

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.local`:**
```bash
cat backend/.env.local | grep SMTP
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```env
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=your-email@gmail.com
```

**2. –î–ª—è Gmail —Å–æ–∑–¥–∞–π—Ç–µ App Password:**
1. –í–∫–ª—é—á–∏—Ç–µ 2FA: https://myaccount.google.com/security
2. –°–æ–∑–¥–∞–π—Ç–µ App Password: https://myaccount.google.com/apppasswords
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ `SMTP_PASSWORD`

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É:**
```bash
cd backend
python test_notifications_full.py
```

---

## üì± Instagram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

### –°–∏–º–ø—Ç–æ–º—ã:
```
‚ùå Instagram API error: Invalid OAuth access token
```

### –†–µ—à–µ–Ω–∏–µ:

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω:**
```bash
cat backend/.env.local | grep PAGE_ACCESS_TOKEN
```

**2. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Facebook Developers Console
2. Apps ‚Üí –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Messenger
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π Page Access Token
4. –û–±–Ω–æ–≤–∏—Ç–µ –≤ `.env.local`

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Instagram ID:**
```bash
cd backend
python test_notifications_full.py
```

---

## üîå –ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç

### –°–∏–º–ø—Ç–æ–º—ã:
```
ERROR: Address already in use
```

### –†–µ—à–µ–Ω–∏–µ:

**–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:**
```bash
lsof -i :8000
```

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:**
```bash
kill -9 <PID>
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç:**
```python
# main.py
uvicorn.run(app, host="0.0.0.0", port=8001)
```

---

## üåê Frontend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

### –°–∏–º–ø—Ç–æ–º—ã:
```
‚ùå Frontend (Vite) (:5173): –ù–µ –¥–æ—Å—Ç—É–ø–µ–Ω
```

### –†–µ—à–µ–Ω–∏–µ:

**1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
cd frontend
npm install
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:**
```bash
npm run dev
```

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç:**
```bash
lsof -i :5173
```

---

## üîç –û–±—â–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
cd backend
python diagnostic_full.py
```

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
cd backend
python quick_api_test.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```bash
cd backend
python test_notifications_full.py
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f backend/logs/app.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -100 backend/logs/app.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" backend/logs/app.log
```

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—ë:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
Ctrl+C

# –£–±–µ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python
killall python

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
cd backend
python main.py
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
top
# –∏–ª–∏
htop

# –î–∏—Å–∫
df -h
```

3. **–°–æ–∑–¥–∞–π—Ç–µ issue:** https://github.com/SuleymanovTahir/beauty-crm/issues

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-16
