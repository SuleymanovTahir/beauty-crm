## [2026-02-14] Hotfix: Status Translation + BookingDetail Service i18n + Unsubscribed Date Filter + CRM Landing Assets Dedup
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–∫–∞–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å–µ–ª–µ–∫—Ç–µ –±–µ–∑ —Å—ã—Ä–æ–≥–æ `pending_confirmation` fallback:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/components/shared/StatusSelect.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/components/shared/StatusSelect.tsx`
  - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π —Å—Ç–∞—Ç—É—Å–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π `common:status_*` –ø–µ—Ä–µ–≤–æ–¥.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–≤–æ–¥ —É—Å–ª—É–≥–∏ –≤ –¥–µ—Ç–∞–ª–∫–µ –∑–∞–ø–∏—Å–∏ `/crm/bookings/:id`:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/pages/admin/BookingDetail.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/pages/admin/BookingDetail.tsx`
  - —Ä–µ–∑–æ–ª–≤–µ—Ä: `dynamic:services.<service_key|id>.name` -> `admin/services:<normalized_name>` -> canonical DB name.
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–ø–∏—Å–∞–≤—à–∏—Ö—Å—è –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç –∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –æ—Ç–ø–∏—Å–∫–∏:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/pages/admin/Broadcasts.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/pages/admin/Broadcasts.tsx`
- –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ landing-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ CRM:
  - —É–¥–∞–ª–µ–Ω–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `crm/frontend/src/site/public_landing/styles/img/*`;
  - `crm/frontend/public/landing-images` —Ç–µ–ø–µ—Ä—å symlink –Ω–∞ `site/frontend/src/site/public_landing/styles/img`;
  - –æ–±–Ω–æ–≤–ª–µ–Ω—ã fallback-–ø—É—Ç–∏ –≤ `crm/backend/main.py` –∏ `crm/backend/utils/utils.py`.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `npm --prefix crm/frontend run build` passed.
  - `npm --prefix site/frontend run build` passed.
  - `python3 -m py_compile crm/backend/main.py crm/backend/utils/utils.py` passed.

## [2026-02-14] Hotfix: CRM Admin Redirect Removal + Booking Services Translation + Changelog Guard
- –£–±—Ä–∞–Ω –º–µ–∂–∫–æ–Ω—Ç—É—Ä–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –∏–∑ CRM –≤ Site Admin:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/App.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/App.tsx`
  - —É–¥–∞–ª–µ–Ω—ã CRM-–º–∞—Ä—à—Ä—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∏ `/crm/public-content/*` –∏ `/crm/visitor-analytics` –≤ `/admin/*`.
- –î–æ—á–∏—â–µ–Ω–æ CRM-–º–µ–Ω—é, —á—Ç–æ–±—ã –Ω–µ –ø–æ–¥–º–µ—à–∏–≤–∞—Ç—å Site Admin –ø—É–Ω–∫—Ç—ã –≤ CRM fallback-–Ω–∞–≤–∏–≥–∞—Ü–∏—é:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/components/layouts/UniversalLayout.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/components/layouts/UniversalLayout.tsx`
  - –∏–∑ CRM-–∫–∞—Ç–∞–ª–æ–≥–∞ —É–±—Ä–∞–Ω—ã `public-content` –∏ `visitor-analytics`.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–π —É—Å–ª—É–≥ –≤ —Ñ–æ—Ä–º–µ –∑–∞–ø–∏—Å–∏ (–æ–±—Ä–∞—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞):
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/site/public_landing/components/BookingSection.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/site/public_landing/components/BookingSection.tsx`
  - –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–π resolver `service_key -> id -> canonical name` —á–µ—Ä–µ–∑ `dynamic` namespace.
- –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π guard –ª–∏–º–∏—Ç–∞ `CHANGELOG.txt` (<= 500 —Å—Ç—Ä–æ–∫) –≤ boundary checks:
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/scripts/diagnostics/verify_backend.py`
  - `/Users/tahir/Desktop/beauty-crm/site/backend/scripts/diagnostics/verify_backend.py`
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `npm --prefix crm/frontend run type-check` passed.
  - `npm --prefix site/frontend run type-check` passed.
  - `python3 crm/backend/scripts/diagnostics/verify_backend.py --boundaries` passed.
  - `python3 site/backend/scripts/diagnostics/verify_backend.py --boundaries` passed.

## [2026-02-14] Hotfix: WS Routing + Public Slots + Landing Console Noise
- WebSocket routing fixed for split deploy in frontend API client:
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/api/client.ts`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/api/client.ts`
  - `buildWebSocketUrl()` no longer applies CRM runtime rewrite to `/crm/api/*`; WS endpoints now stay on `/api/ws/*` and `/api/webrtc/*` (with legacy `/api/crm/*` normalization only), matching production nginx WebSocket termination.
- Public booking availability restored on Site runtime:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/product_groups/site/router_mount.py`
  - mounted `api.schedule` under `/api`, which re-enables:
    - `GET /api/public/available-slots`
    - `GET /api/public/available-slots/batch`
  - This removes `404` in landing booking flow for slots lookup.
- Removed noisy success image logs from landing components (both split frontends):
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/site/public_landing/components/Hero.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/site/public_landing/components/Gallery.tsx`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/site/public_landing/components/Portfolio.tsx`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/site/public_landing/components/Hero.tsx`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/site/public_landing/components/Gallery.tsx`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/site/public_landing/components/Portfolio.tsx`
  - `onLoad console.log(...)` removed; `onError` logs kept.

## [2026-02-14] Admin Runtime Routing + Real Recent Activity
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è API –≤ split frontend –¥–ª—è CRM/Admin runtime-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/api/client.ts`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/api/client.ts`
  - `resolveApiEndpoint()` —Ç–µ–ø–µ—Ä—å –≤ –ø—É—Ç—è—Ö `/crm|/admin|/manager|/sales|/saler|/marketer|/employee` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç CRM-–∑–∞–ø—Ä–æ—Å—ã –≤ `/crm/api/*` (–≤–º–µ—Å—Ç–æ `/api/*`), —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç `404` –Ω–∞ endpoints –≤—Ä–æ–¥–µ:
    - `/api/unread-count`, `/api/messengers/enabled`, `/api/notifications`, `/api/menu-settings`, `/api/dashboard/kpi`, `/api/bot-analytics`.
  - Site runtime API (`/api/public*`, `/api/public-admin*`, `/api/client*`, `/api/cookies*`, `/api/analytics/visitors*`) –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ site backend.
- –£–¥–∞–ª–µ–Ω —Ñ–µ–π–∫–æ–≤—ã–π —Ö–∞—Ä–¥–∫–æ–¥ –±–ª–æ–∫–∞ ‚Äú–ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å‚Äù –Ω–∞ `/admin/dashboard`:
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/site/pages/adminPanel/Dashboard.tsx`
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/site/pages/adminPanel/Dashboard.tsx`
  - –ë–ª–æ–∫ —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä–æ–∏—Ç—Å—è –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö `/api/notifications?unread_only=false&limit=3` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî `common:no_items`.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `npm --prefix site/frontend run type-check` passed,
  - `npm --prefix crm/frontend run type-check` passed,
  - production dist –¥–ª—è `site/frontend` –∏ `crm/frontend` –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## [2026-02-14] Hotfix: `/crm` Redirect Loop and Missing Hero Banner (`banner2.webp`)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ª–æ–∂–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç `https://mlediamant.com/crm -> /admin/dashboard` –≤ split-deploy:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/src/crm/services/api.ts`
  - `/Users/tahir/Desktop/beauty-crm/site/frontend/src/crm/services/api.ts`
  - `getPlatformGates()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `runtime-profile` —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback, –µ—Å–ª–∏ –≤ `platform-gates` –Ω–µ—Ç —è–≤–Ω—ã—Ö boolean-—Ñ–ª–∞–≥–æ–≤.
  - –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ `/api/runtime-profile` –æ—Ç Site runtime –æ—à–∏–±–æ—á–Ω–æ –≤—ã–∫–ª—é—á–∞–ª CRM suite –≤–æ —Ñ—Ä–æ–Ω—Ç–µ CRM.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω 404 –ø–æ hero banner (`/landing-images/banners/banner2.webp`):
  - `/Users/tahir/Desktop/beauty-crm/site/backend/utils/utils.py`
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/utils/utils.py`
  - –î–æ–±–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ legacy –ø—É—Ç–∏: `banner2.webp -> banner.webp`.
  - –û–±–Ω–æ–≤–ª–µ–Ω –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ landing-assets –ø–æ–¥ –Ω–æ–≤—É—é split-—Å—Ç—Ä—É–∫—Ç—É—Ä—É `frontend/src/site/...` –∏ `frontend/src/crm/...`.
- –£—Å–∏–ª–µ–Ω backend-–æ—Ç–≤–µ—Ç –±–∞–Ω–Ω–µ—Ä–æ–≤, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥–∏–ª —á–µ—Ä–µ–∑ –ø—É—Ç—å-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/site_api/public.py`
  - `/Users/tahir/Desktop/beauty-crm/site/backend/api/public.py`
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/api/public.py`
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/crm_api/public.py`
  - –í `get_public_banners()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `map_image_path(sanitize_url(...))`.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–∑–¥–∞—á–∞ CRM frontend-–∞—Å—Å–µ—Ç–æ–≤ –ø–æ–¥ `/crm/*`:
  - `/Users/tahir/Desktop/beauty-crm/crm/frontend/vite.config.ts`
  - –í production build –¥–æ–±–∞–≤–ª–µ–Ω `base=/crm/` (—á–µ—Ä–µ–∑ `APP_BASE_PATH`, default `/crm/`), —á—Ç–æ–±—ã `index.html` —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ `/crm/js/*` –∏ `/crm/assets/*`, –∞ –Ω–µ –Ω–∞ root `/js/*`.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `python3 -m py_compile` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö backend-—Ñ–∞–π–ª–æ–≤ passed.
  - `npm --prefix crm/frontend run type-check` passed.
  - `npm --prefix site/frontend run type-check` passed.

## [2026-02-14] Stage 4: Legacy API Contours Disabled in Split Backends
- –§–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã legacy API –∫–æ–Ω—Ç—É—Ä—ã –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞:
  - `site/backend/crm_api` -> `site/backend/_disabled_crm_api`
  - `crm/backend/site_api` -> `crm/backend/_disabled_site_api`
- Boundary-check policy –æ–±–Ω–æ–≤–ª–µ–Ω–∞, —á—Ç–æ–±—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç legacy –∫–æ–Ω—Ç—É—Ä–æ–≤:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/scripts/diagnostics/verify_backend.py`
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/scripts/diagnostics/verify_backend.py`
  - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–¥–∞—é—Ç, –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
    - `product_groups/site` –∏–ª–∏ `site_api` –≤ CRM backend,
    - `product_groups/crm` –∏–ª–∏ `crm_api` –≤ Site backend.
- –†–µ–∑—É–ª—å—Ç–∞—Ç:
  - —Ä–∏—Å–∫ —Å–ª—É—á–∞–π–Ω–æ–≥–æ runtime-–∏–º–ø–æ—Ä—Ç–∞ –≤—Ç–æ—Ä–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞ —Å–Ω–∏–∂–µ–Ω –¥–æ `_disabled_*` –∞—Ä—Ö–∏–≤–Ω–æ–≥–æ —Å–ª–æ—è,
  - –∞–∫—Ç–∏–≤–Ω—ã–π runtime –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ü–µ–ª–µ–≤—ã—Ö –∫–æ–Ω—Ç—É—Ä–∞—Ö (`crm_api` –¥–ª—è CRM runtime –∏ `site_api` –¥–ª—è Site runtime).
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `python3 -m py_compile` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ passed,
  - `verify_backend.py --boundaries` passed –¥–ª—è `crm/backend` –∏ `site/backend`,
  - `npm --prefix crm/frontend run check:boundaries` passed,
  - `npm --prefix site/frontend run check:boundaries` passed,
  - runtime smoke –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –Ω–∞–ª–∏—á–∏–µ —Ä–∞–±–æ—á–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:
    - site: `/api/public/integration-status`, `/api/public/services`, `/api/public/employees`, `/api/public/bookings`,
    - crm: `/api/integration/v1/health|services|employees|bookings`.

## [2026-02-14] Stage 3.1: Integration Availability Contract for Site Runtime
- –†–∞—Å—à–∏—Ä–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä Site‚ÜîCRM –¥–ª—è —è–≤–Ω–æ–≥–æ fallback-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/services/crm_integration.py`
  - –¥–æ–±–∞–≤–ª–µ–Ω–æ:
    - `CRM_INTEGRATION_STRICT` (strict mode),
    - health-check –∫ CRM integration API,
    - –µ–¥–∏–Ω—ã–π `get_integration_status()` (enabled/configured/strict_mode/healthy/mode/last_error),
    - –ª–æ–∫–∞–ª—å–Ω—ã–π mode –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π/–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- –ü—É–±–ª–∏—á–Ω—ã–π Site API –ø–æ–ª—É—á–∏–ª endpoint —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/site_api/public.py`
  - `GET /api/public/integration-status`
  - `initial-load` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç `integration` –±–ª–æ–∫ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –∞–¥–∞–ø—Ç–µ—Ä–∞.
- Booking fallback behavior —É—Ç–æ—á–Ω–µ–Ω:
  - –ø—Ä–∏ `CRM_INTEGRATION_STRICT=true` –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
    - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `503` + `integration_unavailable` + —Ç–µ–∫—É—â–∏–π integration status.
  - –ø—Ä–∏ `CRM_INTEGRATION_STRICT=false` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º—è–≥–∫–∏–π fallback –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π Site booking flow.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `python3 -m py_compile` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö backend-—Ñ–∞–π–ª–æ–≤ passed,
  - boundary checks (`verify_backend.py --boundaries`) passed –¥–ª—è `crm/backend` –∏ `site/backend`,
  - `npm --prefix crm/frontend run check:boundaries` passed,
  - `npm --prefix site/frontend run check:boundaries` passed,
  - runtime smoke confirmed:
    - site: `/api/public/integration-status` route mounted,
    - crm: `/api/integration/v1/*` routes mounted.

## [2026-02-14] Stage 3: Optional Integration Adapter (Site ‚Üî CRM) with Token/Timeout/Cache/Fallback
- –î–æ–±–∞–≤–ª–µ–Ω —è–≤–Ω—ã–π versioned –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π API –≤ CRM:
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/crm_api/integration.py`
  - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ root router: `/Users/tahir/Desktop/beauty-crm/crm/backend/crm_api/__init__.py`
  - endpoints:
    - `GET /api/integration/v1/health`
    - `GET /api/integration/v1/services`
    - `GET /api/integration/v1/employees`
    - `POST /api/integration/v1/bookings`
  - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
    - —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `X-Integration-Token`,
    - –≤–∞–ª–∏–¥–∞—Ü–∏—è `secrets.compare_digest`,
    - feature flag `CRM_INTEGRATION_ENABLED`,
    - —Å–µ–∫—Ä–µ—Ç `CRM_INTEGRATION_TOKEN`.
- –î–æ–±–∞–≤–ª–µ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π CRM adapter-–∫–ª–∏–µ–Ω—Ç –≤ Site runtime:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/services/crm_integration.py`
  - –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
    - `CRM_INTEGRATION_ENABLED` –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é,
    - `CRM_INTEGRATION_BASE_URL` –∑–∞–¥–∞–µ—Ç CRM backend URL,
    - `CRM_INTEGRATION_TOKEN` –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏,
    - `CRM_INTEGRATION_TIMEOUT_SECONDS` –¥–ª—è —Ç–∞–π–º–∞—É—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤,
    - `CRM_INTEGRATION_CACHE_TTL_SECONDS` –¥–ª—è in-memory TTL cache.
  - graceful fallback:
    - –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏/–æ—à–∏–±–∫–∞—Ö CRM site –Ω–µ –ø–∞–¥–∞–µ—Ç –∏ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ.
- –í—Å—Ç—Ä–æ–µ–Ω adapter –≤ –ø—É–±–ª–∏—á–Ω—ã–µ site endpoints:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/site_api/public.py`
  - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫:
    - `employees`,
    - `services`,
    - `bookings` (—Å fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π booking flow –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CRM).
- –£—Å–∏–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –Ω–æ–≤—ã—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤:
  - `/Users/tahir/Desktop/beauty-crm/site/backend/scripts/diagnostics/verify_backend.py`
  - `/Users/tahir/Desktop/beauty-crm/crm/backend/scripts/diagnostics/verify_backend.py`
  - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ü–µ–ª–µ–≤—ã–µ runtime-—Ñ–∞–π–ª—ã:
    - `crm_api/integration.py`,
    - `services/crm_integration.py`.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `python3 -m py_compile` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö backend-—Ñ–∞–π–ª–æ–≤ passed,
  - `venv/bin/python scripts/diagnostics/verify_backend.py --boundaries` passed –¥–ª—è `crm/backend` –∏ `site/backend`,
  - `npm --prefix crm/frontend run check:boundaries` passed,
  - `npm --prefix site/frontend run check:boundaries` passed,
  - runtime –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞ –Ω–∞–ª–∏—á–∏–µ:
    - `/api/integration/v1/health`,
    - `/api/integration/v1/services`,
    - `/api/integration/v1/employees`,
    - `/api/integration/v1/bookings`.

## [2026-02-14] Stage 2: Backend Contour Cleanup and Runtime Boundary Hardening
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ backend-–∫–æ–Ω—Ç—É—Ä–æ–≤ –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö patch-—Ñ–∞–π–ª–æ–≤:
  - –≤ `site/backend` runtime-–∫–æ–¥ –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `crm_api` –≤ –∫–ª—é—á–µ–≤—ã—Ö runtime-–º–æ–¥—É–ª—è—Ö:
    - `integrations/telegram_bot.py`
    - `notifications/admin_notifications.py`
    - `services/universal_messenger.py`
    - `services/feedback_service.py`
  - `integrations/telegram_bot.py`:
    - WS-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ `api.chat_ws` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º fallback (best-effort),
    - —É–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `bot`-runtime; –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç —Ç–µ–ø–µ—Ä—å –±–µ—Ä–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ `bot_settings.telegram_auto_reply_message`,
    - –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–∞ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø–∞–¥–∞–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è.
- –í—Ç–æ—Ä–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –≤ product-groups –æ—Ç–∫–ª—é—á–µ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏:
  - `crm/backend/product_groups/site` -> `crm/backend/product_groups/_disabled_site`
  - `site/backend/product_groups/crm` -> `site/backend/product_groups/_disabled_crm`
- –£—Å–∏–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ boundary checks (–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º SSOT-—Å–∫—Ä–∏–ø—Ç–µ):
  - `crm/backend/scripts/diagnostics/verify_backend.py`
  - `site/backend/scripts/diagnostics/verify_backend.py`
  - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:
    - –∑–∞–ø—Ä–µ—Ç runtime-–∏–º–ø–æ—Ä—Ç–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞ –≤ —Ü–µ–ª–µ–≤—ã—Ö runtime-—Ñ–∞–π–ª–∞—Ö,
    - –∑–∞–ø—Ä–µ—Ç –Ω–∞–ª–∏—á–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö opposite contour –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`product_groups/site` –≤ CRM –∏ `product_groups/crm` –≤ Site),
    - —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∑–∞–ø—Ä–µ—Ç legacy namespace-–º–∞—Ä–∫–µ—Ä–æ–≤ –≤ `main.py`.
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `python3 -m py_compile` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö backend-—Ñ–∞–π–ª–æ–≤ passed,
  - `venv/bin/python scripts/diagnostics/verify_backend.py --boundaries` passed –¥–ª—è `crm/backend` –∏ `site/backend`,
  - `npm --prefix crm/frontend run check:boundaries` passed,
  - `npm --prefix site/frontend run check:boundaries` passed.

## [2026-02-14] Stage 1: Runtime Independence Contract Enforced (CRM vs Site)
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≥—Ä–∞–Ω–∏—Ü –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SSOT):
  - CRM –≤–ª–∞–¥–µ–µ—Ç: CRM API/runtime, CRM scheduler/bot lifecycle, CRM business-–º–æ–¥—É–ª–∏.
  - Site –≤–ª–∞–¥–µ–µ—Ç: public/account/admin runtime –∏ –ø—É–±–ª–∏—á–Ω—ã–º–∏ API/—Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏.
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —è–≤–Ω—ã–π API/webhook-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, –±–µ–∑ —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ `main.py` runtime.
- –í—ã–ø–æ–ª–Ω–µ–Ω hard split –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
  - `crm/backend/main.py` –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ CRM-only runtime:
    - —É–±—Ä–∞–Ω—ã `create_site_app`, dual runtime `both`, namespace rewrite `/api/crm` –∏ `/api/site`,
    - –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ shared + CRM router mounts –∏ CRM lifecycle (services/schedulers).
  - `site/backend/main.py` –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ Site-only runtime:
    - —É–±—Ä–∞–Ω—ã `create_crm_app`, dual runtime `both`, namespace rewrite `/api/crm` –∏ `/api/site`,
    - –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ shared + site/account/public router mounts –∏ site lifecycle.
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—Ü (–±–µ–∑ –Ω–æ–≤—ã—Ö –º–µ–ª–∫–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤):
  - `crm/backend/scripts/diagnostics/verify_backend.py --boundaries`
  - `site/backend/scripts/diagnostics/verify_backend.py --boundaries`
  - `crm/frontend/package.json`: `check:boundaries`, `check:boundary:backend`, `check:boundary:frontend`
  - `site/frontend/package.json`: `check:boundaries`, `check:boundary:backend`, `check:boundary:frontend`
- –ü—Ä–æ–≤–µ—Ä–∫–∏:
  - `python3 -m py_compile crm/backend/main.py site/backend/main.py` passed.
  - `npm --prefix crm/frontend run check:boundaries` passed.
  - `npm --prefix site/frontend run check:boundaries` passed.

## [2026-02-14] Finalized Split Layout: Removed Legacy Root `backend/` and `frontend/`
- Completed physical split cleanup:
  - removed legacy root directories `/backend` and `/frontend`,
  - active project roots are now only:
    - `crm/backend`, `crm/frontend`,
    - `site/backend`, `site/frontend`.
- Post-cleanup validation:
  - `python3 -m py_compile crm/backend/main.py site/backend/main.py` passed,
  - `python3 -m py_compile` passed for updated root utility scripts and import-maintenance scripts,
  - runtime sanity import still resolves:
    - CRM app group = `crm`,
    - Site app group = `site`.
  - type-check passed for both frontends:
    - `npm --prefix crm/frontend run type-check`,
    - `npm --prefix site/frontend run type-check`.
- Updated i18n workflow docs for new structure:
  - `scripts/i18n/README.md` now uses `crm/frontend` (and notes `site/frontend` equivalence) instead of removed root `frontend`.
- Updated deploy/service docs under split projects to new project-root paths:
  - `crm/backend/bot/DEPLOY_GUIDE.md`, `site/backend/bot/DEPLOY_GUIDE.md`,
  - `crm/backend/services/README_SCHEDULER.md`, `site/backend/services/README_SCHEDULER.md`,
  - `crm/backend/services/README_PACKAGE_SCHEDULER.md`, `site/backend/services/README_PACKAGE_SCHEDULER.md`,
  - `crm/backend/bot/# üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è Beauty CRM.ini`,
  - `site/backend/bot/# üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è Beauty CRM.ini`.
- Updated root utility scripts to project-aware path resolution (`FRONTEND_GROUP=crm|site`, default `crm`):
  - `scripts/i18n/check_russian_locales.py`,
  - `scripts/i18n/sync_locales.py`,
  - `scripts/maintenance/fix_header_translations.py`,
  - `scripts/maintenance/fix_services_tag.py`,
  - `scripts/maintenance/add_path_comments.py`,
  - `scripts/maintenance/update_trimmer_ui.py`.
- Updated gallery import maintenance scripts in both split backends to backend-relative static path:
  - `crm/backend/scripts/maintenance/import_all_images.py`,
  - `site/backend/scripts/maintenance/import_all_images.py`.

## [2026-02-14] Physical Split Into Two Project Roots (`crm/` and `site/`)
- Added two top-level independent project folders inside `beauty-crm`:
  - `crm/backend`, `crm/frontend`
  - `site/backend`, `site/frontend`
- Both project folders now contain their own backend/frontend file trees (copied from current working baseline), so they can evolve independently.
- Unified frontend dependency storage to a single shared `node_modules`:
  - moved shared dependency root to `/beauty-crm/node_modules`,
  - `frontend/node_modules -> ../node_modules` (compatibility symlink),
  - `crm/frontend/node_modules -> ../../node_modules` (symlink),
  - `site/frontend/node_modules -> ../../node_modules` (symlink),
  - this avoids duplicate `node_modules` folders for split projects.
- Unified Python dependency storage to a single shared virtual environment:
  - moved shared venv root to `/beauty-crm/venv`,
  - `backend/venv -> ../venv` (compatibility symlink),
  - `crm/backend/venv -> ../../venv`,
  - `site/backend/venv -> ../../venv`.
- Backend runtime defaults are now project-specific via `.env`:
  - `crm/backend/.env`: `BACKEND_PRODUCT_GROUP=crm`
  - `site/backend/.env`: `BACKEND_PRODUCT_GROUP=site`
- Port split for fully parallel local run:
  - `crm/backend/.env`: `PORT=8001`
  - `site/backend/.env`: `PORT=8002`
  - `crm/frontend/.env`: `BACKEND_PORT=8001`, `FRONTEND_PORT=5173`
  - `site/frontend/.env`: `BACKEND_PORT=8002`, `FRONTEND_PORT=5174`
  - `crm/frontend/vite.config.ts` and `site/frontend/vite.config.ts` now support `FRONTEND_PORT` env override.
- Frontend package identity split:
  - `crm/frontend/package.json`: `name=beauty_crm_crm`
  - `site/frontend/package.json`: `name=beauty_crm_site`
  - lockfiles aligned with the same names.
- Removed hardcoded absolute project paths in split project utility scripts (both `crm` and `site` copies):
  - `backend/scripts/import_employee_photos.py` now resolves source directory from project-relative candidates or `EMPLOYEE_PHOTO_SOURCE_DIR`.
  - `backend/scripts/maintenance/find_dict_row_issues.py` now resolves target files via `Path(__file__)` relative backend root.
  - `frontend/convert_frontend_images.py` now resolves target directory project-relatively and supports `IMAGE_CONVERT_TARGET_DIR`.
- Validation:
  - `python3 -m py_compile crm/backend/main.py site/backend/main.py` passed.
  - runtime sanity import confirmed:
    - `crm/backend` app resolves `backend_product_group=crm`,
    - `site/backend` app resolves `backend_product_group=site`.
  - `npm --prefix crm/frontend run type-check` passed.
  - `npm --prefix site/frontend run type-check` passed.

## [2026-02-14] Backend Lifecycle Split: CRM vs Site/Admin/Account
- Extended backend folder split from router level to runtime lifecycle level:
  - added `backend/product_groups/crm/runtime_bootstrap.py`,
  - added `backend/product_groups/site/runtime_bootstrap.py`.
- Added explicit route-contract files by product group:
  - `backend/product_groups/crm/route_contract.py` (CRM module matrix + CRM runtime/websocket prefixes),
  - `backend/product_groups/site/route_contract.py` (site-only API and non-API paths).
- `backend/main.py` now consumes these contracts from product-group modules instead of inlined mixed constants.
- CRM lifecycle orchestration moved out of `backend/main.py` into CRM group module:
  - bot bootstrap (`get_bot`, module status),
  - scheduler bootstrap (birthday/checkers/reminders/weekly-report/backup/trash cleanup).
- `backend/main.py` now calls product-group lifecycle hooks instead of importing CRM runtime modules directly.
- Result:
  - CRM runtime dependencies are physically isolated under `product_groups/crm`,
  - Site/Admin/Account has its own dedicated runtime module entrypoint under `product_groups/site`,
  - split architecture now covers both router mounting and startup orchestration.
- Fixed feature-gate false positive for site routes:
  - `_resolve_crm_module_by_path()` now ignores:
    - site-only API prefixes (`/api/public*`, `/api/client*`, `/api/public-admin*`),
    - site-only exact paths (e.g. `/api/register/client`),
    - strict namespace-exempt integration/public paths (`/api/webhook*`, `/api/cookies*`, etc.).
  - This prevents `api_namespace_route_mismatch` / `crm_backend_unavailable` on valid site endpoints in split runtime modes.
- Validation:
  - `python3 -m py_compile backend/main.py backend/product_groups/crm/runtime_bootstrap.py backend/product_groups/site/runtime_bootstrap.py` passed.
  - factory sanity check from `backend/`: `create_crm_app()` and `create_site_app()` both instantiate successfully.

## [2026-02-14] Backend Folder Split: CRM vs Site/Admin/Account Orchestrators
- Added backend product-group folder structure for routing orchestration:
  - `backend/product_groups/shared/`
  - `backend/product_groups/crm/`
  - `backend/product_groups/site/`
- Added physically separate Site/Admin/Account API folder:
  - `backend/site_api/`
  - duplicated dedicated site-side modules:
    - `public_admin.py`
    - `client_auth.py`
    - `sitemap.py`
    - `seo_metadata.py`
    - `public.py`
  - `product_groups/site/router_mount.py` switched to import routers from `site_api/*` (not from shared `api/*`).
- Added physically separate CRM API folder:
  - `backend/crm_api/` (duplicated API files from `backend/api/` for full file-level isolation).
  - Internal imports in `crm_api/*` switched from `api.*` to `crm_api.*`.
  - `product_groups/crm/router_mount.py` switched to import routers from `crm_api/*` only.
- Added physically separate shared API folder:
  - `backend/shared_api/`
  - `shared_api/proxy.py` duplicated from `api/proxy.py`.
  - `product_groups/shared/router_mount.py` switched to `shared_api.proxy`.
- Added `site_api/settings.py` and switched runtime fallback in `main.py`:
  - `from site_api.settings import get_public_referral_link_profile`.
- Resulting state:
  - `main.py` router orchestration no longer imports routers from `backend/api/*` directly.
  - Product router mounts are file-isolated by folder (`crm_api`, `site_api`, `shared_api`).
  - Runtime/service imports outside legacy folders switched away from `api.*` to `crm_api.*` where needed:
    - `services/*`, `bot/*`, `scheduler/*`, `notifications/*`, `webhooks/*`, `integrations/*`.
  - Test/support imports aligned to `crm_api.*` (`tests/*`, `scripts/testing/*`) for consistency with new package boundaries.
- Introduced dedicated router mount functions:
  - `mount_shared_routers(app)` in `backend/product_groups/shared/router_mount.py`
  - `mount_crm_routers(app)` in `backend/product_groups/crm/router_mount.py`
  - `mount_site_account_public_routers(app)` in `backend/product_groups/site/router_mount.py`
- Refactored `backend/main.py` to use product-group router orchestrators instead of inline mixed router registration block.
- Result:
  - router wiring for CRM and Site/Admin/Account is now physically split by backend folders/files,
  - runtime switch (`crm/site/both`) still works via existing feature-gate/runtime logic.
- Static landing assets mount updated in backend for new frontend structure:
  - primary path: `frontend/src/site/public_landing/styles/img`
  - legacy fallback: `frontend/public_landing/styles/img`
  - this keeps `/landing-images/*` stable during/after split.
- Validation:
  - `python3 -m py_compile main.py product_groups/shared/router_mount.py product_groups/crm/router_mount.py product_groups/site/router_mount.py` passed.

## [2026-02-14] Landing Assets Fix + Admin Route Reassignment
- Fixed public landing static assets after folder split:
  - Updated `frontend/public/landing-images` symlink target from removed legacy path to active path:
    - `../src/site/public_landing/styles/img`.
  - Restored runtime availability for landing assets used by hero/portfolio/gallery (`/landing-images/*`).
- Reassigned admin-oriented pages from `/crm/*` to `/admin/*`:
  - `visitor-analytics` added to admin route group in `frontend/src/App.tsx` (`/admin/visitor-analytics`).
  - Legacy CRM route now redirects:
    - `/crm/visitor-analytics` -> `/admin/visitor-analytics`.
  - `public-content` remains in admin group and legacy CRM route now redirects with tab preservation:
    - `/crm/public-content/:tab?` -> `/admin/public-content/:tab?`.
- Navigation alignment:
  - Updated `frontend/src/crm/components/layouts/UniversalLayout.tsx`:
    - CRM menu items `public-content` and `visitor-analytics` now point to `/admin/*` when current prefix is `/crm`.
    - Added `public-content` and `visitor-analytics` entries into admin menu catalog.
- Validation:
  - `npm run type-check` passed.

## [2026-02-14] Frontend Split Hardening: Removed Root Symlink Compatibility Layer
- Completed transition from temporary root symlink compatibility to explicit product-group imports.
- `frontend/src`:
  - Removed all root-level symlinked module folders (`api`, `components`, `config`, `contexts`, `guidelines`, `hooks`, `lib`, `locales`, `pages`, `services`, `styles`, `tests`, `utils`).
  - Removed remaining `src/crm/pages` compatibility symlinks (`auth`, `public`, `adminPanel`) after rewriting dependent imports to explicit `@site/pages/*`.
  - Replaced `src/crm/i18n.ts` symlink with a real re-export module (`export { default, languages } from '../i18n'`).
  - Kept root as orchestrator entrypoint only (`App.tsx`, `main.tsx`, `i18n.ts`, global styles/types).
- Import cleanup:
  - Rewrote remaining `@/*` imports in `src/crm` and `src/site/public_landing` to explicit aliases:
    - CRM modules via `@crm/*`,
    - site-specific UI imports via `@site/public_landing/*`.
  - Updated root orchestrators to avoid removed root folders:
    - `frontend/src/main.tsx` now imports `AuthProvider` and API interceptor from `@crm/*`.
    - `frontend/src/i18n.ts` now imports language metadata from `@crm/utils/i18nUtils` and loads locale files from `./crm/locales/**/*.json`.
  - Fixed moved-path dependency in `frontend/src/crm/components/layouts/PublicLayout.tsx`:
    - `useSalonInfo` now imported from `@site/public_landing/hooks/useSalonInfo`.
- Public landing entrypoint cleanup:
  - `frontend/public_landing.html` now references `src/site/public_landing` directly:
    - script entry `/src/site/public_landing/main.tsx`,
    - preload image `/src/site/public_landing/styles/img/logo.webp`.
  - Removed no-longer-needed compatibility symlink `frontend/public_landing`.
- Config updates:
  - `frontend/tsconfig.json` include list cleaned (removed legacy `public_landing` include).
  - `frontend/vite.config.ts` locale chunk matcher updated to moved locale path (`/src/crm/locales/`).
- Validation:
  - `npm run type-check` passed after symlink removal and import rewrite.

## [2026-02-13] Frontend Physical Split: CRM vs Site Folder Groups
- `frontend/src`:
  - Added product folders:
    - `src/crm` for CRM codebase,
    - `src/site` for site/account/admin grouping.
  - Physically moved CRM source tree under `src/crm`:
    - `api`, `components`, `config`, `contexts`, `guidelines`, `hooks`, `lib`, `locales`, `pages`, `services`, `styles`, `tests`, `utils`.
  - Site-facing page groups were moved out of CRM pages into `src/site/pages`:
    - `auth`, `public`, `adminPanel`.
  - Physically moved `frontend/public_landing` into `src/site/public_landing`.
  - Added compatibility symlink `frontend/public_landing -> src/site/public_landing` to keep existing `public_landing.html` entry path working during transition.
  - Added compatibility symlinks so existing imports and routes continue working without mass rewrite:
    - root `src/*` links to `src/crm/*` for moved modules,
    - `src/crm/pages/{auth,public,adminPanel}` link to `src/site/pages/*`,
    - `src/crm/i18n.ts` links to root `src/i18n.ts` for existing CRM relative imports.
  - Restored orchestrator-level files in root `src` as real files (`App.tsx`, `main.tsx`, `i18n.ts`, `index.css`, `vite-env.d.ts`, `Attributions.md`, `package.json`) to keep stable entrypoint/import behavior.
  - Routing orchestrator `frontend/src/App.tsx` now imports modules explicitly by product group:
    - CRM modules via `@crm/*`,
    - Site/account/admin modules via `@site/*`.
  - Updated `src/site/pages/*` imports to use `@crm/*` dependencies instead of old broken `../../...` relative paths after relocation.
  - Updated `src/site/public_landing/*` imports from relative `../../src/*` paths to `@/*` alias for location-independent resolution.
- `frontend/tsconfig.json`:
  - Added path aliases:
    - `@crm/* -> ./src/crm/*`,
    - `@site/* -> ./src/site/*`.
  - Updated exclusions to keep test files out after move:
    - added `src/crm/tests`.
- `frontend/vite.config.ts`:
  - Added Vite aliases:
    - `@crm -> ./src/crm`,
    - `@site -> ./src/site`.
- Validation:
  - `npm run type-check` passed after structure split.

## [2026-02-13] Frontend API Namespace Routing (Site vs CRM)
- `frontend/src/api/client.ts`:
  - Added centralized endpoint resolver for split API namespaces:
    - site/account routes are mapped to `/api/site/*`,
    - CRM routes are mapped to `/api/crm/*`,
    - shared auth/bootstrap endpoints stay on `/api/*`.
  - Added reusable helpers:
    - `resolveApiEndpoint(endpoint)`,
    - `buildApiUrl(endpoint, baseUrl)`.
    - `buildWebSocketUrl(endpoint, baseUrl)`.
  - Added global `fetch` interceptor (`installApiNamespaceFetchInterceptor`) that rewrites same-backend `/api/*` calls through the same resolver, so direct `fetch('/api/...')` in pages/components also follows namespace split without duplicating logic.
  - Updated `apiCall` and direct login/upload requests to use the shared resolver.
- `frontend/src/main.tsx`:
  - Enabled API namespace fetch interceptor at app bootstrap.
- `frontend/src/services/api.ts`:
  - Integrated the same resolver into base request pipeline so all `this.request('/api/...')` calls are auto-routed to the proper namespace.
  - Updated direct `fetch(...)` paths (telephony upload, roles, register, exports/imports, gallery upload, generic upload, ringtone upload) to use the namespace-aware URL builder.
  - Request timing logs now print resolved endpoint path (including `/api/site/*` or `/api/crm/*`) for easier split-runtime diagnostics.
- `frontend/src/services/galleryApi.ts`, `frontend/src/services/visitorApi.ts`, `frontend/src/services/webrtc.ts`:
  - Removed remaining direct `/api/*` fetch bypasses in service layer and switched them to `buildApiUrl(...)`.
  - Visitor analytics export and WebRTC DND/call-log requests now follow the same namespace routing contract as the rest of CRM API calls.
- Additional UI/API cleanup for split safety:
  - Converted remaining direct page/component API fetches to namespace-aware URLs in:
    - `frontend/src/pages/adminPanel/LoyaltyManagement.tsx`,
    - `frontend/src/pages/adminPanel/PhotoGallery.tsx`,
    - `frontend/src/pages/adminPanel/NotificationsDashboard.tsx`,
    - `frontend/src/pages/shared/Referrals.tsx`,
    - `frontend/src/pages/shared/Services.tsx`,
