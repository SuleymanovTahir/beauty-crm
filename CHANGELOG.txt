# CHANGELOG - –ü–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ Beauty CRM

## 2026-01-03: –£–ª—É—á—à–µ–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ú–µ—Ç—Ä–∏–∫

### –ü–†–û–ë–õ–ï–ú–ê
1. **Low Flexibility**: –ü–ª–∞–Ω—ã –∏–º–µ–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (–º–µ—Å—è—Ü, –∫–≤–∞—Ä—Ç–∞–ª) –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–ª–∏ –∑–∞–¥–∞–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞—Ç—ã.
2. **Hardcoded Metrics**: –°–ø–∏—Å–æ–∫ –º–µ—Ç—Ä–∏–∫ (–¥–æ—Ö–æ–¥, –∑–∞–ø–∏—Å–∏) –±—ã–ª –∑–∞—à–∏—Ç –≤ –∫–æ–¥–µ, –Ω–µ–ª—å–∑—è –±—ã–ª–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–¥–∞–∂–∏ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤).
3. **UI/UX Issues**: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –ø–µ—Ä–∏–æ–¥–æ–≤ ("–õ—É–Ω–∞" –≤–º–µ—Å—Ç–æ "–ú–µ—Å—è—Ü"), –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –ø–ª–∞–Ω–∞–º, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –Ω–∞ –æ–¥–Ω—É —Ä–æ–ª—å.
4. **Data Relevance**: –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥–ª–∏ –±—ã—Ç—å –Ω—É–ª–µ–≤—ã–º–∏, —á—Ç–æ –Ω–µ –∏–º–µ–ª–æ —Å–º—ã—Å–ª–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

### –†–ï–®–ï–ù–ò–ï
1. **Dynamic Plans**:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `comment` –∏ `category` –≤ —Ç–∞–±–ª–∏—Ü—É `plans`.
    - –í–Ω–µ–¥—Ä–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞—Ç (`start_date`, `end_date`) –≤ –æ–±—Ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–∏–æ–¥—É.
    - –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: "2 –Ω–µ–¥–µ–ª–∏".
2. **Metrics Management System**:
    - –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `plan_metrics` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–∞–º–∏ KPI.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Full CRUD API –¥–ª—è –º–µ—Ç—Ä–∏–∫.
    - –î–æ–±–∞–≤–ª–µ–Ω Admin UI: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–∫–ª—é—á, –Ω–∞–∑–≤–∞–Ω–∏–µ RU/EN, –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–∏–µ).
    - –ü—Ä–µ-–ø–æ–ø—É–ª—è—Ü–∏—è –±–∞–∑–æ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (revenue, bookings, new_clients, average_check, sales).
3. **Advanced Plan Creation**:
    - –ù–æ–≤—ã–π UI —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π.
    - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–ª–∞–Ω–æ–≤ (—É–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤).
    - –í–∞–ª–∏–¥–∞—Ü–∏—è: `target_value` —Ç–µ–ø–µ—Ä—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω `min="1"`.
4. **Localization Refinement**:
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã "–±—Ä–µ–¥"-–ø–µ—Ä–µ–≤–æ–¥—ã: –õ—É–Ω–∞ ‚Üí –ú–µ—Å—è—Ü, –¥–µ–≤—è–Ω–æ—Å—Ç–æ ‚Üí –ö–≤–∞—Ä—Ç–∞–ª, –í—Ö–æ–¥ ‚Üí –î–æ—Ö–æ–¥.
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Multiple Active Plans**: –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –¥–ª—è –æ–¥–Ω–æ–π —Ä–æ–ª–∏/–º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –ø–µ—Ä–∏–æ–¥—ã. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ (–±–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω + –±–æ–Ω—É—Å–Ω—ã–π).
- **Custom Periods**: –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω "–°–≤–æ–π –ø–µ—Ä–∏–æ–¥", –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –û–ë–Ø–ó–ê–ù —É–∫–∞–∑–∞—Ç—å –¥–∞—Ç—ã. –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –¥–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã.
- **Metric Keys**: –ö–ª—é—á–∏ –º–µ—Ç—Ä–∏–∫ –≤ `plan_metrics` —è–≤–ª—è—é—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏. –ò—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–ª–∞–Ω—ã.

### –§–ê–ô–õ–´
**–ù–û–í–´–ï:**
- `backend/db/migrations/consolidated/plan_updates.py` (–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã)

**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/db/plans.py` (–†–∞—Å—à–∏—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ CRUD)
- `backend/api/plans.py` (–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ –ø–ª–∞–Ω–æ–≤)
- `frontend/src/services/api.ts` (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º–∏ API)
- `frontend/src/pages/admin/PlansManagement.tsx` (–ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI)
- `frontend/src/locales/ru/admin/plans.json` (–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
- `CHANGELOG.txt`

## 2026-01-03: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (Bookings)

### –ü–†–û–ë–õ–ï–ú–ê
1. **Broken Translations**: –ù–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥ –≤ CRM –Ω–µ –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∏—Å—å –ø—Ä–∏ —Å–º–µ–Ω–µ –ª–æ–∫–∞–ª–∏, –∞ —Å—Ç–∞—Ç—É—Å—ã (¬´–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞¬ª, ¬´–ó–∞–≤–µ—Ä—à–µ–Ω–∞¬ª) –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –∞–Ω–≥–ª–∏–π—Å–∫–∏–π.
2. **Missing Revenue**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ CRM –∞–¥–º–∏–Ω–∫—É, —Å—Ç–æ–∏–º–æ—Å—Ç—å (revenue) –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –≤ –ë–î.
3. **Inconsistent Data**: –ó–∞–ø–∏—Å–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–≥–ª–∏ –∏–º–µ—Ç—å –ø—É—Å—Ç–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Ä–∞–∑–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∏–º–ø–æ—Ä—Ç –∏–ª–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞).

### –†–ï–®–ï–ù–ò–ï
1. **I18n Fixes**:
    *   **Services**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `Bookings.tsx`. –¢–µ–ø–µ—Ä—å –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥ –∏—â—É—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ —É—Å–ª—É–≥ –∏ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π –ª–æ–∫–∞–ª–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –ë–î/JSON.
    *   **Statuses**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ö—É–∫ `useStatuses.ts` ‚Äî —Ç–µ–ø–µ—Ä—å –æ–Ω —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞. –ó–∞–ø–æ–ª–Ω–µ–Ω—ã –ø—É—Å—Ç—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ `common.json`.
    *   **Formatting**: –§–æ—Ä–º–∞—Ç –¥–∞—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞.
2. **Data Consistency**:
    *   **Revenue Fix**: –í `backend/db/bookings.py` –∏ `backend/api/bookings.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—è `revenue`. –¢–µ–ø–µ—Ä—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
    *   **Phone Fallback**: –ï—Å–ª–∏ –≤ –∑–∞–ø–∏—Å–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –±—ç–∫–µ–Ω–¥ (`list_bookings`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –µ–≥–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (`clients` table).
    *   **Profile Sync**: –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –∑–∞–ø–∏—Å–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –æ–±—â–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º –∫–ª–∏–µ–Ω—Ç–∞.
3. **Data Cleanup**:
    *   –ü—Ä–æ–≤–µ–¥–µ–Ω SQL –∞—É–¥–∏—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –∏ —Å—É–º–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö).

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Revenue SSOT**: –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏, –µ—Å–ª–∏ `revenue` –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ —É—Å–ª—É–≥–∏ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞.
- **Phone Priority**: –í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è `phone` –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏), –Ω–æ API –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∫–∞–∫ fallback.

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/db/bookings.py` (Save logic)
- `backend/api/bookings.py` (API endpoints full update)
- `frontend/src/pages/admin/Bookings.tsx` (Service localization logic)
- `frontend/src/hooks/useStatuses.ts` (Reactive translation)
- `frontend/scripts/i18n-sync.js` (Automated empty key filling)
- `CHANGELOG.txt`


## 2026-01-02: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –∏ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ë–∞–ª–ª–æ–≤ –õ–æ—è–ª—å–Ω–æ—Å—Ç–∏

### –ü–†–û–ë–õ–ï–ú–ê
1. **Lack of Control**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –º–æ–¥—É–ª–∏ (–õ–æ—è–ª—å–Ω–æ—Å—Ç—å, –†–µ—Ñ–µ—Ä–∞–ª–∫–∞, –ß–µ–ª–ª–µ–Ω–¥–∂–∏) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞.
2. **Infinite Points**: –ë–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ –∏–º–µ–ª–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (—Å–≥–æ—Ä–∞–Ω–∏—è), —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–ª—è —Å–∞–ª–æ–Ω–∞.
3. **Hardcoded Features**: –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–Ω–∞–ª–æ, –∫–∞–∫–∏–µ —Ñ–∏—á–∏ –≤–∫–ª—é—á–µ–Ω—ã, –∏ –≤—Å–µ–≥–¥–∞ –ø—ã—Ç–∞–ª–æ—Å—å –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å.

### –†–ï–®–ï–ù–ò–ï
1. **Feature Management System**:
    - –°–æ–∑–¥–∞–Ω `FeatureService` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–ª–∞–≥–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–π (`loyalty_program`, `referral_program`, `challenges`).
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–∫–ª/–≤—ã–∫–ª, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (start/end date) –∏ –±–µ–ª—ã—Ö —Å–ø–∏—Å–∫–æ–≤ (whitelist) –¥–ª—è –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
    - –î–æ–±–∞–≤–ª–µ–Ω Admin UI: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `FeatureManagement` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–ª–∞–≥–æ–≤.
    - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π API: `GET /api/public/features` –æ—Ç–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –µ–º—É —Ñ–∏—á–∏.
2. **Loyalty Expiration**:
    - –í `salon_settings` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `points_expiration_days`.
    - `LoyaltyService` –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –±–∞–ª–ª–æ–≤ —Ç–µ–ø–µ—Ä—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `expires_at`.
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ "–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –±–∞–ª–ª–æ–≤" –≤ `LoyaltyManagement` (Admin).
3. **Client App Integration**:
    - `AccountPage.tsx` —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏—á–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.
    - –í–∫–ª–∞–¥–∫–∏ (Loyalty, Achievements/Challenges) —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ —Ñ–∏—á–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞.
4. **Localization**:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∞–¥–º–∏–Ω–∫–∏ (Feature Management).

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Feature Flags SSOT**: –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏—á –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ `FeatureService.is_feature_enabled()`. –ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å JSON –∏–∑ –ë–î –Ω–∞–ø—Ä—è–º—É—é.
- **Whitelist Priority**: –ï—Å–ª–∏ –∑–∞–¥–∞–Ω whitelist, —Ñ–∏—á–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¢–û–õ–¨–ö–û —É–∫–∞–∑–∞–Ω–Ω—ã–º ID, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤–∫–ª—é—á–µ–Ω–∞.
- **Client Cache**: –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏—á. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤) –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ñ–ª–∞–≥ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

### TESTING
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ/–≤–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∏—á —á–µ—Ä–µ–∑ –ê–¥–º–∏–Ω–∫—É.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–æ–∫ –≤ –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–∞—Ç–æ–π —Å–≥–æ—Ä–∞–Ω–∏—è.
- ‚úÖ –°–∫—Ä–∏–ø—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ `check_features.py` –æ—Ç—Ä–∞–±–æ—Ç–∞–ª —É—Å–ø–µ—à–Ω–æ.

### –§–ê–ô–õ–´
**–ù–û–í–´–ï:**
- `backend/services/features.py` - NEW (–°–µ—Ä–≤–∏—Å —Ñ–∏—á)
- `frontend/src/pages/adminPanel/FeatureManagement.tsx` - NEW (UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/services/loyalty.py` - MODIFIED (–õ–æ–≥–∏–∫–∞ —Å–≥–æ—Ä–∞–Ω–∏—è)
- `backend/api/client_auth.py` - MODIFIED (API —Ñ–∏—á)
- `frontend/public_landing/pages/account/AccountPage.tsx` - MODIFIED (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤)
- `frontend/src/pages/adminPanel/LoyaltyManagement.tsx` - MODIFIED (–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≥–æ—Ä–∞–Ω–∏—è)
- `CHANGELOG.txt`

# CHANGELOG - –ü–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ Beauty CRM

## 2024-05-24: –§–∏–Ω–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –õ–∏—á–Ω–æ–≥–æ –ö–∞–±–∏–Ω–µ—Ç–∞ v2

### –ü–†–û–ë–õ–ï–ú–ê
1. **API Inconsistency**: –†–∞–∑–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ (id vs instagram_id).
2. **Hardcoded UI**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Achievements, Gallery –∏ Settings —Å–æ–¥–µ—Ä–∂–∞–ª–∏ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ RU-–ª–æ–∫–∞–ª–∏ –¥–ª—è –¥–∞—Ç –∏ –≤–∞–ª—é—Ç.
3. **Partial API Sync**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ –ë–î.
4. **UX Gaps**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ API (appointment/promo/achievement) –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–æ–≤.

### –†–ï–®–ï–ù–ò–ï
1. **Backend Standardization**:
    - –í–≤–µ–¥–µ–Ω–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_get_client_id(user, c)` –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ `client_id` –ø–æ –≤—Å–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ "Real Dynamics" –¥–ª—è Beauty-–ø—Ä–æ—Ñ–∏–ª—è (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º).
    - –í–Ω–µ–¥—Ä–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
    - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã URL –∞–≤–∞—Ç–∞—Ä–æ–≤ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤ (–≤—Å–µ–≥–¥–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏).
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `notification_prefs` –∏ `privacy_prefs` –≤ –≤–∏–¥–µ JSON –≤ —Ç–∞–±–ª–∏—Ü–µ `clients`.
2. **Frontend UI/UX Polish**:
    - **Achievements & Gallery**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ `toLocaleDateString(undefined, ...)` –¥–ª—è –ø–æ–ª–Ω–æ–π –ª–æ–∫–∞–ª–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    - **Settings**: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å API. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –ë–î, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è.
    - **Loyalty**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–≤–Ω–∏ (Tier) –∏ –≤–∞–ª—é—Ç—É (Currency) –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ —Å–∞–ª–æ–Ω–∞.
    - **Gallery**: –£–ª—É—á—à–µ–Ω UI –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è "–¥–æ/–ø–æ—Å–ª–µ" –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ü–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤.
3. **Data Integrity**:
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ –≤ `update_profile` —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ SQL –∑–∞–ø—Ä–æ—Å–µ.
    - –î–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `mark-all-read` –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **SSOT Preferences**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `clients.preferences` –∫–∞–∫ JSON. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ —Ñ—Ä–æ–Ω—Ç, –∏ –ª–æ–≥–∏–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ `get_client_profile`.
- **Absolute URLs**: –ë—ç–∫–µ–Ω–¥ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–ª–Ω—ã–µ URL –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –±–∏—Ç—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.
- **Client Identification**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `_get_client_id` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ `client_auth.py`.

### TESTING
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (Push/Email/SMS/Privacy).
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –¥–∏–Ω–∞–º–∏–∫–∞ beauty-–º–µ—Ç—Ä–∏–∫ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–∏–∑–∏—Ç–æ–≤.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ lint-–æ—à–∏–±–∫–∏ –≤ Masters.tsx –∏ Settings.tsx.

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/api/client_auth.py` (Major Logic Update)
- `frontend/public_landing/pages/account/v2_components/Settings.tsx`
- `frontend/public_landing/pages/account/v2_components/Achievements.tsx`
- `frontend/public_landing/pages/account/v2_components/Masters.tsx`
- `frontend/public_landing/pages/account/v2_components/Gallery.tsx`
- `frontend/public_landing/pages/account/v2_components/BeautyProfile.tsx`
- `frontend/public_landing/pages/account/v2_components/Loyalty.tsx`
- `frontend/public_landing/pages/account/v2_components/Dashboard.tsx`
- `frontend/public_landing/pages/account/v2_components/Appointments.tsx`
- `CHANGELOG.txt`

## 2025-12-28: –û—Ç–∫–∞—Ç –†–µ–¥–∏–∑–∞–π–Ω–∞ –í–∏–∑–∞—Ä–¥–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –£–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –§—É—Ç–µ—Ä–∞

### –ü–†–û–ë–õ–ï–ú–ê
1. **User Feedback**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ—Å–∏–ª –æ—Ç–∫–∞—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω –≤–∏–∑–∞—Ä–¥–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (Simplicity First).
2. **Feature Retention**: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –±—ã–ª –Ω–æ–≤—ã–π —Ñ—É—Ç–µ—Ä ("Presence Bar") –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–∞—Å—Ç–µ—Ä–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ñ–æ—Ç–æ –∏ –∏–º–µ–Ω–∏.

### –†–ï–®–ï–ù–ò–ï
1. **Design Rollback**:
    - –§–∞–π–ª—ã `UserBookingWizard.tsx` –∏ `UserBookingWizard.css` –æ—Ç–∫–∞—á–µ–Ω—ã –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –¥–æ –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏ —Ä–µ–¥–∏–∑–∞–π–Ω–∞ (—á–µ—Ä–µ–∑ `git restore`).
    - –í–æ–∑–≤—Ä–∞—â–µ–Ω—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —É—Å–ª—É–≥, –ø—Ä–æ—Å—Ç–∞—è —Å–µ—Ç–∫–∞ –º–∞—Å—Ç–µ—Ä–æ–≤ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å.
2. **Selective Merge (Footer)**:
    - –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ProfessionalStep` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Ñ—É—Ç–µ—Ä (`booking-footer-bar` —Å –∫–ª–∞—Å—Å–æ–º `container-blur`).
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∏ –∏–º–µ–Ω–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞ (–∏–ª–∏ "Flexible Master" –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ª—é–±–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞).
    - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ CSS —Å—Ç–∏–ª–∏ –≤ `UserBookingWizard.css` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–∞–∑–º—ã—Ç–∏—è, —Ç–µ–Ω–µ–π –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ —Ñ—É—Ç–µ—Ä–∞.
3. **UX Optimization**:
    - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ñ—É—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ `framer-motion`.
    - –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ (Services, DateTime) –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ—É—Ç–µ—Ä–æ–≤, –Ω–æ –æ–Ω–∏ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Hybrid Approach**: –¢–µ–∫—É—â–∏–π –≤–∏–∑–∞—Ä–¥ ‚Äî —ç—Ç–æ –º–∏–∫—Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- **SSOT Components**: –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–ª–∞—Å—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–π.

### TESTING
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω –æ—Ç–∫–∞—Ç –¥–∏–∑–∞–π–Ω–∞ –≤—Å–µ—Ö —à–∞–≥–æ–≤.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ –º–∞—Å—Ç–µ—Ä–∞ –≤ —Ñ—É—Ç–µ—Ä–µ `ProfessionalStep`.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ –Ω–æ–≤–æ–º —Ñ—É—Ç–µ—Ä–µ.

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `frontend/public_landing/pages/account/UserBookingWizard.tsx`
- `frontend/public_landing/pages/account/UserBookingWizard.css`
- `CHANGELOG.txt`



## 2025-12-26: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –î–∞–Ω–Ω—ã–µ –õ–∏—á–Ω–æ–≥–æ –ö–∞–±–∏–Ω–µ—Ç–∞

### –ü–†–û–ë–õ–ï–ú–ê
1. **Hardcoded Strings**: –í `AccountPage.tsx` –ø–æ—á—Ç–∏ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –∫–Ω–æ–ø–∫–∏, —Å—Ç–∞—Ç—É—Å—ã) –±—ã–ª–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
2. **Static Data**: –°–µ–∫—Ü–∏–∏ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ –∏–Ω—Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑ –ë–î.
3. **Date Formatting**: –î–∞—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –±–µ–∑ —É—á–µ—Ç–∞ –ª–æ–∫–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### –†–ï–®–ï–ù–ò–ï
1. **Full Localization**:
    - –í—Å–µ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `AccountPage.tsx` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã `t()` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω `account`.
    - –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏: –î–∞—à–±–æ—Ä–¥, –ì–∞–ª–µ—Ä–µ—è, –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è, Beauty-–ø—Ä–æ—Ñ–∏–ª—å, –ú–∞—Å—Ç–µ—Ä–∞, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ù–∞—Å—Ç—Ä–æ–π–∫–∏.
    - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª–µ–π `frontend/src/locales/ru/account.json` –∏ `frontend/src/locales/en/account.json`.
2. **Dynamic Data Integration**:
    - –ü–æ–¥–∫–ª—é—á–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `dashboardData` (API `get_client_dashboard`).
    - –°–µ–∫—Ü–∏—è —á–µ–ª–ª–µ–Ω–¥–∂–µ–π —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ë–î.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –æ–ø–∏—Å–∞–Ω–∏–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π/—á–µ–ª–ª–µ–Ω–¥–∂–µ–π (`title_ru` vs `title_en`).
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç Beauty Score –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∑–¥–æ—Ä–æ–≤—å—è.
3. **Date & Time**:
    - –í—Å–µ –¥–∞—Ç—ã —Ç–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `date-fns` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ª–æ–∫–∞–ª–∏ `getDateLocale()`.
4. **Cleanup**:
    - –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleFavoritePhoto` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –Ω–∏–º `selectedPhotoId`.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **i18n SSOT**: –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–µ–∫—Ü–∏–π –≤ –õ–ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–ª—é—á–∏ –≤ `account.json` –¥–ª—è –æ–±–æ–∏—Ö —è–∑—ã–∫–æ–≤.
- **Dynamic Titles**: –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ —á–µ–ª–ª–µ–Ω–¥–∂–∏ –≤ –ë–î –∏–º–µ—é—Ç –ø–æ–ª—è `_ru` –∏ `_en`. –ö–æ–¥ –≤ `AccountPage.tsx` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –∫–ª—é—á –Ω–∞ –æ—Å–Ω–æ–≤–µ `i18n.language`.
- **Date Fns Locale**: –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç `locale` –≤ —Ñ—É–Ω–∫—Ü–∏—é `format()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –º–µ—Å—è—Ü–µ–≤.

### TESTING
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ (RU/EN).
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–∂–¥–µ–π –∏–∑ –ë–î.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `frontend/public_landing/pages/account/AccountPage.tsx`
- `frontend/src/locales/ru/account.json`
- `frontend/src/locales/en/account.json`
- `backend/api/client_auth.py` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ dashboard)
- `CHANGELOG.txt`


## 2025-12-26: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ì–∞–ª–µ—Ä–µ–∏ –∏ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –î–∞–Ω–Ω—ã—Ö –ö–ª–∏–µ–Ω—Ç–∞

### –ü–†–û–ë–õ–ï–ú–ê
1. **Gallery Fragmentation**: –ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å –≤ `Services.tsx`, —á—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–≤–µ—Ä–Ω–æ. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∞—Å—Ç—å—é –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞.
2. **Missing Client Fields**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–æ–ª—è –¥–ª—è –ª–æ–≥–∏–Ω–∞ (email), —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π —Å–∫–∏–¥–∫–∏ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫–µ.
3. **Hardcoded Strings**: –í `ClientDetail.tsx` –∏ `Services.tsx` –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –Ω–µ–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.
4. **Lint Warnings**: –í `AccountPage.tsx` –∏ `UserBookingWizard.tsx` –≤–∏—Å–µ–ª–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

### –†–ï–®–ï–ù–ò–ï
1. **Admin Refactoring**:
    - `Services.tsx`: –£–¥–∞–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ì–∞–ª–µ—Ä–µ—è" –∏ –≤—Å—è —Å–≤—è–∑–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ß–µ–ª–ª–µ–Ω–¥–∂–∏".
    - `ClientDetail.tsx`: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç" –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ.
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è Email/Login, Password, –°–ø–µ—Ü. —Å–∫–∏–¥–∫–∞ –∏ –ü—Ä–æ–º–æ–∫–æ–¥ –≤ —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞.
2. **Backend Updates**:
    - `backend/db/clients.py`: –§—É–Ω–∫—Ü–∏—è `update_client_info` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è.
    - `backend/api/clients.py`: API —Ö–µ—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (SHA256).
    - `backend/utils/utils.py`: –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `hash_password`.
3. **Localization**:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ –≤ `ru/admin/ClientDetail.json` –∏ `en/admin/ClientDetail.json`.
4. **Cleanup**:
    - –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ `StatCard`, `TrendingUp`, `useSearchParams` –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `AccountPage.tsx` –∏ `UserBookingWizard.tsx`.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Password Hashing**: –ü–∞—Ä–æ–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ SHA256 —Ö–µ—à–µ–π. –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ!
- **Gallery Context**: –ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ `client_id` –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞.
- **SSOT**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `update_client_info`.

### TESTING
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∫–ª–∏–µ–Ω—Ç–∞.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è Admin Panel (RU/EN).

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `frontend/src/pages/admin/Services.tsx`
- `frontend/src/pages/admin/ClientDetail.tsx`
- `backend/db/clients.py`
- `backend/api/clients.py`
- `backend/utils/utils.py`
- `frontend/public_landing/pages/account/AccountPage.tsx`
- `frontend/public_landing/pages/account/UserBookingWizard.tsx`

## 2025-12-25: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤

### –ü–†–û–ë–õ–ï–ú–ê
1. **PostgreSQL Syntax Error**: –í —Ñ–∞–π–ª–µ `master_schedule.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ñ—É–Ω–∫—Ü–∏–∏ `TO_CHAR` –∏ `DATE` –∫ –∫–æ–ª–æ–Ω–∫–∞–º —Ç–∏–ø–∞ `TEXT` (–∫–æ–ª–æ–Ω–∫–∏ `datetime` –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `bookings` –∏ `booking_drafts`), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ: `function to_char(text, unknown) does not exist`.
2. **Schema Mismatch**: –¢–∞–±–ª–∏—Ü–∞ `booking_drafts` –Ω–µ –∏–º–µ–ª–∞ –∫–æ–ª–æ–Ω–æ–∫ `datetime`, `master` –∏ `expires_at`, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏—Å—å –≤ `master_schedule.py`.
3. **Verbose Tests**: –°–∫—Ä–∏–ø—Ç `run_all_tests.py` –≤—ã–≤–æ–¥–∏–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ –ø–æ–∏—Å–∫ –æ—à–∏–±–æ–∫.

### –†–ï–®–ï–ù–ò–ï
1. **SQL Fixes**:
   - –í `backend/services/master_schedule.py` –¥–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤: `datetime::timestamp`.
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω SQL-–∑–∞–ø—Ä–æ—Å –≤ `get_available_slots`: JOIN —Ç–∞–±–ª–∏—Ü—ã `services` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `service_name` –≤–º–µ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–æ–Ω–∫–∏ `service_id`.
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `NameError: end_dt` –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç–∏–ø–æ–≤ datetime (naive/aware).
   - –í –º–µ—Ç–æ–¥ `get_available_slots` –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `return_metadata=False` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–≤–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–∞–±–ª–∏—Ü–∞–º `bookings` –∏ `booking_drafts`.

2. **Database Schema Update**:
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `backend/db/migrations/consolidated/schema_bookings.py`: –≤ —Ç–∞–±–ª–∏—Ü—É `booking_drafts` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏ `datetime`, `master` –∏ `expires_at`.
   - –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `update_booking_progress` –≤ `backend/db/bookings.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫.
   - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ (expires_at) ‚Äî 30 –º–∏–Ω—É—Ç.

3. **Test Orchestrator Refactoring**:
   - `backend/tests/run_all_tests.py` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω.
   - –í–≤–µ–¥–µ–Ω–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `run_suite` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤.
   - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ (stdout/stderr) –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤. –í—ã–≤–æ–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–≤–∞–ª–∞ (FAIL).
   - –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.
   - –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª—É–≥ –±–µ–∑ –º–∞—Å—Ç–µ—Ä–æ–≤.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Explicit Casting**: –í PostgreSQL –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ –∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–ª—è–º –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `::timestamp`.
- **SSOT Schema**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å—Å—è –≤ `consolidated` –º–∏–≥—Ä–∞—Ü–∏—è—Ö.
- **Test Output Control**: –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —á–∏—Å—Ç–æ—Ç—ã –ª–æ–≥–æ–≤ –≤ CI/CD –∏ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —É—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞—Å–æ—Ä—è—Ç—å –∫–æ–Ω—Å–æ–ª—å.

### TESTING
- ‚úÖ –ó–∞–ø—É—â–µ–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–æ–≤ (10/10 –ø—Ä–æ–π–¥–µ–Ω—ã).
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ `master_schedule.py` —Å PostgreSQL.
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤.

### –§–ê–ô–õ–´
**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/services/master_schedule.py` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.
- `backend/db/migrations/consolidated/schema_bookings.py` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ `booking_drafts`.
- `backend/db/bookings.py` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤.
- `backend/tests/run_all_tests.py` ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤.

## 2025-12-25: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∞–¥–º–∏–Ω—Å–∫–∏–º –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º

### –ü–†–û–ë–õ–ï–ú–ê
–°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–º–µ–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –õ—é–±–æ–π –º–æ–≥ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø (auto_verify = True)
- –ù–µ –±—ã–ª–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email –∞–¥—Ä–µ—Å–∞
- –ù–µ –±—ã–ª–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∞–¥–º–∏–Ω–æ–≤ –Ω–∞–¥ –Ω–æ–≤—ã–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ username/email –±—ã–ª–∞ case-sensitive
- Demo Client —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- Email verification –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–æ –û–¢–ö–õ–Æ–ß–ï–ù (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ core/auth.py)

### –†–ï–®–ï–ù–ò–ï
1. –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π email —Å–µ—Ä–≤–∏—Å:
   - `backend/utils/email_service.py` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º
   - `send_verification_code_email()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ (–≤–º–µ—Å—Ç–æ —Å—Å—ã–ª–∫–∏)
   - `send_admin_notification_email()` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤ –æ –Ω–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - `send_registration_approved_email()` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–± –æ–¥–æ–±—Ä–µ–Ω–∏–∏
   - `send_registration_rejected_email()` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏
   - –ö—Ä–∞—Å–∏–≤—ã–µ HTML —à–∞–±–ª–æ–Ω—ã —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

2. –°–æ–∑–¥–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:
   - `db/migrations/schema/create_email_verification_tables.py`
   - –¢–∞–±–ª–∏—Ü–∞ `client_email_verifications` –¥–ª—è –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –¢–∞–±–ª–∏—Ü–∞ `registration_audit` –¥–ª—è –∞—É–¥–∏—Ç–∞ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏

3. –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏:
   - `backend/db/pending_registrations.py`
   - `get_pending_registrations()` - —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –æ–¥–æ–±—Ä–µ–Ω–∏—è
   - `approve_registration()` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π email
   - `reject_registration()` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã
   - `delete_pending_registration()` - –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - `get_registration_audit_log()` - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

4. Admin API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
   - `backend/api/admin_registrations.py`
   - GET `/api/admin/registrations/pending` - —Å–ø–∏—Å–æ–∫ pending users
  - POST `/api/admin/registrations/approve` - –æ–¥–æ–±—Ä–∏—Ç—å
   - POST `/api/admin/registrations/reject` - –æ—Ç–∫–ª–æ–Ω–∏—Ç—å
   - DELETE `/api/admin/registrations/{user_id}` - —É–¥–∞–ª–∏—Ç—å
   - GET `/api/admin/registrations/audit-log` - –ª–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π
   - –í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç —Ä–æ–ª—å director –∏–ª–∏ admin

5. –û–±–Ω–æ–≤–ª–µ–Ω–∞ core –ª–æ–≥–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
   - `backend/core/auth.py` - –û–°–ù–û–í–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:
     * –í–ö–õ–Æ–ß–ï–ù–´ –ø—Ä–æ–≤–µ—Ä–∫–∏ email_verified –∏ is_active –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ (—Å—Ç—Ä–æ–∫–∏ 46-95)
     * –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin/admin123 –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏)
     * AUTO-ACTIVATION —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ admin (—Å—Ç—Ä–æ–∫–∏ 221-236)
     * Case-insensitive –ø—Ä–æ–≤–µ—Ä–∫–∞ username –∏ email (—Å—Ç—Ä–æ–∫–∏ 186-201)
     * –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ —Å—Å—ã–ª–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 315)
     * –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤ –æ –Ω–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 318-335)
     * –ü–æ–¥—Ä–æ–±–Ω—ã–µ error_type –≤ –æ—Ç–≤–µ—Ç–∞—Ö: "email_not_verified", "not_approved"
   
6. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä:
   - `backend/main.py` (—Å—Ç—Ä–æ–∫–∏ 106, 179)
   - –ò–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è admin_registrations_router

7. –°–æ–∑–¥–∞–Ω test suite:
   - `backend/scripts/testing/test_registration.py`
   - 6 –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤—Å–µ–≥–æ flow

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –í–ö–õ–Æ–ß–ï–ù–ê** - –≤—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email
- **Admin approval –¢–†–ï–ë–£–ï–¢–°–Ø** - –¥–∞–∂–µ –ø–æ—Å–ª–µ email verification –Ω—É–∂–Ω–æ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è admin** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å username "admin" –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- **Demo Client –ù–ï –ù–ê–ô–î–ï–ù** - –ª–∏–±–æ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –≤—Ä—É—á–Ω—É—é, –ª–∏–±–æ —É–∂–µ —É–¥–∞–ª–µ–Ω
- **SMTP –ù–£–ñ–ï–ù** - –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP –ø–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- **Case-insensitive checks** - "User" –∏ "user" —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏

### FLOW –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å username –∏ email (case-insensitive)
3. –°–æ–∑–¥–∞–µ—Ç—Å—è user —Å is_active=FALSE, email_verified=FALSE
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 15 –º–∏–Ω—É—Ç)
5. –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞–º
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ ‚Üí email_verified=TRUE
8. –ê–¥–º–∏–Ω –æ–¥–æ–±—Ä—è–µ—Ç ‚Üí is_active=TRUE ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email
9. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–°–¢–¨ –ö–û–î–ê ‚úÖ
**–ù–ï–¢ –•–ê–†–î–ö–û–î–ê:**
- ‚úÖ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASSWORD)
- ‚úÖ URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ ENV (APP_URL, ADMIN_PANEL_URL)
- ‚úÖ Email templates —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ Verificaction code length –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6)
- ‚úÖ Code expiry –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 –º–∏–Ω—É—Ç)
- ‚úÖ –†–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ ('director', 'admin')

**–ü—Ä–∏–º–µ—Ä—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏:**
```python
# Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —è–∑—ã–∫–∏
parse_duration_to_minutes("1h 30min")    # ‚Üí 90 (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
parse_duration_to_minutes("1—á 30–º–∏–Ω")    # ‚Üí 90 (—Ä—É—Å—Å–∫–∏–π)
parse_duration_to_minutes("2 Std 15 Min") # ‚Üí 135 (–Ω–µ–º–µ—Ü–∫–∏–π)

format_duration_display(90, 'ru')  # ‚Üí "1—á 30–º–∏–Ω"
format_duration_display(90, 'de')  # ‚Üí "1Std 30Min"
format_duration_display(90, 'hi')  # ‚Üí "1‡§ò‡§Ç‡§ü‡§æ 30‡§Æ‡§ø‡§®‡§ü"
```

### –ú–û–ñ–ï–¢ –°–õ–û–ú–ê–¢–¨–°–Ø
- **SMTP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** ‚Üí –ø–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è (fallback: –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–¥ –≤ console/response)
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ users** ‚Üí –º–æ–≥—É—Ç –∏–º–µ—Ç—å is_active=TRUE –±–µ–∑ email_verified
- **Admin user –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Üí –Ω–µ–∫–æ–º—É –±—É–¥–µ—Ç –æ–¥–æ–±—Ä—è—Ç—å –ø–µ—Ä–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Frontend –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ —Å–º–æ–≥—É—Ç –≤–≤–µ—Å—Ç–∏ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã** ‚Üí
### [2024-05-22] Full High-Fidelity Design Refresh (Round 2)
- [x] Full Synchronization with new_admin Booking Components:
    - Ported BookingMenu, ServicesStep, ProfessionalStep, DateTimeStep, and ConfirmStep for pixel-perfect design.
    - Isolated UI components (Calendar, Button, Card) to ensure high-fidelity without global side-effects.
    - Preserved and integrated existing api service, i18n, and state management.
    - Fixed relative import paths for deeper nested components to ensure successful build.
    - Synchronized core CSS variables and design tokens from `new_admin/theme.css`.
    - Fully synchronized the entire style system, including @theme and typography layers.
    - Updated `UserBookingWizard.tsx` layout to match the original app container and header classes.
- ‚úÖ Implemented complete redesign of `UserBookingWizard.tsx` matching `new_admin` aesthetics.
- ‚úÖ Integrated premium design tokens (gradients, shadows, blurs) into `UserBookingWizard.css`.
- ‚úÖ Redesigned `BookingMenu` with modern step cards and session summary.
- ‚úÖ Modernized `ServicesStep` with search, category pills, and premium service cards.
- ‚úÖ Updated `ProfessionalStep` with large avatars, ratings, and bottom persistence bar.
- ‚úÖ Polished `DateTimeStep` calendar and time slot selection grid (preserving core logic).
- ‚úÖ Refined `ConfirmStep` summary and verification modal.
- ‚úÖ Fixed several lint warnings and ensured full mobile responsiveness.
- ‚ö†Ô∏è **IMPORTANT**: Existing backend logic and API calls were strictly preserved as requested.
### TESTING
–°–æ–∑–¥–∞–Ω test suite –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π:
- ‚úÖ Email uniqueness (case-insensitive)
- ‚úÖ Username uniqueness (case-insensitive)  
- ‚úÖ Verification code generation (6 digits, 15-min expiry)
- ‚úÖ Email verification flow
- ‚úÖ Admin approval flow
- ‚úÖ First admin exception

API endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
```bash
curl http://localhost:8000/api/admin/registrations/pending
# {"detail":"Unauthorized"} ‚úÖ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)
```

### –§–ê–ô–õ–´
**–ù–û–í–´–ï:**
- `backend/utils/email_service.py` - NEW (email —Å–µ—Ä–≤–∏—Å —Å HTML —à–∞–±–ª–æ–Ω–∞–º–∏)
- `backend/db/migrations/schema/create_email_verification_tables.py` - NEW (–º–∏–≥—Ä–∞—Ü–∏—è)
- `backend/db/pending_registrations.py` - NEW (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π)
- `backend/api/admin_registrations.py` - NEW (admin API)
- `backend/scripts/testing/test_registration.py` - NEW (—Ç–µ—Å—Ç—ã)

**–ò–ó–ú–ï–ù–ï–ù–´:**
- `backend/core/auth.py` - MODIFIED (–≤–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω admin exception)
- `backend/main.py` - MODIFIED (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä)

### TODO (Frontend)
- –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å: `frontend/src/pages/admin/PendingRegistrations.tsx`
- –û–±–Ω–æ–≤–∏—Ç—å Register.tsx: –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–∏—Ç—å Login.tsx: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã "email –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω", "–æ–∂–∏–¥–∞–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è"
- –î–æ–±–∞–≤–∏—Ç—å badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º pending registrations –≤ admin –º–µ–Ω—é

### –ù–ê–°–¢–†–û–ô–ö–ê (Production)
–î–æ–±–∞–≤–∏—Ç—å –≤ .env:
```
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@your-domain.com
SMTP_FROM_NAME=Beauty CRM
APP_URL=https://your-domain.com
ADMIN_PANEL_URL=https://your-domain.com/admin/registrations
```

## 2025-12-13: –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å–ª—É–≥

### –ü–†–û–ë–õ–ï–ú–ê
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥ —Ö—Ä–∞–Ω–∏–ª–∞—Å—å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ ("1h", "1h 30min", "1—á 30"), —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã:
- –ë–æ—Ç –Ω–µ –º–æ–≥ –ø–æ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç "1—á 30"
- –°–ª–æ–∂–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –†–ï–®–ï–ù–ò–ï
1. –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `utils/duration_utils.py` —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
   - `parse_duration_to_minutes(duration_str)` - –ø–∞—Ä—Å–∏—Ç –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç –≤ –º–∏–Ω—É—Ç—ã
   - `format_duration_display(minutes, language)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –º–∏–Ω—É—Ç—ã –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
   
2. –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î:
   - –ë–´–õ–û: `duration TEXT` —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ "1h", "1h 30min", "1—á 30" 
   - –°–¢–ê–õ–û: `duration TEXT` —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö: "60", "90"
   
3. –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
   - `bot/tools.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `parse_duration_to_minutes()`
   - `bot/prompts.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `format_duration_display(minutes, language)`
   - `db/employees.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤

4. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:
   - `scripts/migrations/migrate_duration_to_minutes.py` - –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
   - –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `scripts/maintenance/fix_data.py` (SSOT –ø—Ä–∏–Ω—Ü–∏–ø)

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **–ù–ï —Ö—Ä–∞–Ω–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ** - —Ç–æ–ª—å–∫–æ –º–∏–Ω—É—Ç—ã (—á–∏—Å–ª–∞)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã**: `parse_duration_to_minutes()` –∏ `format_duration_display()`
- **–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å —è–∑—ã–∫**: format_duration_display(90, 'ru') ‚Üí "1—á 30–º–∏–Ω"
- **–ú–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞** - –≤—Å–µ —É—Å–ª—É–≥–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –≤ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

### –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–°–¢–¨ –ö–û–î–ê ‚úÖ
**–ù–ï–¢ –•–ê–†–î–ö–û–î–ê:**
- ‚úÖ –°–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤ –≤—ã–Ω–µ—Å–µ–Ω –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `DURATION_FORMATS`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 9 —è–∑—ã–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞: ru, en, ar, de, es, fr, hi, kk, pt
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏: "1h", "1—á", "1 Std", "1 hour", "90"
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –µ—Å–ª–∏ —è–∑—ã–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å `frontend/public/locales/`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `get_supported_languages()` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —è–∑—ã–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏:**
```python
# Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —è–∑—ã–∫–∏
parse_duration_to_minutes("1h 30min")    # ‚Üí 90 (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
parse_duration_to_minutes("1—á 30–º–∏–Ω")    # ‚Üí 90 (—Ä—É—Å—Å–∫–∏–π)
parse_duration_to_minutes("2 Std 15 Min") # ‚Üí 135 (–Ω–µ–º–µ—Ü–∫–∏–π)

format_duration_display(90, 'ru')  # ‚Üí "1—á 30–º–∏–Ω"
format_duration_display(90, 'de')  # ‚Üí "1Std 30Min"
format_duration_display(90, 'hi')  # ‚Üí "1‡§ò‡§Ç‡§ü‡§æ 30‡§Æ‡§ø‡§®‡§ü"
```

### –ú–û–ñ–ï–¢ –°–õ–û–ú–ê–¢–¨–°–Ø
- –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç "1h 30min" –≤–º–µ—Å—Ç–æ "90"
- –ï—Å–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏ duration –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoints —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥

### TESTING
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
- "1h" ‚Üí 60 ‚Üí "1—á" (ru), "1h" (en), "1ÿ≥" (ar) ‚úÖ
- "1h 30min" ‚Üí 90 ‚Üí "1—á 30–º–∏–Ω" (ru), "1h 30min" (en) ‚úÖ  
- "90" ‚Üí 90 ‚Üí "1—á 30–º–∏–Ω" ‚úÖ
- "2h" ‚Üí 120 ‚Üí "2—á" ‚úÖ

### –§–ê–ô–õ–´
- `backend/utils/duration_utils.py` - NEW
- `backend/bot/tools.py` - MODIFIED (—É–ø—Ä–æ—â–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥)
- `backend/bot/prompts.py` - MODIFIED (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—á–µ—Ç–æ–º —è–∑—ã–∫–∞)
- `backend/db/employees.py` - MODIFIED (—Ä–∞—Å—á–µ—Ç –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤)
- `backend/scripts/migrations/migrate_duration_to_minutes.py` - NEW
- `backend/scripts/maintenance/fix_data.py` - MODIFIED (–¥–æ–±–∞–≤–ª–µ–Ω–∞ fix_service_durations)

## 2026-03-24: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∑–∞–ø–∏—Å–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ —á–∞—Ç–∞

### –ü–†–û–ë–õ–ï–ú–ê
1. –í —Å–∏—Å—Ç–µ–º–µ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∑–∞–ø–∏—Å–∏ (–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –≥–æ—Å—Ç–µ–≤–∞—è —Å—Å—ã–ª–∫–∞, Telegram, WhatsApp).
2. –í –ø–∞–Ω–µ–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á–∞—Ç–∞ (InfoPanel) –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–µ–∫—Å—Ç—ã –∏–∑-–∑–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–∞—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.

### –†–ï–®–ï–ù–ò–ï
1. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–ø–∏—Å–∏**:
   - –í `Bookings.tsx` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏.
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏: –í—Ä—É—á–Ω—É—é, –õ–ö, –ì–æ—Å—Ç–µ–≤–∞—è —Å—Å—ã–ª–∫–∞, Instagram, Telegram, WhatsApp.
   - –í —Ç–∞–±–ª–∏—Ü—É –∑–∞–ø–∏—Å–µ–π –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (üë§ –õ–ö, üîó –°—Å—ã–ª–∫–∞).

2. **–£–ª—É—á—à–µ–Ω–∏–µ InfoPanel (–ß–∞—Ç)**:
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞.
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –±–ª–æ–∫–∏ —Å –ø—Ä—è–º—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ Telegram –∏ WhatsApp (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã ID –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω).
   - –í—Å–µ –≤—ã–∑–æ–≤—ã `t()` –≤ `InfoPanel.tsx` –¥–æ–ø–æ–ª–Ω–µ–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (fallback) –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–∞–∂–µ –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö JSON-—Ñ–∞–π–ª–∞—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤.

3. **Backend**:
   - API –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ–ª–µ–π `source` –∏ `telegram_id`.

### –í–ê–ñ–ù–û –ü–û–ú–ù–ò–¢–¨
- **–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ t()**: –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ `t('key', 'Default Text')`.
- **–ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥**: –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π –≤ –∫–æ–¥ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å `npm run db:i18n:auto`.

### –§–ê–ô–õ–´
- `backend/db/clients.py` - MODIFIED
- `backend/api/clients.py` - MODIFIED
- `frontend/src/pages/admin/Bookings.tsx` - MODIFIED
- `frontend/src/pages/manager/Chat.tsx` - MODIFIED
- `frontend/src/components/chat/InfoPanel.tsx` - MODIFIED
